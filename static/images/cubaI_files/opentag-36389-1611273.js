/*
 * Opentag, a tag deployment platform
 * Copyright 2011-2016, Qubit Group
 * http://opentag.qubitproducts.com
 */
(function(){var x=function(){return this}();x.qubit=x.qubit||{};x.qubit.SYSTEM_DEFAULTS={pingServerUrl:"opentag-stats.qubit.com/ping",tellLoadTimesProbability:1}})();(function(){var x={"id":"36389"};try{var a=function(){return this}();if(!a.qubit)a.qubit={};var v=a.qubit;if(!v.cs)v.cs={};v.CLIENT_CONFIG=x;var J=x.id||"efault";J="d"+J;if(!v.cs[J])v.cs[J]={};v.cs[J].ClientConfig=x;if(v.SYSTEM_DEFAULTS)v.cs[J].SystemDefaults=v.SYSTEM_DEFAULTS}catch(N){}})();
(function(){(function(){function x(){return ha.uv}function a(){var g=x();if(!g||!g.emit)return false;if(!ba){ba=true;for(var b=0;b<da.length;b++){var w=da[b];if(w.on)g.on.apply(g,w.on);else if(w.emit)g.emit.apply(g,w.emit)}g.on(/.*/,function(q){var z=q.meta.type;var h=ea[z];if(!h)ea[z]={current:q,history:[q]};else{h.current=q;h.history.push(q)}}).replay();Y=true}return true}(function(){if(!Function.prototype.bind)Function.prototype.bind=function(g){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying "+
"to be bound is not callable");var b=Array.prototype.slice.call(arguments,1);var w=this;var q=function(){};var z=function(){return w.apply(this instanceof q?this:g,b.concat(Array.prototype.slice.call(arguments)))};q.prototype=this.prototype;z.prototype=new q;return z}})();var v={__anonymous__:true};var J=null;try{J=(false||eval)("this")}catch(g){}if(!J)try{var N=function(){return this};J=N()}catch(g){}v=J;var B=v.qubit||{};if(!v.qubit)v.qubit=B;var H="3.3.2";if(B.VERSION&&B.VERSION!==H)try{console.warn("There is already 'qubit.VERSION' set to: "+
B.VERSION)}catch(g){}B.VERSION=H;try{if(typeof module==="object")module.exports=v}catch(g){}var R=function(){};var Z;(function(){function g(){}function b(z,h,p,e,u){var n=z.split(".");var y=g.NAMESPACE_BASE||v;var C=null;var d=null;var A;if(u)y=J;var D=y;y=p||y;for(A=0;A<n.length-1;A+=1){C=y;d=n[A];y[d]=y[d]||{};y=y[d]}C=y;d=n[n.length-1];if(J.TAGSDK_NS_OVERRIDE)e=false;if(J.TAGSDK_NS_FORCED_OVERRIDE_OPTION!==undefined)e=!J.TAGSDK_NS_FORCED_OVERRIDE_OPTION;if(h!==undefined){if(C[d]===undefined||!e)C[d]=
h}else C[d]=C[d]||{};if(h){h.CLASSPATH=n.join(".");n.splice(n.length-1,1);h.PACKAGE_NAME=n.join(".")}return{root:D,object:C,instance:C[d]}}g.global=function(){return J};g.STANDARD_CS_NS="qubit.cs";g.clientSpaceClasspath=function(){if(window.qubit.CLIENT_CONFIG)return"qubit.cs.d"+window.qubit.CLIENT_CONFIG.id;return g.STANDARD_CS_NS};g.globalNamespace=function(z,h,p,e){return b(z,h,p,e,true)};g.namespace=function(z,h,p,e){return b(z,h,p,e,false)};g.clientNamespace=function(z,h,p,e){return g.namespace(g.clientSpaceClasspath()+
"."+z,h,p,e)};g.clazz=function(z,h,p,e,u){g.namespace(z,h,e,true);if(typeof p==="function"){h.SUPER=p;h.superclass=p;h.prototype=new p(u);h.prototype.SUPER=p;h.prototype.CLASS=h}var n=z.split(".");if(h.prototype){h.prototype.CLASSPATH=n.join(".");h.prototype.CLASS_NAME=n[n.length-1];n.splice(n.length-1,1);h.prototype.PACKAGE_NAME=n.join(".")}else{h.CLASSPATH=n.join(".");h.STATIC_NAME=n[n.length-1];n.splice(n.length-1,1);h.PACKAGE_NAME=n.join(".")}return h};g.clazz("qubit.Define",g);g.clientClazz=
function(z,h,p,e,u){return g.clazz(g.clientSpaceClasspath()+"."+z,h,p,e,u)};g.STANDARD_VS_NS="qubit.vs";g.vendorsSpaceClasspath=function(z){var h=B.VENDOR_SPACE_CP;var p=h===undefined||h===null?g.STANDARD_VS_NS:h;if(z)if(p)return p+"."+z;else return z;return p};var w=g.vendorsSpaceClasspath();var q;if(w)q=g.namespace(w,{},null,true).instance;else q=g.global();g.getVendorSpace=function(){return q};g.vendorNamespace=function(z,h,p,e){z=g.vendorsSpaceClasspath(z);return g.namespace(z,h,p,e)};g.vendorClazz=
function(z,h,p,e,u){z=g.vendorsSpaceClasspath(z);return g.clazz(z,h,p,e,u)}})();(function(){function g(p){}var b="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-#$\x26+()@"+"'%./:\x3c\x3e?["+'"]^_`{|}~'+"\\"+";\x3d";var w={};for(var q=0;q<b.length;q++)w[b.charAt(q)]=q;B.Define.clazz("qubit.Cookie",g);g.cookieAlphabet=b;g.cookieAlphabetMap=w;g.decode=function(p){return unescape(p)};g.encode=function(p){return escape(p)};g.set=function(p,e,u,n,y){var C;if(u){var d=new Date;
d.setTime(d.getTime()+u*24*60*60*1E3);C="; expires\x3d"+d.toGMTString()}else C="";if(!y){p=g.encode(p);e=g.encode(e)}var A=p+"\x3d"+e+C+"; path\x3d/;";if(n)A+=" domain\x3d"+n;document.cookie=A};var z;var h={};g.resetCache=function(){z=null;h={}};g.getCached=function(p,e){var u=p+"\x3d"+!!e;if(h[u]!==undefined)return h[u];var n=p+"\x3d";if(!z)z=document.cookie.split(";");for(var y=0;y<z.length;y++){for(var C=z[y];C.charAt(0)===" ";)C=C.substring(1,C.length);if(C.indexOf(n)===0){var d=C.substring(n.length,
C.length);if(!e)d=g.decode(d);h[u]=d;return d}}h[u]=null;return null};g.get=function(p,e){var u=p+"\x3d";var n=document.cookie.split(";");for(var y=0;y<n.length;y++){for(var C=n[y];C.charAt(0)===" ";)C=C.substring(1,C.length);if(C.indexOf(u)===0){var d=C.substring(u.length,C.length);if(!e)d=g.decode(d);return d}}return null};g.getAllForName=function(p,e){if(!p)return[];var u=p+"\x3d";var n=document.cookie.split(";");var y=[];for(var C=0;C<n.length;C++){for(var d=n[C];d.charAt(0)===" ";)d=d.substring(1,
d.length);if(d.indexOf(u)===0){var A=d.substring(u.length,d.length);if(e)A=g.decode(A);y.push(A)}}return y};g.getAll=function(p){var e=document.cookie.split(";");var u=[];for(var n=0;n<e.length;n++){for(var y=e[n];y.charAt(0)===" ";)y=y.substring(1,y.length);var C=y.substring(0,y.indexOf("\x3d"));var d=y.substring(C.length+1,y.length);if(p)d=g.decode(d);u.push([C,d])}return u};g.rm=function(p,e){g.set(p,"",-1,e)}})();(function(){function g(d,A,D){this.collectLogs=!!g.isCollecting();this.collectLocally=
D;this.collection=[];this.getPrefix=function(){var F="";if(A){if(typeof A==="function")F=A(this.ref);else if(A.CLASS_NAME)F=A.CLASS_NAME;else if(A.constructor&&A.constructor.name)F=A.constructor.name;if(F)F+=" -\x3e "}return(d||"")+F}}function b(d,A,D,F,r,m,l,f){var c;var k=z>=f;if(g.getCollectLevel()>=0||k){if(r)c=[F,l,D];else c=[A+d.getPrefix()+F,m,D];c[3]=f;d.collect(c,f);if(k)d.printMessage.apply(d,c)}}var w=B.Define;var q=null;w.clazz("qubit.opentag.Log",g);g.LEVEL_FINEST=4;g.LEVEL_FINE=3;g.LEVEL_INFO=
2;g.LEVEL_WARN=1;g.LEVEL_ERROR=0;g.LEVEL_NONE=-1;g.MAX_LOG_LEN=1E4;g.prototype.MAX_LOG_LEN=-1;var z=g.LEVEL_NONE;var h=g.LEVEL_NONE;var p=true;g.setLevelFromCookie=function(){var d=B.Cookie.get("qubit.opentag.Log.LEVEL");if(d){d=+d;if(!isNaN(d))if(d>0){var A=g.LEVEL_FINE;g.setCollectLevel(d>A?d:A);g.setLevel(+d)}}};g.setCollecting=function(d){p=!!d};g.isCollecting=function(){return p||g.COLLECT};g.setLevel=function(d){z=+d};g.setCollectAndLevel=function(d){g.setLevel(d);g.setCollectLevel(d)};g.getLevel=
function(){return z};g.setCollectLevel=function(d){h=+d};g.getCollectLevel=function(){return h};var e=[];g.logsCollection=e;g.rePrintAll=function(d,A,D,F){var r=z;if(d!==undefined)z=d;try{if(g.isCollecting()){try{if(!D)q.clear()}catch(c){}var m=F||g.logsCollection;var l=0;for(var f=0;f<m.length;f++)(function(c){var k=m[c];var t=k[3];if(t!==undefined&&z>=t){l++;if(!A)g.print.apply(g,k);else B.opentag.Timed.setTimeout(function(){if(d!==undefined)z=d;try{g.print.apply(g,k)}finally{z=r}},l*A)}})(f)}}catch(c){}finally{z=
r}};var u=w.global();var n=!!(u.webkitMediaStream||u.webkitURL||u.mozContact);g.isStyleSupported=function(){return n};var y={};g.setConsole=function(d){q=d||y;return q};g.delayPrint=-1;var C=(new Date).valueOf();g.prototype.printMessage=function(d,A,D,F){if(g.delayPrint>0){var r=g.delayPrint;var m=C-(new Date).valueOf();if(m>0)r+=m;try{B.opentag.Timed.setTimeout(function(){this.print(d,A,D,F)}.bind(this),r)}catch(l){setTimeout(function(){this.print(d,A,D,F)}.bind(this),r)}C=(new Date).valueOf()+r}else this.print(d,
A,D,F)};g.prototype.print=function(d,A,D,F){g.print(d,A,D,F)};g.print=function(d,A,D,F){if(F!==undefined&&z<F)return;try{if(q&&q.log)if(A&&g.isStyleSupported())if(D&&q[D])q[D]("%c"+d,A);else q.log("%c"+d,A);else if(D&&q[D])q[D](d);else q.log(d)}catch(r){}};g.prototype.collect=function(d,A){if(A===undefined)A=g.getCollectLevel();var D=false;var F=this.collectLogs&&g.isCollecting()&&g.getCollectLevel()>=+A;if(F){e.push(d);D=true}if(this.collectLocally&&F){this.collection.push(d);D=true}if(g.MAX_LOG_LEN>
0)if(e.length>g.MAX_LOG_LEN)e.splice(0,e.length-g.MAX_LOG_LEN);if(g.MAX_LOG_LEN>0||this.MAX_LOG_LEN>0){var r=g.MAX_LOG_LEN;if(this.MAX_LOG_LEN>0)r=this.MAX_LOG_LEN;if(this.collection.length>r)this.collection.splice(0,this.collection.length-r)}return D?d:null};g.clearAllLogs=function(){try{q.clear()}catch(d){}finally{e.splice(0,e.length)}};g.getCollectedByLevel=function(d,A){A=A||e;var D=[];for(var F=0;F<A.length;F++){var r=A[F];var m=r[0];var l=m[4];if(l===d)D.push(r)}return D};g.prototype.rePrint=
function(d,A,D){g.rePrintAll(d,A,!D,this.collection)};g.prototype.FINEST=function(d,A){b(this,"FINEST: ",false,d,A,"color:#CCCCCC;",false,g.LEVEL_FINEST)};g.prototype.FINE=function(d,A){b(this,"FINE: ",false,d,A,"color:#999999;",false,g.LEVEL_FINE)};g.prototype.INFO=function(d,A,D){b(this,"INFO: ","info",d,A,D,D,g.LEVEL_INFO)};g.prototype.WARN=function(d,A){b(this,"WARN: ","warn",d,A,"color:#26A110;",false,g.LEVEL_WARN)};g.prototype.ERROR=function(d,A){b(this,"ERROR: ","error",d,A,"color:red;",false,
g.LEVEL_ERROR)};g.setConsole(w.global().console);g.setLevelFromCookie()})();(function(){function g(c){return u.addToArrayIfNotExist(u.ANON_VARS,c)}function b(c){return c.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function w(c,k){var t=y.length;for(var E=0;E<t;E++)if(c===y[E][0])return y[E][1];y[y.length]=[c,k];return false}function q(c,k,t,E,I){var L=false;var Q=false;var S=false;var T=false;var U=false;var fa=false;var X=false;if(k){U=!!k.all;L=U||k.nodes;T=U||k.win;Q=U;X=!!k.emptyForMaxDeep;
S=k.noFunctions&&!U;if(k.noOwn!==undefined)Q=!!k.noOwn;if(k.noFunctions!==undefined)S=!!k.noFunctions;if(k.win!==undefined)T=!!k.win;if(k.nodes!==undefined)L=!!k.nodes;fa=!!k.copyReference}if(t!==undefined&&!t){if(X)return;return c}else if(t!==undefined)t--;if(!c||!(c instanceof Object))return c;if(!L){try{if(c instanceof Node)return c}catch(ka){if(c instanceof ActiveXObject&&c.nodeType!==undefined)return c}if(c===document)return c}if(!T)if(c===n)return c;var W=c instanceof Array?[]:{};if(c instanceof
Date)W=new Date(c);if(!S&&c instanceof Function){var K=String(c).replace(/\s+/g,"");if(K.indexOf("{[nativecode]}")+14===K.length)W=function(){return c.apply(I||this,arguments)};else W=function(){return c.apply(this,arguments)}}if(E===undefined){y=[];E=0}var G=w(c,W);if(G)return G;var O;if(W instanceof Array)for(O=0;O<c.length;O++)if(c[O]===c[O])W[W.length]=q(c[O],k,t,E+1,c);else W[W.length]=c[O];else{O=0;for(var ca in c){if(Q||c.hasOwnProperty(ca))if(c[ca]===c[ca])W[ca]=q(c[ca],k,t,E+1,c);else W[ca]=
c[ca];O++}}if(k.proto)W.prototype=q(c.prototype,k,t,E+1,c);if(fa)W.___copy_ref=c;return W}function z(c,k){for(var t=0;t<k&&t<C.length;t++)if(c===C[t])return true;return false}function h(c,k,t,E,I,L,Q,S){t=t||{};if(t.hasOwn===undefined)t.hasOwn=true;if(t.objectsOnly&&!(c instanceof Object))return;if(S!==undefined&&!S)return;else if(S!==undefined)S--;if(!t||!t.nodes)try{if(c instanceof Node)return}catch(K){if(c instanceof ActiveXObject&&c.nodeType!==undefined)return}if(c===n)return;if(E===undefined){C=
[];E=0}if(z(c,E))return;C[E]=c;I=I||c;if(I&&L&&I[L]!==I[L])return;var T=k(c,I,L,Q);if(T)return;var U=0;var fa="";for(var X in c){if(!t.hasOwn||c.hasOwnProperty(X))try{var W=c[X];if(t.track)fa=Q?Q+"."+X:X;h(W,k,t,E+1,I,X,fa,S)}catch(K){}U++}}var p=B.Define;var e=B.Cookie;var u=function(){};var n=p.global();p.clazz("qubit.opentag.Utils",u);u.global=p.global;u.namespace=p.namespace;u.clazz=p.clazz;u.getObjectUsingPath=function(c,k){k=k||n;var t=c.split(".");for(var E=0;E<t.length;E++)if(k&&t[E])k=k[t[E]];
return k};u.getParentObject=function(c){var k=c.lastIndexOf(".");var t=c.substring(0,k);return u.getObjectUsingPath(t)};u.variableExists=function(c){return c!==undefined&&c!==null};u.ANON_VARS=[];u.getAnonymousAcessor=function(c){var k=u.indexInArray(c,u.ANON_VARS);if(k===-1)k=g(c);return"qubit.opentag.Utils.ANON_VARS["+k+"]"};u.replaceAll=function(c,k,t){return c.replace(new RegExp(b(k),"g"),t)};u.secureText=function(c){if(typeof c!=="string")c+="";c=c.replace(/</g,"\x26lt;");c=c.replace(/>/g,"\x26gt;");
return c};u.getUrl=function(){return document.location.href};u.getQueryParam=function(c){var k;var t;var E;var I;var L;var Q;var S;I=u.getUrl();if(I.indexOf("?")>0){Q=I.substring(I.indexOf("?")+1).split("\x26");for(k=0,t=Q.length;k<t;k+=1){L=Q[k];if(L.indexOf("\x3d")>0){S=L.split("\x3d");if(S.length===2&&S[0]===c)return S[1]}}}return null};u.getElementValue=function(c){var k=document.getElementById(c);if(k)return k.textContent||k.innerText;return null};var y=[];u.objectCopy=function(c,k){k=k||{};
var t=q(c,k,k.maxDeep);y=[];return t};var C=[];u.traverse=function(c,k,t){var E;h(c,k,t,E,E,E,E,t.maxDeep)};u.prepareQuotedString=function(c){if(typeof c==="string")return'"'+c.replace(/\"/g,'\\"')+'"';else return c};u.expressionToFunction=function(c,k){k=k||"";var t="function ("+k+") {"+c+"}";return u.gevalAndReturn(t).result};u.defineWrappedClass=function(c,k,t,E,I){var L=function(){if(I)return I.apply(this,arguments);else return k.apply(this,arguments)};p.clazz(c,L,k,E);for(var Q in t)if(t.hasOwnProperty(Q)&&
Q!=="CONSTRUCTOR")L.prototype[Q]=t[Q];return L};u.copyAandAddFromB=function(c,k,t){t=t||8;var E=this.objectCopy(c,{maxDeep:t});for(var I in k)if(k.hasOwnProperty(I))E[I]=k[I];return E};u.keys=function(c){if(c instanceof Object){if(Object.keys)return Object.keys(c);var k=[];for(var t in c)if(c.hasOwnProperty(t))k[k.length]=t;return k}else throw"keys() called on non-object!";};u.getSrcElement=function(c){var k;c=c||window.event;if(c.srcElement)k=c.srcElement;else if(c.target)k=c.target;return k};u.addToArrayIfNotExist=
function(c,k,t){var E=0;for(var I=false;E<c.length;E+=1){var L=t&&t(c[E],k);if(L||c[E]===k){I=true;break}}if(!I){c[c.length]=k;E=-1}return E};u.indexInArray=function(c,k){for(var t=0;t<c.length;t++)if(c[t]===k)return t;return-1};u.existsInArray=function(c,k){for(var t=0;t<c.length;t++)if(c[t]===k)return true;return false};u.removeFromArray=function(c,k){var t=0;for(var E=0;t<c.length;)if(c[t]===k){c.splice(t,1);E++}else t++;return E};u.addClass=function(c,k){var t;try{c.classList.add(k)}catch(E){if(c.className===
null){c.className=k;return}t=c.className.split(" ");u.addToArrayIfNotExist(t,k);c.className=t.join(" ")}};u.removeClass=function(c,k){var t;try{c.classList.remove(k)}catch(E){if(c.className===null){c.className="";return}t=c.className.split(" ");u.removeFromArray(t,k);c.className=t.join(" ")}};var d="try{this.qubitopentagutilsgevalandreturn__var_test__\x3d(";var A=");}catch(ex){"+"this.qubitopentagutilsgevalandreturn__var_test__error \x3d ex;}";u.gevalAndReturn=function(c){var k=J;k.qubitopentagutilsgevalandreturn__var_test__=
undefined;k.qubitopentagutilsgevalandreturn__var_test__error=undefined;c=d+c+A;u.geval(c);var t=k.qubitopentagutilsgevalandreturn__var_test__;var E=k.qubitopentagutilsgevalandreturn__var_test__error;try{k.qubitopentagutilsgevalandreturn__var_test__=Z;k.qubitopentagutilsgevalandreturn__var_test__error=Z;delete k.qubitopentagutilsgevalandreturn__var_test__;delete k.qubitopentagutilsgevalandreturn__var_test__error}catch(I){}return{result:t,error:E}};u.trim=function(c){try{return String(c).trim()}catch(k){return String(c).replace(/^\s+|\s+$/g,
"")}};u.setIfUnset=function(c,k){if(c&&k)for(var t in k)if(k.hasOwnProperty(t)&&!c.hasOwnProperty(t))c[t]=k[t]};var D=Math.floor(Math.random()*1E12);u.UUID=function(){if(!n.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__)n.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__=(new Date).valueOf();return D+"."+ ++n.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__};u.overrideFromLeftToRight=function(c,k){if(c&&k)for(var t in k)if(k.hasOwnProperty(t))c[t]=k[t];return c};u.geval=function(c){if(window&&window.execScript)return window.execScript(c===
""?" ":c);else return function(){return n["eval"].call(n,c)}()};var F=[];u.bodyAvailable=function(c){var k=!!document.body;if(k){if(F){for(var t=0;t<F.length;t++)try{F[t]()}catch(E){}F=false}c()}else F.push(c)};u.rmCookiesMatching=function(c){var k=e.getAll();for(var t=0;t<k.length;t++){var E=k[t][0];if(E.match(c)===0)e.rm(E)}};var r=[];var m=false;var l=false;u.bodyReady=function(c){if(l){if(c)c();return true}m=m||!!(document.body&&document.readyState==="complete");if(m){l=true;for(var k=0;k<r.length;k++)try{r[k]()}catch(t){}if(c)c()}else if(c)r.push(c);
return m};var f=n.onload;n.onload=function(c){try{u.bodyReady()}catch(t){try{window.qubit.opentag.Utils.bodyReady()}catch(E){}}var k=false;try{k=f}catch(t){}if(k)k(c)};(function(){var c;var k=false;var t=1;var E;var I;var L;var Q;I=function(T){var U;if(T===true)t-=1;if(!t||T!==true&&!k){if(!document.body)return setTimeout(I,1);k=true;if(T!==true){t-=1;if(t>0)return}for(;E.length>0;){U=E.shift();U()}}};Q=function(){if(k)return;try{document.documentElement.doScroll("left")}catch(T){setTimeout(Q,1);
return}I()};L=function(){if(E)return;E=[];if(document.readyState==="complete")return setTimeout(I,1);if(document.addEventListener){document.addEventListener("DOMContentLoaded",c,false);window.addEventListener("load",I,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",c);window.attachEvent("onload",I);var T=false;try{T=window.frameElement===null||window.frameElement===undefined}catch(U){}if(document.documentElement.doScroll&&T)Q()}};var S=function(T){L();if(k)setTimeout(T,
1);else E.push(T)};if(document.addEventListener)c=function(){document.removeEventListener("DOMContentLoaded",c,false);I()};else if(document.attachEvent)c=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",c);I()}};S(function(){m=true;u.bodyReady()})})()})();var V={};(function(){function g(y){return y<10?"0"+y:y}function b(y){h.lastIndex=0;return h.test(y)?'"'+y.replace(h,function(C){var d=u[C];return typeof d==="string"?d:"\\u"+("0000"+C.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+y+'"'}function w(y){return isFinite(y.valueOf())?y.getUTCFullYear()+"-"+g(y.getUTCMonth()+1)+"-"+g(y.getUTCDate())+"T"+g(y.getUTCHours())+":"+g(y.getUTCMinutes())+":"+g(y.getUTCSeconds())+"Z":null}function q(y,C){var d;var A;var D;var F;var r=p;var m;var l=C[y];if(l instanceof Date)l=w(l);else if(l instanceof String||l instanceof Number||l instanceof Boolean)l=l.valueOf();if(typeof n==="function")l=n.call(C,y,l);switch(typeof l){case "string":return b(l);case "number":return isFinite(l)?String(l):
"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";p+=e;m=[];if(Object.prototype.toString.apply(l)==="[object Array]"){F=l.length;for(d=0;d<F;d+=1)try{m[d]=q(d,l)||"null"}catch(f){m[d]='{"stack_exceeded": null}'}D=m.length===0?"[]":p?"[\n"+p+m.join(",\n"+p)+"\n"+r+"]":"["+m.join(",")+"]";p=r;return D}if(n&&typeof n==="object"){F=n.length;for(d=0;d<F;d+=1)if(typeof n[d]==="string"){A=n[d];try{D=q(A,l)}catch(f){D='{"stack_exceeded": null}'}if(D)m.push(b(A)+(p?": ":":")+
D)}}else for(A in l)if(Object.prototype.hasOwnProperty.call(l,A)){try{D=q(A,l)}catch(f){D='{"stack_exceeded": null}'}if(D)m.push(b(A)+(p?": ":":")+D)}D=m.length===0?"{}":p?"{\n"+p+m.join(",\n"+p)+"\n"+r+"}":"{"+m.join(",")+"}";p=r;return D}}var z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var p;var e;var u=
{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var n;if(typeof V.stringify!=="function")V.stringify=function(y,C,d){var A;p="";e="";if(typeof d==="number")for(A=0;A<d;A+=1)e+=" ";else if(typeof d==="string")e=d;n=C;if(C&&typeof C!=="function"&&(typeof C!=="object"||typeof C.length!=="number"))throw new Error("JSON.stringify");return q("",{"":y})};if(typeof V.parse!=="function")V.parse=function(y,C){function d(D,F){var r;var m;var l=D[F];if(l&&typeof l==="object")for(r in l)if(Object.prototype.hasOwnProperty.call(l,
r)){m=d(l,r);if(m!==undefined)l[r]=m;else delete l[r]}return C.call(D,F,l)}var A;y=String(y);z.lastIndex=0;if(z.test(y))y=y.replace(z,function(D){return"\\u"+("0000"+D.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(y.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){A=eval("("+y+")");return typeof C==="function"?d({"":A},""):A}throw new SyntaxError("JSON.parse");}})();
var P={};P.html=P.html||{};(function(){function g(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}var b={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null};var w;var q="universal_variable";var z=0;var h=500;var p;b._isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"};b._targetChanged=function(e,u,n){var y;var C;var d;if(n===null)if(u==="null")return false;else return true;else if(n===undefined)if(u===n)return false;else return true;else{y=V.parse(u);
C=b._getNested(y,e);d=b._getNested(n,e);return!b._jsonIsEqual(C,d)}};b._processCallbacks=function(){var e;if(b.early_callbacks&&b.early_callbacks.length>0){for(e=0;e<b.early_callbacks.length;e+=1)b.push(b.early_callbacks[e]);b.early_callbacks=null}};b._keyStringToArr=function(e){e=g(e);if(e==="")return[];else{e=e.replace(/\[(\w+)\]/g,".$1");e=e.replace(/^\./,"");return e.split(".")}};b._getNested=function(e,u){var n=b._keyStringToArr(u);for(var y;n.length>0;){y=n.shift();if(e.hasOwnProperty(y))e=
e[y];else return}return e};b._jsonIsEqual=function(e,u){if(typeof e!=="string")e=V.stringify(e,b._stripEvents);if(typeof u!=="string")u=V.stringify(u,b._stripEvents);return e===u};b._stripEvents=function(e,u){if(e!=="events")return u;else return undefined};b._on=function(e,u){var n;var y;n=e.split(":");e=n[0];y=n[1];b.callbacks[e]=b.callbacks[e]||[];if(y)b.callbacks[e].push({keyString:y,func:u});else b.callbacks[e].push({func:u})};b._trigger=function(e,u){var n;var y;if(b.callbacks[e])for(n=0;n<b.callbacks[e].length;n+=
1)if(typeof b.callbacks[e][n].func==="function"){y=b.callbacks[e][n].keyString;if(y){if(e==="change"&&b._targetChanged(y,b.currentUV,w))b.callbacks[e][n].func(u)}else b.callbacks[e][n].func(u)}};b._eventsPush=function(e){var u;var n;w.events[w.events.length]=e;e.time=e.time||(new Date).getTime();if(b.callbacks.event){u=0;n=b.callbacks.event.length;for(u;u<n;u+=1)b.callbacks.event[u].func(e)}e.has_fired=true};b._getUnfiredEvents=function(){var e=0;for(e=0;e<w.events.length;e+=1)if(!w.events[e].has_fired){b.unfired_events.push(w.events.splice(e,
1)[0]);e-=1}};b._fireEvents=function(){for(;b.unfired_events.length>0;)w.events.push(b.unfired_events.shift())};b._resetEventsPush=function(){w.events=w.events||[];if(w.events.push.toString().indexOf("[native code]")!==-1){w.events.push=b._eventsPush;b._getUnfiredEvents();b._fireEvents()}};b._checkForChanges=function(){if(b.callbacks.change&&b.callbacks.change.length>0)if(!b._jsonIsEqual(b.currentUV,w)){b._trigger("change",w);b.currentUV=V.stringify(w,b._stripEvents)}};b._setUVLocation=function(e){q=
e;b._initUV()};b._initUV=function(){window[q]=window[q]||{events:[]};w=window[q];if(!w.events)w.events=[]};b.push=function(e){if(!b._isArray(e))return;if(e[0]==="on")b._on(e[1],e[2]);else if(e[0]==="trigger"&&e[1])b._trigger(e[1])};b.init=function(e,u){if(u)q=u;b._initUV();if(!window.uv_listener||b._isArray(window.uv_listener)){b.early_callbacks=window.uv_listener||null;window.uv_listener=b;if(!e)b.start()}else if(u)window.uv_listener._setUVLocation(q)};b.start=function(){b.currentUV=V.stringify(w,
b._stripEvents);p=setInterval(function(){b._initUV();b._resetEventsPush();b._checkForChanges()},h);b._processCallbacks()};P.html.UVListener=b})();(function(){function g(w){if(w){this._rate=w.rate||10;this._smallestRate=-1;if(w.start)this.startPooling();this.config=w}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}B.Define.clazz("qubit.opentag.Timer",g);g.prototype.timers=[];g.prototype.startPooling=function(w){if(w&&this.config.dynamic)if(this._smallestRate<0||this._smallestRate>
w)this._smallestRate=Math.min(Math.floor(w/2),1500);if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};g.prototype._pool=function(){this.maxFrequent(function(){var q="";if(this.config&&this.config.name)q="["+this.config.name+"]"},5E3,this._lck_obj);this.callTimers();if(this.timers.length!==0){var w=this._smallestRate>this._rate?this._smallestRate:this._rate;setTimeout(this._binded_pool,w)}else{this.started=false;this._smallestRate=-1}};g.prototype.callTimers=function(){this.lastCalled=
(new Date).valueOf();for(var w=0;w<this.timers.length;w++){var q=this.timers[w];var z=(new Date).valueOf();if(z>=q.time){try{q.execute()}catch(h){}this.timers.splice(w,1);--w}}};g.prototype.cancellAll=function(){this.timers=[]};g.prototype.setRate=function(w){this._rate=w};g.prototype.maxFrequent=function(w,q,z){if(!z){w.__maxFrequent__timer_opentag_qubit_=w.__maxFrequent__timer_opentag_qubit_||{};z=w.__maxFrequent__timer_opentag_qubit_}var h=z.____last__timed__max__frequent____;if(!h||(new Date).valueOf()-
h>q){h=(new Date).valueOf();z.____last__timed__max__frequent____=h;w()}};g.prototype.runIfNotScheduled=function(w,q,z){z=z||w;if(z.__lastRun__&&(new Date).valueOf()<q+z.__lastRun__)return this.schedule(w,q,z);else{z.__lastRun__=(new Date).valueOf();w();return true}};g.prototype.schedule=function(w,q,z){if(z.___scheduled___)return false;else{z.___scheduled___=(new Date).valueOf();this.setTimeout(function(){z.___scheduled___=false;z.__lastRun__=(new Date).valueOf();w()},q);return true}};var b=1;g.prototype.setTimeout=
function(w,q){var z={id:b++,time:(new Date).valueOf()+ +q,execute:w};this.timers.push(z);this.startPooling(q);return z};g.prototype.setInterval=function(w,q){var z=setInterval(w,q);this.inervals.push(z);return z}})();(function(){B.Define.namespace("qubit.opentag.Timed",new B.opentag.Timer({rate:37,dynamic:true}));var g=B.opentag.Timed;g.tillTrue=function(b,w,q){var z=function(){if(!b())g.setTimeout(z,q||33);else w()};z()}})();P.html.fileLoader={};P.html.fileLoader.load=function(g,b,w,q,z,h){var p;
var e;var u;var n;var y;y=false;n=function(C){return function(){if(!y){y=true;if(C&&!u)u={url:document.location.href};w(g,u,C)}}};try{if(b)e=b(g)}catch(C){e=false;w(g,"Exception loading pre",true)}finally{if(e!==false){p=P.html.fileLoader.createScriptEl(g,z,false,h);if(w){p.onload=n(false);p.onerror=n(true);p.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded")setTimeout(function(){n(false)()},1)}}if(!q)q=window.document.getElementsByTagName("head")[0];q.appendChild(p)}}};
P.html.fileLoader.createScriptEl=function(g,b,w,q){var z;var h=document.createElement("script");h.type="text/javascript";h.src=P.html.fileLoader.tidyUrl(g)+(w?"?"+(new Date).getTime():"");if(b!==false){h.async="true";h.defer="true"}else{h.async="false";if(h.async!==false)h.async=false;h.defer="false";if(h.defer!==false)h.defer=false}for(z in q)if(q.hasOwnProperty(z))h.setAttribute(z,q[z]);return h};P.html.fileLoader.tidyUrl=function(g){if(g.substring(0,5)==="http:")return g;if(g.substring(0,6)===
"https:")return g;return"//"+g};(function(){function g(q){this.calls={}}var b=B.Define;var w=B.opentag.Utils;g.prototype.on=function(q,z){if(!this.calls[q])this.calls[q]=[];return w.addToArrayIfNotExist(this.calls[q],z)};g.prototype.call=function(q,z){var h=this.calls[q];if(h)for(var p=0;p<h.length;p++)try{h[p](z)}catch(e){}};g.prototype.remove=function(q,z){if(this.calls[q])return w.removeFromArray(this.calls[q],z);return null};g.prototype.removeAll=function(q){var z=0;for(var h in this.calls)if(this.calls.hasOwnProperty(h))z+=
w.removeFromArray(this.calls[h],q);return z};g.prototype.clear=function(){this.calls={}};b.clazz("qubit.Events",g)})();(function(){function g(h){this.log=new B.opentag.Log("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.config={order:0,include:true,name:"Filter-"+w++,script:undefined,session:undefined,restartable:true};this.runtimeId=b.UUID();this.session=null;if(h){for(var p in h)if(h.hasOwnProperty(p))this.config[p]=h[p];if(h.session)this.setSession(h.session);
this.register(this)}this.events=new B.Events({})}var b=B.opentag.Utils;var w=0;var q=[];B.Define.clazz("qubit.opentag.filter.BaseFilter",g);g.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};var z="restart";g.prototype.EVENT_TYPES={RESTART_EVENT:z};g.prototype.prepareForRestart=function(){if(this.config.restartable){this.events.call(z,this);this.reset()}};g.prototype.onRestart=function(h){this.events.on(z,h)};g.prototype.reset=function(){this.runtimeId=b.UUID();this.enable()};g.prototype.disable=function(){this.config.disabled=
true};g.prototype.enable=function(){this.config.disabled=false};g.prototype.match=function(){return true};g.prototype.setSession=function(h){this.session=h};g.prototype.getSession=function(){return this.session};g.prototype.getState=function(){var h=g.state.PASS;if(this.config.disabled)return g.state.DISABLED;if(this.config.script)h=this.config.script.call(this,h);if(isNaN(+h))h=g.state.FAIL;this.lastState=+h;return h};g.getFilters=function(){return q};g.prototype.register=function(){g.register(this)};
g.register=function(h){b.addToArrayIfNotExist(q,h)}})();(function(){var g=B.Define;var b={CONTAINS:"CONTAINS",MATCHES_EXACTLY:"MATCHES_EXACTLY",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH",REGULAR_EXPRESSION:"REGULAR_EXPRESSION",ALL_URLS:"ALL_URLS"};g.namespace("qubit.opentag.filter.pattern.PatternType",b)})();(function(){function g(h){this._lockObject={};var p={patternType:z.CONTAINS,pattern:""};if(h)for(var e in h)if(h.hasOwnProperty(e))p[e]=h[e];g.SUPER.call(this,p)}var b=B.opentag.Utils;var w=
B.opentag.filter.BaseFilter;var q=B.opentag.Timed;var z=B.opentag.filter.pattern.PatternType;B.Define.clazz("qubit.opentag.filter.URLFilter",g,w);g.prototype.PATTERNS=z;g.prototype.getURL=function(h){return h||b.getUrl()};g.prototype.match=function(h){h=this.getURL(h);var p=true;var e=this.config.pattern;switch(this.config.patternType){case z.CONTAINS:p=h.toLowerCase().indexOf(e.toLowerCase())>=0;break;case z.MATCHES_EXACTLY:p=h.toLowerCase()===this.config.pattern.toLowerCase();break;case z.STARTS_WITH:p=
h.toLowerCase().indexOf(e.toLowerCase())===0;break;case z.ENDS_WITH:p=h.lastIndexOf(e.toLowerCase())+e.length===h.length;break;case z.REGULAR_EXPRESSION:p=(new RegExp(e)).test(h);break;case z.ALL_URLS:p=true;break}return p}})();(function(){function g(h){var p={};if(h){for(var e in h)if(h.hasOwnProperty(e)){if(e==="customStarter"&&h[e])this.customStarter=h[e];else if(e==="customScript"&&h[e])this.customScript=h[e];p[e]=h[e]}this.uid="f"+z++}this.tagsToRun=[];g.SUPER.call(this,p)}var b=B.opentag.filter.BaseFilter;
var w=B.opentag.filter.URLFilter;var q=B.opentag.Utils;var z=0;B.Define.clazz("qubit.opentag.filter.Filter",g,w);g.prototype.customStarter=function(h,p,e){p(false)};g.prototype.isSession=function(){if(this.config.sessionDisabled)return false;if(this.customStarter===null&&this.customScript===null)return false;return true};g.prototype.customScript=function(h){return true};g.prototype.match=function(h){var p=true;try{if(this.customScript){if(this._matchState===undefined)this._matchState=!!this.customScript(this.getSession());
p=this._matchState}}catch(e){p=false}return p&&g.SUPER.prototype.match.call(this,h)};g.prototype.runTag=function(h){q.addToArrayIfNotExist(this.tagsToRun,h);if(!this.starterExecuted){if(!this._starterWasRun){this._starterWasRun=true;var p=this.runtimeId;var e=function(u){if(p!==this.runtimeId)return;this.reRun=u;this.starterExecuted=(new Date).valueOf();this._processQueuedTagsToRun()}.bind(this);if(this.customStarter)this.customStarter(this.getSession(),e,h);else g.prototype.customStarter.call(this,
this.getSession(),e,h)}}else this._triggerTag(h)};g.prototype._processQueuedTagsToRun=function(){for(var h=0;h<this.tagsToRun.length;h++){var p=this.tagsToRun[h];this._triggerTag(p)}};g.prototype._triggerTag=function(h){if(this.reRun===true)h.run();else h.runOnce()};g.prototype.getState=function(h){if(h)this.setSession(h);var p=g.SUPER.prototype.getState.call(this);if(p===b.state.DISABLED)return b.state.DISABLED;if(p===b.state.PASS)if(this.isSession())p=b.state.SESSION;if(this.config.script)p=this.config.script.call(this,
p,this.getSession());this.lastState=p;return p};g.prototype.reset=function(){g.SUPER.prototype.reset.call(this);this._matchState=undefined;this._starterWasRun=undefined;this.starterExecuted=undefined;this.tagsToRun=[];this.reRun=undefined}})();P.html.GlobalEval={};P.html.GlobalEval.globalEval=function(g){if(window.execScript)window.execScript(g===""?" ":g);else{var b=function(){window["eval"].call(window,g)};b()}};P.html.HtmlInjector={};P.html.HtmlInjector.inject=function(g,b,w,q,z){var h;var p;var e;
var u;var n;var y;var C;if(w.toLowerCase().indexOf("\x3cscript")>=0){e=document.createElement("div");e.innerHTML="a"+w;u=e.getElementsByTagName("script");n=[];for(h=0,p=u.length;h<p;h+=1)n.push(u[h]);C=[];for(h=0,p=n.length;h<p;h+=1){y=n[h];var d={attributes:P.html.HtmlInjector.getAttributes(y)};if(y.src)d.src=y.src;else d.script=y.innerHTML;C.push(d);y.parentNode.removeChild(y)}if(e.innerHTML)if(e.innerHTML.length>0)e.innerHTML=e.innerHTML.substring(1);P.html.HtmlInjector.doInject(g,b,e);P.html.HtmlInjector.loadScripts(C,
0,q,g)}else{e=document.createElement("div");e.innerHTML=w;P.html.HtmlInjector.doInject(g,b,e);if(q)q()}};P.html.HtmlInjector.doInject=function(g,b,w){if(w.childNodes.length>0){for(var q=document.createDocumentFragment();w.childNodes.length>0;)q.appendChild(w.removeChild(w.childNodes[0]));if(b)P.html.HtmlInjector.injectAtStart(g,q);else P.html.HtmlInjector.injectAtEnd(g,q)}};P.html.HtmlInjector.injectAtStart=function(g,b){if(g.childNodes.length===0)g.appendChild(b);else g.insertBefore(b,g.childNodes[0])};
P.html.HtmlInjector.injectAtEnd=function(g,b,w){if(!w)w=1;if(g===document.body&&document.readyState!=="complete"&&w<50)setTimeout(function(){P.html.HtmlInjector.injectAtEnd(g,b,w+1)},100);else g.appendChild(b)};P.html.HtmlInjector.loadScripts=function(g,b,w,q){var z;var h;var p=false;for(z=g.length;b<z;b+=1){h=g[b];if(h.src){p=true;break}else P.html.GlobalEval.globalEval(h.script)}if(p)P.html.fileLoader.load(h.src,null,function(){P.html.HtmlInjector.loadScripts(g,b+1,w,q)},q,false,h.attributes);if(w&&
b===z)w()};P.html.HtmlInjector.getAttributes=function(g){var b;var w;var q;var z;var h;var p={};if(g){q=g.attributes;w=q.length;for(b=0;b<w;b++){z=q[b].value;h=q[b].name.toLowerCase();if(z!==""&&(h==="id"||h==="class"||h==="charset"||h.substr(0,5)==="data-"))p[h]=z}return p}};(function(){function g(){C=C||{write:document.write,writeln:document.writeln}}function b(){document.write=C.write;document.writeln=C.writeln;C=null}var w=B.opentag.filter.BaseFilter;var q=B.opentag.Utils;var z=P.html.HtmlInjector;
var h=P.html.fileLoader;var p=B.opentag.filter.Filter;var e=function(){};B.Define.clazz("qubit.opentag.TagsUtils",e);var u=false;e.bodyLoaded=function(){if(u)return true;u=!!(document.body&&document.readyState!=="loading");return u};e.bodyAvailable=function(f){return!!document.body};var n={};var y={SUCCESS:"success",FAIL:"failure",INIT:"not started"};e.loadScript=function(f){var c=f.url;var k=function(I,L,Q){n[c].error=L;if(Q){n[c].state=y.FAIL;f.onerror()}else{n[c].state=y.SUCCESS;f.onsuccess()}};
if(n[c]){if(f.noMultipleLoad)return k(c,n[c].error,n[c].state===y.FAIL);n[c].count+=1}else n[c]={count:1,state:null};var t=!f.async;var E=e.bodyLoaded();if(t&&E);t=t&&!E;if(t)e.writeScriptURL(c,function(I,L){k(c,L,!I)});else h.load(c,false,k,f.node,f.async)};var C=null;e.redirectDocumentWritesToArray=function(f,c){var k=f;g();document.write=function(t){k.push(t)};document.writeln=function(t){k.push(t)}};e.flushDocWritesArray=function(f,c,k,t,E){var I=c;if(I&&f){var L=f.splice(0,f.length);try{e.injectHTML(I,
k,L.join("\n"),E||R);return true}catch(S){}}else{var Q="Flushing location not found!";return false}if(E)E();return true};e.unlockDocumentWrites=function(){if(C)b()};var d=e.prototype.PACKAGE_NAME+".TagsUtils._writeScriptURL_callbacks";var A={};B.Define.namespace(d,A,J,true);var D=0;var F=(new Date).valueOf();e.writeScriptURL=function(f,c){var k="_"+F+"_"+D++;var t=d+"."+k;var E=false;A[k]=function(U){if(E)return;E=true;if(U)c(false,"error while loading script "+f);else c(true);A[k]=undefined;delete e.writeScriptURL.callbacks[k]};
var I='if(this.readyState \x3d\x3d\x3d "loaded" || '+'this.readyState \x3d\x3d\x3d "complete"){ try {'+t+"(true)"+"} catch (ex) {}}";var L="try{"+t+"(false)}catch(ex){}";var Q="try{"+t+"(true)}catch(ex){}";var S="scr";var T;f=h.tidyUrl(f);T="\x3c"+S+"ipt onload\x3d'"+L+"'  onerror\x3d'"+Q+"' onreadystatechange\x3d'"+I+"' type\x3d'text/javascript' "+" src\x3d'"+f+"'\x3e"+"\x3c/"+S+"ipt\x3e";if(C){b();document.write(T);g()}else document.write(T);q.bodyReady(function(){if(!E){E=true;c(true)}})};e.writeScriptURL.callbacks=
{};var r=w.state.SESSION;var m=w.state.PASS;var l=w.state.FAIL;e.filtersState=function(f,c,k,t){f=f.sort(function(ca,ka){try{var aa=ka.config.order;var ia=ca.config.order;if(isNaN(-ia))ia=0;if(isNaN(-aa))aa=0;return aa-ia}catch(la){return 0}});var E=m;if(!f||f.length===0)return E;var I=null;var L=false;var Q=false;var S=0;var T;var U;var fa=[];var X;var W;for(var K=0;K<f.length;K++){X=f[K];X.setSession(c);if(X.match()){T=X.getState();if(T>0){if(S===0||S>T)S=T}else if(T===w.state.DISABLED)L=true;else if(T===
r){Q=true;I=X;U=X;fa.push(X)}else I=X}else W=X}var G=false;if(I===null){G=true;if(!L)E=l;else E=m}else if(I.config.include)E=T;else E=T===m?l:m;if(S>0&&(E===m||G))E=S;if(E===r||E===m&&Q){if(!U.config.include)return l;E=r;if(U instanceof p&&U.isSession())if(t)for(var O=0;O<fa.length;O++)try{fa[O].runTag(k)}catch(ca){}}if(k.config.dedupe&&E===m)if(W&&W instanceof p&&W.isSession()){k.sendDedupePing=true;E=l}return E};e.injectHTML=function(f,c,k,t){return z.inject(f,!c?1:0,k,t||R)};e.getHTMLLocationForTag=
function(f){var c;var k=f.prepareLocationObject(f.config.locationObject);switch(k){case "HEAD":c=document.getElementsByTagName("head")[0];break;case "BODY":c=document.body;break;default:if(k)c=document.getElementById(k);else c=document.body}return c}})();(function(){function g(e){this.config={};this.handlers=[];this.parameters=null;this.callHandlersOnRead=false;if(e){this.uniqueId="BV"+z++;g.ALL_VARIABLES[this.uniqueId]=this;for(var u in e)if(e.hasOwnProperty(u)){this.config[u]=e[u];if(u==="value")this.value=
e.value}var n=g.register(this);if(n&&n!==this);return n}}function b(){if(p)return false;for(var e=0;e<h.length;e++)try{var u=h[e];u.getValue()}catch(n){}q.setTimeout(b,g.CHECK_POLL_RATE);return true}var w=B.opentag.Utils;var q=B.opentag.Timed;var z=0;B.Define.clazz("qubit.opentag.pagevariable.BaseVariable",g);g.ALL_VARIABLES={};var h=[];g.OBSERVED_VARIABLES=h;g.pageVariables=[];g.register=function(e){if(e instanceof g){for(var u=0;u<g.pageVariables.length;u++){var n=g.pageVariables[u];if(e===n)return n}g.pageVariables.push(e);
return e}return null};g.prototype.getValue=function(){this._updateCurrentValue(this.value);return this.currentValue};g.prototype._updateCurrentValue=function(e){if(!this.valuesAreEqual(e,this.currentValue)){this.oldValue=this.currentValue;this.currentValue=e;if(!p||this.callHandlersOnRead)this._handleValueChanged();return true}return false};g.prototype.getDefaultValue=function(){return this.defaultValue};g.prototype.setDefaultValue=function(e){this.defaultValue=e};g.prototype.exists=function(e){var u=
w.variableExists(this.getValue());if(e)u=u||w.variableExists(this.getDefaultValue());return u};g.prototype.getRelativeValue=function(e,u){var n=this.getValue();if(!w.variableExists(n))n=u;var y;if(e&&!w.variableExists(n)){y=this.getDefaultValue();if(w.variableExists(y))n=y}return n};g.prototype.replaceToken=function(e,u,n,y){var C=this.exists();var d=C?this.getValue():n;e="\\$\\{"+e+"\\}";if(y||d instanceof Array){var A;if(C)A=this.getValueAccessorString();else A=w.getAnonymousAcessor(d);return u.replace(new RegExp(e,
"g"),A)}else return u.replace(new RegExp(e,"g"),d)};g.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};g.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"};g.prototype.onValueChanged=function(e,u){if(w.addToArrayIfNotExist(this.handlers,e)===-1);if(u!==false)this.startObservingForChanges()};g.prototype.deatchOnValueChanged=function(e){if(w.removeFromArray(this.handlers,e)>0);};g.prototype._handleValueChanged=
function(){var e={oldValue:this.oldValue,newValue:this.currentValue,variable:this};for(var u=0;u<this.handlers.length;u++)try{this.handlers[u](e)}catch(n){}};var p=true;g.CHECK_POLL_RATE=333;g.prototype.startObservingForChanges=function(){this.addToObservedVariables();if(p){p=false;b()}};g.prototype.stopObservingForChanges=function(){this.removeFromObservedVariables();if(h.length===0)p=true};g.prototype.addToObservedVariables=function(){w.addToArrayIfNotExist(h,this)};g.prototype.removeFromObservedVariables=
function(){w.removeFromArray(h,this)};g.prototype.getObservedVariables=function(){return h};g.prototype.valuesAreEqual=function(e,u){return e===u}})();(function(){function g(q){this._lockExprObject={};g.SUPER.apply(this,arguments)}var b=B.opentag.Utils;var w=B.opentag.Timed;B.Define.clazz("qubit.opentag.pagevariable.Expression",g,B.opentag.pagevariable.BaseVariable);g.prototype.getValue=function(){var q;var z;var h=this.value;try{if(h&&h.indexOf("[#]")===-1){var p=b.gevalAndReturn(h);q=p.result;this.failMessage=
null;z=p.error}else q=g.parseUVArray(h)}catch(n){z=n}if(z){var e="could not read value of expression: \n"+h+"\nexact cause: "+z;if(this.failMessage!==e)this.failMessage=e;q=null}var u=this._updateCurrentValue(q);return q};g.parseUVArray=function(q){var z=q.split("[#]");var h=b.gevalAndReturn(z[0]).result;var p=[];var e=z[1];if(e.indexOf(".")===0)e=e.replace(".","");for(var u=0;u<h.length;u++){var n=b.getObjectUsingPath(e,h[u]);p.push(n)}return p};g.prototype.replaceToken=function(q,z,h,p){if(this.getValue()instanceof
Array)p=true;return g.SUPER.prototype.replaceToken.call(this,q,z,h,p)}})();(function(){function g(w){g.SUPER.apply(this,arguments)}var b=B.opentag.Utils;B.Define.clazz("qubit.opentag.pagevariable.DOMText",g,B.opentag.pagevariable.BaseVariable);g.prototype.getValue=function(){var w=b.getElementValue(this.value);this._updateCurrentValue(w);return w}})();(function(){function g(b){g.SUPER.apply(this,arguments);this._lockObject={}}B.Define.clazz("qubit.opentag.pagevariable.Cookie",g,B.opentag.pagevariable.BaseVariable);
g.prototype.getValue=function(){var b=B.Cookie.get(this.value);this._updateCurrentValue(b);return b}})();(function(){function g(w){g.SUPER.apply(this,arguments)}var b=B.opentag.Utils;B.Define.clazz("qubit.opentag.pagevariable.URLQuery",g,B.opentag.pagevariable.BaseVariable);g.prototype.getValue=function(){var w=b.getQueryParam(this.value);this._updateCurrentValue(w);return w}})();(function(){function g(b){g.SUPER.apply(this,arguments)}B.Define.clazz("qubit.opentag.pagevariable.UniversalVariable",
g,B.opentag.pagevariable.Expression)})();(function b(){function w(){function q(m){F.level=m}function z(m,l){F.info(m,"event emitted");l=y(l||{});l.meta=l.meta||{};l.meta.type=m;A.push(l);e();r.listeners=d(r.listeners,function(f){return!f.disposed})}function h(m,l,f){function c(){F.info("Replaying events");p(function(){n(r.events,function(I){if(t.disposed)return;if(!C(m,I.meta.type))return;l.call(f,I)})});return E}function k(){F.info("Disposing event handler");t.disposed=true;return E}F.info("Attaching event handler for",
m);var t={type:m,callback:l,disposed:false,context:f||window};r.listeners.push(t);var E={replay:c,dispose:k};return E}function p(m){F.info("Calling event handlers");D++;try{m()}catch(l){F.error("UV API Error",l.stack)}D--;e()}function e(){if(A.length===0)F.info("No more events to process");if(A.length>0&&D>0)F.info("Event will be processed later");if(A.length>0&&D===0){F.info("Processing event");var m=A.shift();r.events.push(m);p(function(){n(r.listeners,function(l){if(l.disposed)return;if(!C(l.type,
m.meta.type))return;try{l.callback.call(l.context,m)}catch(f){F.error("Error emitting UV event",f.stack)}})})}}function u(m,l,f){var c=r.on(m,function(){l.apply(f||window,arguments);c.dispose()});return c}function n(m,l){var f=m.length;for(var c=0;c<f;c++)l(m[c],c)}function y(m){var l={};for(var f in m)if(m.hasOwnProperty(f))l[f]=m[f];return l}function C(m,l){return typeof m==="string"?m===l:m.test(l)}function d(m,l){var f=m.length;var c=[];for(var k=0;k<f;k++)if(l(m[k]))c.push(m[k]);return c}var A=
[];var D=0;var F={info:function l(){if(F.level>q.INFO)return;if(console&&console.info)console.info.apply(console,arguments)},error:function f(){if(F.level>q.ERROR)return;if(console&&console.error)console.error.apply(console,arguments)}};q.ALL=0;q.INFO=1;q.ERROR=2;q.OFF=3;q(q.ERROR);var r={on:h,emit:z,once:u,events:[],listeners:[],logLevel:q};return r}if(typeof module==="object"&&module.exports)module.exports=w;else if(window&&window.uv===undefined)window.uv=w()})();var ea={};var da=[];var ba=false;
var Y=false;var ha=B.Define.global();var M={allEventsByType:ea,subscribe:function(b,w){if(Y){var q=x();q.on(b,w)}else da.push({on:[b,w]})},getEventHistory:function(b){return this.allEventsByType[b]},publish:function(b,w){if(Y){var q=x();q.emit(b,w)}else da.push({emit:[b,w]})},connect:function(){a()}};M.connect();B.Define.namespace("qubit.qprotocol.PubSub",M);(function(){function b(h){b.SUPER.apply(this,arguments)}var w=B.qprotocol.PubSub;var q=B.opentag.Utils;var z=":";B.Define.clazz("qubit.opentag.pagevariable.QProtocolVariable",
b,B.opentag.pagevariable.BaseVariable);b.prototype.init=function(){if(this.initialized)return false;else this.initialized=(new Date).valueOf();this.callHandlersOnRead=true;if(!this.handlerAttached){var h=this;var p=this.getValueAndPath(this.value);this.eventName=p[0];this.objectPath=p[1];this.updateValue();w.subscribe(this.eventName,function(e){h.updateValue(e)});this.handlerAttached=(new Date).valueOf()}};b.prototype.getValueAndPath=function(h){var p=h;var e;if(p){var u=h.indexOf(z);if(u!==-1){p=
h.substring(0,u);e=h.substring(u+1)}}return[p,e]};b.prototype.getValue=function(){this.init();return this.currentValue};b.prototype.getEventsHistory=function(){return w.getEventHistory(this.eventName)};b.prototype.updateValue=function(h){if(!h){var p=this.getEventsHistory();if(p)h=p.current}var e;var u=this.objectPath;if(h&&u)e=q.getObjectUsingPath(u,h);else e=h;this._updateCurrentValue(e);return e};b.prototype.startObservingForChanges=function(){};b.prototype.stopObservingForChanges=function(){}})();
(function(){function b(){}function w(m,l){var f=[];try{var c=m.parameters;if(c)for(var k=0;k<c.length;k++)if(m.getVariableForParameter(c[k])===l)f.push(c[k])}catch(t){}return f}var q=B.opentag.Utils;var z=B.opentag.TagsUtils;var h=B.opentag.Timed;var p=B.opentag.pagevariable.BaseVariable;var e=B.opentag.pagevariable.Expression;var u=B.opentag.pagevariable.UniversalVariable;var n=B.opentag.pagevariable.DOMText;var y=B.opentag.pagevariable.Cookie;var C=B.opentag.pagevariable.URLQuery;B.Define.clazz("qubit.opentag.TagHelper",
b);b.injectHTMLForLoader=function(m,l,f,c){var k=c!==undefined?c:m.getHtml();if(k){var t=m.config.locationPlaceHolder==="END";var E=z.getHTMLLocationForTag(m);m.injectHTMLNotFinished=true;try{if(E)z.injectHTML(E,t,k,function(){m.injectHTMLNotFinished=false;if(l)try{l()}catch(I){}}.bind(m));else if(f&&document.readyState==="loading"){document.write(k);m.injectHTMLNotFinished=false}else m.injectHTMLFailed=(new Date).valueOf()}catch(I){m.injectHTMLNotFinished=false;m.injectHTMLFailed=(new Date).valueOf()}}};
b.getAllVariablesWithParameters=function(m){var l=m.getPageVariables();var f=[];for(var c=0;c<l.length;c++){var k=l[c];var t=w(m,k);for(var E=0;E<t.length;E++)f.push({parameter:t[E],variable:k})}return f};var d={};b.allParameterVariablesReadyForTag=function(m,l){var f=l;var c=true;var k=m.getPageVariables();for(var t=0;t<k.length;t++){var E=k[t];try{var I=w(m,E);var L=E.exists();if(!L&&f){if(I.length>0)L=!!I[0].defaultValue;L=L||E.exists(true)}if(!L){c=false;break}}catch(Q){c=false;break}}return c};
var A="2";var D="3";var F="4";var r="5";b.validateAndGetVariableForParameter=function(m){if(m.hasOwnProperty("variable")&&m.variable)m.variable=b.initPageVariable(m.variable);return m.variable};b.initPageVariable=function(m){if(!m||m instanceof p)return m;if(typeof m==="string"){var l=q.getObjectUsingPath(m);if(l&&l instanceof p)return l}switch(m.type){case A:return new e(m);case D:return new C(m);case F:return new y(m);case r:return new n(m);case "EPRESSION":return new e(m);case "URL_PARAMETER":return new C(m);
case "COOKIE_VALUE":return new y(m);case "DOM_VALUE":return new n(m);default:return new p(m)}}})();(function(){function b(d){this.log=new u("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.urlsLoaded=0;this.urlsFailed=0;this.runCounter=0;this.events=new B.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies)this._triggerLoadingAndExecution()}.bind(this);this.config={name:"Tag-"+e++,async:true,usesDocumentWrite:false,
timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForInjectionLocation:false,noMultipleLoad:false,loadDependenciesOnLoad:false,restartable:true};this.restartCounter=0;this.cancelled=false;this.runtimeId=q.UUID();this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=[];if(d){if(!d.name){var A="Tag-"+e++;this.config.name=A}this.addState("INITIAL");for(var D in d)this.config[D]=
d[D];if(d.genericDependencies)this.genericDependencies=this.genericDependencies.concat(d.genericDependencies);if(d.dependencies)this.dependencies=d.dependencies.concat(this.dependencies);if(d.PACKAGE)this._package=d.PACKAGE;this.onInit()}}function w(){if(this.cancelled){this._handleCancel();return}this.waitForDependenciesFinished=(new Date).valueOf();var d=this._fullBodyNeededAndUnLoaded();var A=this._bodyNeededButNotAvailable();if(d||A)this.waitForDependenciesFinished=false;else{if(!this.timeoutCountdownStart)this.timeoutCountdownStart=
(new Date).valueOf();if(this.allDependenciesLoaded())this._markLoadedSuccesfuly();else if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=(new Date).valueOf();if(this.allDependenciesLoaded(true))this._markLoadedSuccesfuly();else{this.addState("TIMED_OUT");this._markLoadingDependenciesFailed();this._triggerOnLoadTimeout()}}else this.waitForDependenciesFinished=false}if(!this.waitForDependenciesFinished)this._setTimeout(w.bind(this),65);else this.addState("LOADED_DEPENDENCIES")}var q=B.opentag.Utils;
var z=B.opentag.TagsUtils;var h=B.opentag.Timed;var p=B.opentag.TagHelper;var e=0;var u=B.opentag.Log;B.Define.clazz("qubit.opentag.GenericLoader",b);var n="after";var y="before";var C="restart";b.prototype.EVENT_TYPES={AFTER_EVENT:n,BEFORE_EVENT:y,RESTART_EVENT:C};b.prototype.onInit=R;b.prototype.LOADING_TIMEOUT=5*1E3;b.prototype.getHtml=function(){if(this.config.html)return this.config.html;if(this.htmlContent)return q.trim(this.htmlContent);return null};b.prototype._executeScript=function(){var d=
false;try{this.script();d=true}catch(A){this.addState("EXECUTED_WITH_ERRORS");this.executedWithErrors=(new Date).valueOf();this._onError(A)}finally{this._onExecute(d)}};b.prototype.getTimeout=function(){return this._getTimeout()};b.prototype._getTimeout=function(d){var A=+this.config.timeout;var D=this.dependencies;if(A!==-1&&D.length>0){var F=0;d=d||[];var r=q.indexInArray(d,this)!==-1;if(!r){d[d.length]=this;for(var m=0;m<D.length;m++){var l=D[m]._getTimeout(d);if(l>F)F=l}if(F>0)A+=F}else return 0}return A};
b.prototype._onExecute=function(d){this.onExecute(d)};b.prototype.onExecute=R;b.prototype._flushDocWrites=function(d){var A=true;this._docWriteNotFlushed=false;try{var D=z.getHTMLLocationForTag(this);if(D&&this._securedWrites&&this._securedWrites.length>0){var F=this.config.locationPlaceHolder==="END";A=z.flushDocWritesArray(this._securedWrites,D,F,this.log,d);if(A)this._docWriteFlushed=(new Date).valueOf();else this._docWriteNotFlushed=(new Date).valueOf()}}catch(r){this._onError(r)}if(d)d();if(this._securedWrites&&
this._securedWrites.length>0){A=false;this._docWriteNotFlushed=(new Date).valueOf()}return A};b.prototype.log=R;b.prototype.finished=function(){return!!this.runIsFinished};b.prototype.script=function(){};b.prototype.before=function(){this.beforeRun=(new Date).valueOf();try{this.events.call(y,this)}catch(d){this._onError(d)}};b.prototype.onBefore=function(d){this.events.on(y,d)};b.prototype.after=function(d){this.afterRun=(new Date).valueOf();try{this.events.call(n,{success:d,tag:this})}catch(A){this._onError(A)}};
b.prototype.onAfter=function(d){this.events.on(n,d)};b.prototype.runOnce=function(){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=(new Date).valueOf();this.run()}};b.CANCEL_ALL=false;b.prototype.run=function(){if(!isNaN(this.config.runningLimit))if(this.config.runningLimit<=this.runCounter)return false;if(this.cancelled||b.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning)return false;if(this.lastRun)this.reset();this.lastRun=this.isRunning=(new Date).valueOf();
this.runCounter++;this._ignoreDeps=!!this.ignoreDependencies;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};b.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-(new Date).valueOf();this.load();if(this._ignoreDeps)this.execute();else this.waitForDependenciesAndExecute();return true};b.prototype._attachDepsEventsToContinue=function(){this.awaitingDependencies=(new Date).valueOf();
var d=this.dependencies;for(var A=0;A<d.length;A++)try{d[A].events.on("success",this._depLoadedHandler)}catch(D){}};b.prototype.dependenciesLoaded=function(){var d=this.dependencies;for(var A=0;A<d.length;A++)if(d[A]!==this){var D=+d[A].scriptExecuted>0;if(!D)return false}return true};b.prototype._setTimeout=function(d,A){this._wasTimed=(new Date).valueOf();var D=this.runtimeId;var F=function(){if(this.runtimeId===D)return d()}.bind(this);return h.setTimeout(F,A)};b.prototype._handleCancel=function(){this.addState("CANCELLED");
try{this.onCancel()}catch(d){this._onError(d)}};b.prototype.waitForDependenciesAndExecute=function(){if(this.loadedDependencies)this.execute();else if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else this._setTimeout(this.waitForDependenciesAndExecute.bind(this),30)};b.prototype.execute=function(){this._triggerExecution()};b.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();return}if(this.scriptExecuted)return;var d=true;if(this.shouldWaitForDocWriteProtection())d=
false;else{if(!this._beforeEntered){this._beforeEntered=(new Date).valueOf();var A=false;try{A=this.before()}catch(F){this._onError(F)}if(A){this._markFailure();this._markFinished();return}}d=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted)return;if(this.unexpectedFail)d=true;if(!d)this._setTimeout(this._triggerExecution.bind(this),30);else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail)this._markFailure();else{this.scriptExecuted=
(new Date).valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{var D=this.scriptExecuted>0;try{if(!this.afterRun){this.afterRun=(new Date).valueOf();this.after(D)}}catch(F){this.executedWithErrors=(new Date).valueOf()}if(!this.executedWithErrors)if(D)this.events.call("success")}this._flushDocWrites();this._markFinished()}};b.prototype._markFailure=function(){this.scriptExecuted=-(new Date).valueOf();this.addState("FAILED_TO_EXECUTE")};
b.prototype._markFinished=function(){this.runIsFinished=(new Date).valueOf();this.isRunning=false;if(b.LOCK_DOC_WRITE===this){this._flushDocWrites();z.unlockDocumentWrites();b.LOCK_DOC_WRITE=false}this.onFinished(true)};b.prototype.onFinished=R;b.prototype.onCancel=R;b.prototype.onFinished=R;b.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite())if(!b.LOCK_DOC_WRITE){b.LOCK_DOC_WRITE=this;this._secureWriteAndCollectForExecution()}else if(b.LOCK_DOC_WRITE!==this){if(!this._lockedDocWriteInformed)this._lockedDocWriteInformed=
(new Date).valueOf();return true}return false};b.prototype.runWithoutDependencies=function(){this.ignoreDependencies=true;this.run()};b.prototype.loadExecutionURLsAndHTML=function(d){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed)this._loadExecutionURLsAndHTMLInformed=true;this._triggerURLsLoading(d);if(!this.loadURLsNotFinished){this._flushDocWrites();this._triggerHTMLInjection();this._flushDocWrites();if(!this.injectHTMLNotFinished){this._flushDocWrites();
if(!this._docWriteNotFlushed){if(this._docWriteFlushed);return true}}}return false};b.prototype._triggerURLsLoading=function(d){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,d)}};b.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.getHtml()){this._injectHTMLTriggered=true;this.injectHTML()}};b.prototype.STATE={INITIAL:0,STARTED:1,LOADING_DEPENDENCIES:2,LOADED_DEPENDENCIES:4,LOADING_URL:8,LOADED_URL:16,EXECUTED:32,EXECUTED_WITH_ERRORS:64,
FAILED_TO_LOAD_DEPENDENCIES:128,FAILED_TO_LOAD_URL:256,FAILED_TO_EXECUTE:512,TIMED_OUT:1024,UNEXPECTED_FAIL:2048,CANCELLED:2048*2};b.prototype.addState=function(d){if(this.STATE.hasOwnProperty(d)){this.state=this.state|this.STATE[d];try{this.onStateChange(d)}catch(A){this._onError(A)}}};b.prototype.onStateChange=R;b.prototype.cancel=function(){this.cancelled=(new Date).valueOf()};b.prototype.unCancel=function(){this.cancelled=false};b.prototype.state=b.prototype.STATE.INITIAL;b.prototype._markLoadedSuccesfuly=
function(){this.loadedDependencies=(new Date).valueOf();this.onAllDependenciesLoaded()};b.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];z.redirectDocumentWritesToArray(this._securedWrites,this.log)}};b.prototype._markLoadingDependenciesFailed=function(){this.addState("FAILED_TO_LOAD_DEPENDENCIES");this.loadingDependenciesFailed=(new Date).valueOf()};b.prototype.allDependenciesLoaded=function(d,A){return this.getDependenciesToBeLoaded(d,A).length===
0};b.prototype.getDependenciesToBeLoaded=function(d,A){var D=A||[];if(!this.injectionLocationReady())D.push("injection location");var F;var r=this.dependencies;for(F=0;F<r.length;F++)if(r[F]!==this){var m=+r[F].scriptExecuted>0;if(!m){var l=r[F].config?r[F].config.name:"anonymous";D.push("dependant Tag with name -\x3e "+l)}}for(F=0;F<this.genericDependencies.length;F++){var f=this.genericDependencies[F](this);if(!f)D.push("this.genericDependencies["+F+"] (index: "+F+")")}if(D!=="");return D};b.prototype.docWriteAsksToWaitForBody=
function(){return!!(this.delayDocWrite&&this.config.usesDocumentWrite)};b.prototype._bodyNeededButNotAvailable=function(){if(this._dontWaitForInjections())return false;return this._isBodyLocationNeeded()&&!z.bodyAvailable()};b.prototype._isBodyLocationNeeded=function(){if(!this.isLoadingAsynchronously())return false;if(this._isBodyLocationSet())return true;else{var d=this.config.locationObject==="HEAD";return d&&this.config.locationPlaceHolder==="END"}};b.prototype._isBodyLocationSet=function(){var d=
this.config.locationObject;return!d||d==="BODY"};b.prototype._fullBodyNeededAndUnLoaded=function(){if(this._dontWaitForInjections())return false;var d=false;if(this._isBodyLocationNeeded())d=this.config.locationPlaceHolder==="END";d=d||(this.fullbodyNeeded||this.docWriteAsksToWaitForBody());return d&&!q.bodyReady()};b.prototype._dontWaitForInjections=function(){return this.config.dontWaitForInjectionLocation||this.dontWaitForInjectionLocation||b.dontWaitForInjectionLocation};b.prototype.injectionLocationReady=
function(){if(this._dontWaitForInjections())return true;if(this._fullBodyNeededAndUnLoaded())return false;if(!this.isLoadingAsynchronously())return true;return!!z.getHTMLLocationForTag(this)};b.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0)return false;return(new Date).valueOf()-this.timeoutCountdownStart>this.getTimeout()};b.prototype.loadDependencies=function(){this._loadDependencies()};b.prototype.addClientDependenciesList=function(d,A){return this.addDependenciesList(d,B.Define.clientSpaceClasspath())};
b.prototype.addDependenciesList=function(d,A){if(!d||d.length===0)return;if(!this.failedDependenciesToParse)this.failedDependenciesToParse=[];var D=this.dependencies;for(var F=0;F<d.length;F++){var r=d[F];var m=false;if(r instanceof b)D.push(r);else if(typeof r==="string"){var l=r;if(A)r=A+"."+r;var f=q.getObjectUsingPath(r);if(f)if(f instanceof b)D.push(f);else m=true;else this.failedDependenciesToParse.push(l)}else m=true;if(m){this.badDepsObjects=this.badDepsObjects||[];q.addToArrayIfNotExist(this.badDepsObjects,
r)}}};b.prototype._loadDependencies=function(d){d=d||[];var A=this.dependencies;var D=q.indexInArray(d,this)!==-1;if(!D){d[d.length]=this;for(var F=0;F<A.length;F++)A[F].load(d)}};b.prototype.onError=R;b.prototype._onError=function(d){try{this.onError(d)}catch(A){}};b.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};b.prototype.onLoadTimeout=R;b.prototype.onScriptsLoadSuccess=R;b.prototype.onScriptLoadError=R;b.prototype.onAllDependenciesLoaded=R;b.prototype.onBeforeLoad=null;b.prototype.load=
function(){if(this.loadStarted)return;else{this.loadStarted=(new Date).valueOf();try{if(this.onBeforeLoad)this.onBeforeLoad()}catch(d){this._onError(d)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad)this.loadDependencies()}catch(d){throw d;}w.call(this)};b.prototype._singleUrlLoadHandler=function(d,A,D){++this.urlsLoaded;if(!d)++this.urlsFailed;if(this.urlsLoaded===A.length){this.loadURLsNotFinished=false;if(d&&this.urlsFailed===0){this.addState("LOADED_URL");
this.urlsLoaded=(new Date).valueOf();try{if(D)D(true)}catch(r){this._onError(r)}finally{this.onScriptsLoadSuccess()}}else{var F="error loading urls. Failed "+this.urlsFailed;this._onError(F);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-(new Date).valueOf();try{this.scriptLoadingFailed=true;if(D)D(false)}catch(r){this._onError(r)}finally{this.onScriptLoadError(F)}}}};b.prototype.loadURLs=function(d,A){var D=d||this.config.url;this.addState("LOADING_URL");try{if(D&&!(D instanceof Array))D=[D];
for(var F=0;F<D.length;F++){this.loadURLsNotFinished=true;var r=D[F];r=this.prepareURL(r);this.loadURL(r,function(m){this._singleUrlLoadHandler(m,D,A)}.bind(this))}}catch(m){this.loadURLsNotFinished=false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=(new Date).valueOf();this._onError(m)}};b.prototype.prepareLocationObject=function(d){return d};b.prototype.prepareURL=function(d){return d};b.prototype.prepareHTML=function(d){return d};b.prototype.loadURL=function(d,A,D){var F=d;this.addState("LOADING_URL");
z.loadScript({onsuccess:function(){try{if(A)A(true)}catch(r){}}.bind(this),onerror:function(){try{if(A)A(false)}catch(r){}}.bind(this),url:F,node:D||this.config.urlLocation,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};b.prototype.onRestart=function(d){this.events.on(C,d)};b.prototype.prepareForRestart=function(){if(this.config.restartable){var d=this.restartCounter+1;this.events.call(C,this);this.reset();this.restartCounter=d}};b.prototype.restart=function(){if(this.config.restartable){this.prepareForRestart();
this.run()}};b.prototype.reset=function(){var d;this._injectHTMLTriggered=d;this._loadExecutionURLsAndHTMLInformed=d;this._lockedDocWriteInformed=d;this._runOnceTriggered=d;this._urlLoadTriggered=d;this.afterRun=d;this.beforeRun=d;this.filtersRunTriggered=d;this.injectHTMLFailed=d;this.loadStarted=d;this.loadURLsNotFinished=d;this.loadedDependencies=d;this.loadingDependenciesFailed=d;this.loadingTimedOut=d;this.runIsFinished=d;this.scriptExecuted=d;this.scriptLoadingFailed=d;this.delayDocWrite=d;
this._securedWrites=d;this.state=0;this.unexpectedFail=d;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=d;this.isRunning=d;this.lastRun=d;this.cancelled=d;this._beforeEntered=d;this.awaitingDependencies=d;this.timeoutCountdownStart=d;this.restartCounter=0;this.runtimeId=q.UUID();this.addState("INITIAL")};b.prototype.isLoadingAsynchronously=function(){if(this._wasTimed)return true;return!!(this.config.async||this.forceAsynchronous)};b.prototype.willSecureDocumentWrite=function(){return this.config.usesDocumentWrite&&
this.isLoadingAsynchronously()};b.prototype.injectHTML=function(d){var A=!this.docWriteAsksToWaitForBody();var D=this.prepareHTML(this.getHtml());if(D)p.injectHTMLForLoader(this,d,A,D)};b.prototype.clone=function(){var d=new b(this.config);return d}})();(function(){function b(f){var c={filterTimeout:f&&f.filterTimeout||this.FILTER_WAIT_TIMEOUT,PACKAGE:f&&f.PACKAGE,dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,disabled:false,locked:false,reRunOnVariableChange:false};q.setIfUnset(f,
c);b.SUPER.apply(this,arguments);this.namedVariables={};this._runtimeMarkers={};this.parameters=[];this.filters=[];this.session=null;this.owningContainer=null;this.pingSent=false;this.oldPingSent=false;this.dedupePingSent=false;this.oldDedupePingSent=false;this.reRunCounter=0;if(f){this.addState("INITIAL");try{b.register(this)}catch(k){}this.setupConfig(f);this.uniqueRefString=null;if(f.init)try{f.init.call(this,f)}catch(k){}this.onTagInit();this.handleVariableChange=this._handleVariableChange.bind(this)}}
function w(f,c){var k=f.namedVariables;var t=u.initPageVariable(k[c]);k[c]=t;return t}var q=B.opentag.Utils;var z=B.opentag.TagsUtils;var h=B.opentag.Timed;var p=B.opentag.filter.BaseFilter;var e=B.opentag.GenericLoader;var u=B.opentag.TagHelper;var n=B.opentag.pagevariable.BaseVariable;var y=B.Cookie;var C=B.Define;C.clazz("qubit.opentag.BaseTag",b,e);b.prototype.setupConfig=function(f){if(!f)return;if(f.filters)this.addFilters(f.filters);if(f.parameters)this.addParameters(f.parameters);if(f.variables)for(var c in f.variables)if(f.variables.hasOwnProperty(c)){var k=
this.getParameterByTokenName(c);if(k){var t=f.variables[c];k.variable=t;if(t.defaultValue!==undefined)k.defaultValue=t.defaultValue;if(t.uv!==undefined)k.uv=t.uv}}if(f.locked)this.lock()};b.prototype.valueForToken=function(f,c){var k=this.getParameterByTokenName(f);if(k){if(c===undefined)if(this.loadingTimedOut)c=true;return this.getParameterValue(k,c)}var t=this.namedVariables;if(t&&t[f]){var E=w(this,f);if(E)return E.getRelativeValue(c)}return undefined};b.prototype.addParameters=function(f){this.parameters=
this.parameters.concat(f)};b.prototype.LOADING_TIMEOUT=5*1E3;b.prototype.FILTER_WAIT_TIMEOUT=-1;b.prototype._isVariable=function(f){return f!==null&&f!==undefined};b.prototype.run=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();this.runPostInitialisationSection();var f=this.parameters;if(f)for(var c=0;c<f.length;c++){var k=this.getVariableForParameter(f[c]);if(!this._isVariable(k)){this._markLoadingDependenciesFailed();this._markFinished();return}}if(this.config.runner){var t=
false;try{this.addState("AWAITING_CALLBACK");t=this._runner=(new Date).valueOf();this.config.runner.call(this)}catch(E){}return t}else{this._runner=false;return this.start()}};b.prototype.lock=function(){this.locked=true;this._unlock=null};b.prototype.unlock=function(){this.locked=false;if(this._unlock){this._unlock();this._unlock=false}};b.prototype.start=function(){if(!this.locked)return b.SUPER.prototype.run.call(this);else{this._unlock=function(){return b.SUPER.prototype.run.call(this)}.bind(this);
return false}};b.prototype.startOnce=function(){if(!this.locked)return b.SUPER.prototype.runOnce.call(this);else{this._unlock=function(){return b.SUPER.prototype.runOnce.call(this)}.bind(this);return false}};b.prototype.getFilters=function(){return this.filters};b.prototype.runOnceIfFiltersPass=function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=(new Date).valueOf();this.runIfFiltersPass()}};b.prototype.runIfFiltersPass=function(){if(this.destroyed)throw"Tag is destroyed.";
this.resolveAllDynamicData();this.runPostInitialisationSection();var f=this.filtersState(true);this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered)this.filtersRunTriggered=(new Date).valueOf();if(f===p.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=(new Date).valueOf()}else if(f===p.state.PASS){this.filtersPassed=(new Date).valueOf();try{this.onFiltersPassed()}catch(k){}this.run()}else if(f===p.state.FAIL){this._markFiltersFailed();this._markFinished()}else if(f>0){var c=
this.config.filterTimeout;if(c<0||(new Date).valueOf()-this.filtersRunTriggered>c){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=(new Date).valueOf();try{this.onFiltersDelayed()}catch(k){}}this._setTimeout(this.runIfFiltersPass.bind(this),f)}else{this._markFiltersFailed();this._markFinished();this.filtersRunTimedOut=(new Date).valueOf()}}try{this.onFiltersCheck(f)}catch(k){}return f};b.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=
-(new Date).valueOf()};b.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,LOADING_DEPENDENCIES:16,LOADED_DEPENDENCIES:32,LOADING_URL:64,LOADED_URL:128,EXECUTED:256,EXECUTED_WITH_ERRORS:512,FAILED_TO_LOAD_DEPENDENCIES:1024,FAILED_TO_LOAD_URL:2048,FAILED_TO_EXECUTE:4096,TIMED_OUT:4096*2,UNEXPECTED_FAIL:4096*2*2,CANCELLED:4096*2*2*2};b.prototype.addState=function(f){b.SUPER.prototype.addState.call(this,f);try{b.onStateChange(this)}catch(E){}this.stateStack=[];
var c=this.STATE;var k=this.state;var t=this.stateStack;if(k&c.INITIAL)t.push("Initial state.");if(k&c.FILTER_ACTIVE)t.push("Tag running with filters pass triggered.");if(k&c.FILTERS_FAILED)t.push("Filters failed to pass.");if(k&c.AWAITING_CALLBACK)t.push("Awaiting callback to run this tag. Not pooling.");if(k&c.STARTED)t.push("Tag is initialised and loading has been started.");if(k&c.LOADING_DEPENDENCIES)t.push("Dependencies are being loaded.");if(k&c.LOADED_DEPENDENCIES)t.push("Dependencies loading process has been finished.");
if(k&c.LOADING_URL)t.push("External URL is being loaded.");if(k&c.LOADED_URL)t.push("External URL has been loaded.");if(k&c.EXECUTED)t.push("Main script has been executed.");if(k&c.EXECUTED_WITH_ERRORS)t.push("Main script has been executed but errors occured.");if(k&c.FAILED_TO_LOAD_DEPENDENCIES)t.push("Dependencies has failed to load.");if(k&c.FAILED_TO_LOAD_URL)t.push("URL location failed to load.");if(k&c.FAILED_TO_EXECUTE)t.push("Script failed to execute.");if(k&c.TIMED_OUT)t.push("Script timed out awaiting for dependencies.");
if(k&c.UNEXPECTED_FAIL)t.push("Script occured UNEXPECTED exception and is failed.");if(k&c.CANCELLED)t.push("Tag has been cancelled.")};b.prototype.onTagInit=R;b.prototype.postInitialisationSection=R;b.onStateChange=R;b.prototype.onFiltersDelayed=R;b.prototype.onFiltersPassed=R;b.prototype.onFiltersCheck=R;b.prototype.state=b.prototype.STATE.INITIAL;b.prototype.arePageVariablesLoaded=function(f){return u.allParameterVariablesReadyForTag(this,f)};b.prototype.getDependenciesToBeLoaded=function(f,c){var k=
c||[];if(!this.arePageVariablesLoaded(f))k.push("page variables");return b.SUPER.prototype.getDependenciesToBeLoaded.call(this,f,k)};b.prototype.resolveAllDynamicData=function(){this.resolvePageVariables();this.resolveDependencies();this.resolveFilters()};b.prototype.resolveDependencies=function(){var f=this.failedDependenciesToParse;if(f){this.failedDependenciesToParse=null;this.addDependenciesList(f,C.clientSpaceClasspath())}return this.dependencies};b.prototype.addClientVariablesMap=function(f){this.unresolvedClientVariablesMap=
this._addVariablesMap(f,C.clientSpaceClasspath());return this.unresolvedClientVariablesMap};b.prototype.resolvePageVariables=function(){var f=this.unresolvedClientVariablesMap;if(f){this.unresolvedClientVariablesMap=null;this.addClientVariablesMap(f)}f=this.unresolvedVariablesMap;if(f){this.unresolvedVariablesMap=null;this.addVariablesMap(f)}return this.getPageVariables()};b.prototype.addVariablesMap=function(f){this.unresolvedVariablesMap=this._addVariablesMap(f);return this.unresolvedVariablesMap};
b.prototype._addVariablesMap=function(f,c){if(!f)return;var k={};var t=this.namedVariables;for(var E in f)if(f.hasOwnProperty(E)){var I=f[E];if(I instanceof n)t[E]=I;else if(typeof I==="string"){var L=I;if(c)I=c+"."+I;var Q=q.getObjectUsingPath(I);if(Q)if(Q instanceof n)t[E]=Q;else t[E]=I;else k[E]=L}else;}return k};b.prototype.prepareURL=function(f){return this.replaceTokensWithValues(f)};b.prototype.prepareLocationObject=function(f){return this.replaceTokensWithValues(f)};b.prototype.prepareHTML=
function(f){if(f)f=this.replaceTokensWithValues(f);return f};b.prototype._executeScript=function(){if(this.config&&this.config.script)if(typeof this.config.script==="function")this.script=this.config.script;else{var f=this.replaceTokensWithValues(String(this.config.script));this.script=q.expressionToFunction(f).bind(this)}b.SUPER.prototype._executeScript.call(this)};b.prototype.replaceTokensWithValues=function(f){if(!f||f.indexOf("${")===-1)return f;var c=this.parameters;if(c)for(var k=0;k<c.length;k++){var t=
c[k];var E=this.getVariableForParameter(t);if(E){var I=c[k].token;var L=this.valueForToken(I);f=E.replaceToken(I,f,L)}}return f};b.prototype.getParameter=function(f){var c=this.parameters;var k=null;if(c)for(var t=0;t<c.length;t++)if(c[t].name===f)k=c[t];return k};b.prototype.setParameterValueByTokenName=function(f,c){var k=this.getParameterByTokenName(f);if(k!==null){k.variable={value:c};return true}return false};b.prototype.getParameterValue=function(f,c){var k=typeof f==="string"?this.getParameter(f):
f;if(k){var t=this.getVariableForParameter(k);if(t)try{var E;if(c&&k.defaultValue!=="")E=q.gevalAndReturn(k.defaultValue).result;E=t.getRelativeValue(c,E);return E}catch(I){return undefined}}return undefined};b.prototype.filtersState=function(f){var c=f;return z.filtersState(this.filters,this.session,this,c)};b.prototype.addFilter=function(f){q.addToArrayIfNotExist(this.filters,f)};b.prototype.addFilters=function(f){for(var c=0;c<f.length;c++)this.addFilter(f[c])};b.prototype.addClientFiltersList=
function(f){this.unresolvedClientFilterClasspaths=this.addFiltersList(f,C.clientSpaceClasspath());return this.unresolvedClientFilterClasspaths};b.prototype.resolveFilters=function(){var f=this.unresolvedClientFilterClasspaths;if(f){this.unresolvedClientFilterClasspaths=null;this.addClientFiltersList(f)}return this.filters};b.prototype.addFiltersList=function(f,c){var k=[];for(var t=0;t<f.length;t++)try{var E=f[t];var I=E;var L=null;if(typeof E==="string"){L=E;if(c)E=c+"."+E;E=q.getObjectUsingPath(E)}if(typeof E===
"function"){var Q=E;E=new Q}if(!E);if(!E instanceof p)E=null;if(E)this.addFilter(E);else if(L)q.addToArrayIfNotExist(k,L)}catch(S){this.failedFilters=this.failedFilters||[];this.failedFilters.push(f[t])}return k};b.prototype.reset=function(){b.SUPER.prototype.reset.call(this);var f;this.filtersPassed=f;this.dedupePingSent=false;this.oldDedupePingSent=false;this.pingSent=false;this.oldPingSent=false;this._runOnceIfFiltersPassTriggered=f;this.filtersRunTriggered=f;this._runner=f;this.reRunCounter=0;
this.detachVariablesChangedListeners()};b.prototype.resetFilters=function(){for(var f=0;f<this.filters.length;f++)this.filters[f].reset()};b.prototype.getParameterByTokenName=function(f){var c=null;if(this.parameters){var k=this.parameters;for(var t=0;t<k.length;t++)if(k[t].token===f)c=k[t]}return c};b.prototype.removeFilter=function(f){q.removeFromArray(this.filters,f)};var d=0;var A=[];var D={};var F={};b.register=function(f){var c=q.addToArrayIfNotExist(A,f);if(c===-1)f._tagIndex=A.length-1;else f._tagIndex=
c;if(f.config.id){var k="Q"+f.config.id;F[k]=f;f.uniqueId=k}else F[f.CLASSPATH]=f};b.getById=function(f){return F[String(f)]};b.prototype.getById=b.getById;b.prototype.unregister=function(f){b.unregister(f||this)};b.prototype.destroy=function(){this.destroyed=true;this.cancel();b.unregister(this)};b.unregister=function(f){var c=q.removeFromArray(A,f);f._tagIndex=-1};b.getTags=function(){return A};b.getAccessorsMap=function(){return D};b.prototype.getTags=function(){return A};b.prototype.getPageVariables=
function(){var f=this.parameters;var c=[];if(f)for(var k=0;k<f.length;k++){var t=this.getVariableForParameter(f[k]);if(this._isVariable(t))q.addToArrayIfNotExist(c,t)}if(this.namedVariables)for(var E in this.namedVariables)q.addToArrayIfNotExist(c,w(this,E));return c};b.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey="_"+d++;D[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};b.prototype.getVariableForParameter=
function(f){var c;var k=this.namedVariables;if(k&&k[f.token])c=w(this,f.token);if(!c)c=u.validateAndGetVariableForParameter(f);return c};b.prototype.printVariablesState=function(){var f=[];var c=u.getAllVariablesWithParameters(this);for(var k=0;k<c.length;k++){var t=c[k].parameter;var E=c[k].variable;var I;if(t&&t.token)I=this.valueForToken(t.token);else I=E.getRelativeValue(true);var L={name:E.config.name,exists:E.exists(),token:t?t.token:null,value:I,variable:E};f.push(L)}return f};b.prototype._triggerOnLoadTimeout=
function(){this.onLoadTimeout()};b.prototype.getId=function(){return this._getUniqueId()};b.prototype._getUniqueId=function(){if(this.config.id)return this.config.id;if(String(this.CLASSPATH).indexOf(C.STANDARD_CS_NS)===0)return this.CLASSPATH.substring(C.STANDARD_CS_NS.length+1);else return this.CLASSPATH+"#"+this.config.name};var r="qubit.tag.forceRunning_";var m="qubit.tag.disableRunning_";var l="qubit.tag.forceAllToRun";b.prototype.cookieSaysToRunEvenIfDisabled=function(){var f=this._getUniqueId();
var c=!!y.getCached(l);if(!c)c=!!y.getCached(r+f);return c};b.prototype.setCookieForcingTagToRun=function(){var f=this._getUniqueId();y.set(r+f,"true");y.resetCache()};b.setCookieForcingTagsToRun=function(){y.set(l,"true");y.resetCache()};b.prototype.setCookieToDisable=function(){var f=this._getUniqueId();y.set(m+f,"true");y.resetCache()};b.prototype.rmCookieToDisable=function(){var f=this._getUniqueId();y.rm(m+f);y.resetCache()};b.prototype.disabledByCookie=function(){var f=this._getUniqueId();return!!y.getCached(m+
f)};b.rmCookieForcingTagsToRun=function(){y.rm(l);y.resetCache()};b.prototype.rmCookieForcingTagToRun=function(){var f=this._getUniqueId();y.rm(r+f);y.resetCache()};b.rmAllDisablingCookies=function(){q.rmCookiesMatching(m);y.resetCache()};b.rmAllCookiesForcingTagToRun=function(){q.rmCookiesMatching(r);b.rmCookieForcingTagsToRun()};b.prototype.onVariableChanged=function(f){this.attachVariablesChangedListeners(true);this.events.on("variableChanged",f)};b.prototype._handleVariableChange=function(f){this.events.call("variableChanged",
f);if(!this.isRunning&&this.config.reRunOnVariableChange){if(!isNaN(this.config.reRunLimit))if(this.config.reRunLimit<=this.reRunCounter)return;var c=this.reRunCounter+1;this.reset();this.reRunCounter=c;this.resetFilters();this.runIfFiltersPass()}};b.prototype.attachVariablesChangedListeners=function(f){var c=this.getPageVariables();var k=!!(this.config.reRunOnVariableChange||this.config.observeVariables||f);if(k)for(var t=0;t<c.length;t++){var E=c[t];E.onValueChanged(this.handleVariableChange,k)}};
b.prototype.detachVariablesChangedListeners=function(){var f=this.getPageVariables();for(var c=0;c<f.length;c++){var k=f[c];k.deatchOnValueChanged(this.handleVariableChange)}};b.prototype._markFinished=function(){b.SUPER.prototype._markFinished.call(this);this.attachVariablesChangedListeners()};b.prototype.prepareForRestart=function(f){if(this.config.restartable){b.SUPER.prototype.prepareForRestart.call(this,false);if(!f){var c=this.getFilters();for(var k=0;k<c.length;k++)c[k].prepareForRestart()}}};
b.prototype.restart=function(f){if(this.config.restartable){this.prepareForRestart(f);this.runIfFiltersPass()}};b.prototype.runPostInitialisationSection=function(){if(!this._postInitialisationRun){this._postInitialisationRun=true;if(this.postInitialisationSection)try{this.postInitialisationSection()}catch(f){}}}})();(function(){function b(h){q.setIfUnset(h,b.defaultConfig);if(this.singleton){var p=this.PACKAGE_NAME+"."+this.CLASS_NAME;var e=B.opentag.Utils.getObjectUsingPath(p,v);if(e.__instance)return e.__instance;
e.__instance=this}b.SUPER.call(this,h)}function w(h,p){var e=h.toString();e=e.replace(/\s*function\s*\([\w\s,_\d\$]*\)\s*\{/,"");e=e.substring(0,e.lastIndexOf("}"));e=e.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)/g,'$1"${$2}"');e=e.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)(\s*\+\s*["'])/g,'"${$1}"$2');e=e.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)/g,'$1"${$2}"');e=e.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)(\s*\+\s*["'])/g,
'"${$1}"$2');e=e.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'(\s*)\)/g,"$1${$2}$3");e=e.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"(\s*)\)/g,"$1${$2}$3");e=p.replaceTokensWithValues(e);q.geval(e)}var q=B.opentag.Utils;var z=B.Define;B.Define.clazz("qubit.opentag.LibraryTag",b,B.opentag.BaseTag);b.defaultConfig={vendor:null,imageUrl:null,description:"",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[],prePostWindowScope:false};b.prototype.pre=function(){};
b.prototype.post=function(){};b.prototype.before=function(){b.SUPER.prototype.before.call(this);try{var h=this.config;if(h&&h.pre)if(typeof h.pre==="function")this.pre=h.pre;else{var p=this.replaceTokensWithValues(String(h.pre));this.pre=q.expressionToFunction(p).bind(this)}if(this.config.prePostWindowScope&&this.pre!==b.prototype.pre&&this.pre.toString)w(this.pre,this);else this.pre()}catch(e){return true}return false};b.prototype.after=function(h){b.SUPER.prototype.after.call(this,h);try{var p=
this.config;if(p&&p.post)if(typeof p.post==="function")this.post=p.post;else{var e=this.replaceTokensWithValues(String(p.post));this.post=q.expressionToFunction(e).bind(this)}if(this.config.prePostWindowScope&&this.post!==b.prototype.post&&this.post.toString)w(this.post,this);else this.post(h)}catch(u){}};b.define=function(h,p){h=h.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");h=B.Define.vendorsSpaceClasspath(h);var e={};if(p.getDefaultConfig)e=p.getDefaultConfig();var u=p.CONSTRUCTOR;
var n={};for(var y in p)if(y!=="config")n[y]=p[y];var C=function(D){D=D||{};D=q.overrideFromLeftToRight(e,D);var F=B.opentag.LibraryTag.call(this,D);if(u)u.call(this,D);if(F)return F};var d=B.opentag.Utils.defineWrappedClass(h,b,n,J,C);var A=z.STANDARD_VS_NS+".";if(h.indexOf(A)!==0)q.namespace(A+h,d);return d};b.getLibraryByClasspath=function(h){return q.getObjectUsingPath(h,B.Define.getVendorSpace())}})();(function(){function b(q){var z={url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",
async:true};w.setIfUnset(q,z);b.SUPER.call(this,q)}var w=B.opentag.Utils;B.Define.clazz("qubit.opentag.CustomTag",b,B.opentag.LibraryTag)})();(function(){var b=B.opentag.Utils;var w=B.opentag.filter.BaseFilter;var q=function(){};B.Define.clazz("qubit.opentag.Tags",q);q.getById=function(h){return B.opentag.BaseTag.getById(String(h))};q.getAllTagsByState=function(){return B.opentag.Container.getAllTagsByState(q.getTags())};q.findTagByName=function(h){var p=this.getTags();var e=[];for(var u=0;u<p.length;u++)if(p[u].config.name===
h)e.push(p[u]);return e};q.findTagByMatch=function(h){var p=this.getTags();var e=[];for(var u=0;u<p.length;u++)if(p[u].config.name.match(h))e.push(p[u]);return e};q.findTagContainers=function(h){var p=q.getContainers();var e=[];for(var u=0;u<p.length;u++){var n=p[u].tags;for(var y in n)if(n[y]===h){e.push(p[u]);break}}return e};q.getTags=function(){return B.opentag.BaseTag.getTags()};q.resetAllTags=function(h){var p=q.getTags();for(var e=0;e<p.length;e++){p[e].reset();if(!h)p[e].resetFilters()}};
q.getContainersPageVariables=function(){var h=q.getContainers();var p=[];for(var e=0;e<h.length;e++)p=p.concat(h.getPageVariables());return p};q.getAllPageVariables=function(){var h=q.getTags();var p=[];for(var e=0;e<h.length;e++)p=p.concat(h[e].getPageVariables());return p};q.cancelAll=function(){var h=q.getTags();for(var p=0;p<h.length;p++)h[p].cancel()};q.resetAll=function(h){var p=q.getTags();for(var e=0;e<p.length;e++){p[e].reset();if(!h)p[e].resetFilters()}};q.getPageVariableByName=function(h){var p=
q.getAllPageVariables();var e=[];for(var u=0;u<p.length;u++)if(p[u].config.name===h)e.push(p[u]);return e};q.getLoadTime=function(h){var p=h.beforeRun;var e=h.runIsFinished;if(isNaN(e))return{tag:h,loadTime:null};else return{tag:h,loadTime:e-p}};q.getLoadTimes=function(h){var p=[];if(h instanceof B.opentag.BaseTag){p.push([q.getLoadTime(h[n])]);return p}h=h||q.getTags();var e=h instanceof Array;if(e)for(var u=0;u<h.length;u++){if(h[u]instanceof B.opentag.BaseTag)p.push(q.getLoadTime(h[u]))}else for(var n in h)if(h[n]instanceof
B.opentag.BaseTag)p.push(q.getLoadTime(h[n]));return p};q.forceAllContainersAndTagsToRunIfDisabled=function(){B.opentag.Container.setCookieForDisabledContainersToRun();B.opentag.BaseTag.setCookieForcingTagsToRun()};q.rmAllContainersAndTagsForcingFlags=function(){B.opentag.Container.rmCookieForDisabledContainersToRun();B.opentag.BaseTag.rmAllCookiesForcingTagToRun()};q.getContainers=function(){return B.opentag.Container.getContainers()};q.findAllTagsByClassPath=function(h){var p=(new Date).valueOf();
var e=[];var u=[];try{u.push(B.opentag.CustomTag);u.push(B.opentag.LibraryTag)}catch(d){}var n=q.getTags();for(var y=0;y<n.length;y++){var C=n[y];if(b.indexInArray(u,C)<0&&C.PACKAGE_NAME.indexOf(h)===0)e.push(C)}return e};q.findAllTags=function(h,p){var e=B.opentag.BaseTag;var u;var n=[];var y=(new Date).valueOf();try{n.push(B.opentag.CustomTag);n.push(B.opentag.LibraryTag)}catch(C){}u=q.findAllInstances(h,e,n,p);return u};var z=function(h,p,e,u){var n=[];if(typeof h==="string")h=b.getObjectUsingPath(h);
if(h){var y={objectsOnly:true};if(u)y.maxDeep=true;var C=function(d,A,D,F){if(p(d)){for(var r=0;r<e.length;r++)if(e[r]===d)return true;b.addToArrayIfNotExist(n,d);return true}return false}.bind(this);b.traverse(h,C,y)}return n};q.findAllInstances=function(h,p,e,u){var n=function(y){return y instanceof p};return z(h,n,e,u)};q.findAllInheriting=function(h,p,e,u){var n=function(y){return y.prototype instanceof p};return z(h,n,e,u)};q.findAllFilters=function(h,p){var e=[];try{e.push(B.opentag.filter.Filter);
e.push(B.opentag.filter.URLFilter)}catch(u){}return q.findAllInheriting(h,w,e,p)}})();P.cookie={};P.cookie.PageView={};P.cookie.PageView.update=function(){var b;var w;w=function z(){return Math.floor(1+Math.random()*65536).toString(36).substring(1)};if(!window.__pageViewId__){b=(new Date).getTime().toString(36);window.__pageViewId__=b+w()+w()+w()}return window.__pageViewId__};P.html.PostData=function(b,w,q,z){var h;var p;var e;var u;var n;var y;var C;var d;var A;var D;D=2;A=5E3;C=false;d=function(){if(D>
0)setTimeout(function(){if(!C){D-=1;h()}},A)};p=navigator.userAgent.toLowerCase();e=p.indexOf("msie")!==-1;u=p.indexOf("msie 9")!==-1;n=p.indexOf("msie 7")!==-1||p.indexOf("msie 6")!==-1;y=("https:"===document.location.protocol?"https:":"http:")+b;q=q||"POST";h=function(){var F;try{F=null;try{F=new XMLHttpRequest}catch(r){}if(F&&!e)F.open(q,y,true);else if(typeof XDomainRequest!=="undefined"){F=new XDomainRequest;F.open(q,y)}else F=null;try{F.withCredentials=false}catch(r){}if(F.setRequestHeader)if(z)F.setRequestHeader("Content-Type",
z);else F.setRequestHeader("Content-Type","text/plain;charset\x3dUTF-8");F.onload=function(){C=true};F.onreadystatechange=function(){};F.ontimeout=function(){};F.onerror=function(){};F.onprogress=function(){};F.send(w)}catch(r){try{try{P.html.fileLoader.load(y)}catch(m){if(window.console&&window.console.log)window.console.log(r)}}catch(m){}}};if(n){P.html.fileLoader.load(y);return}else h()};(function(){function b(){}function w(z,h){var p={};p.clientId=""+h.clientId;p.containerId=""+z.getContainerId();
p.classpath=""+z.PACKAGE_NAME;p.opentagStats=true;if(z.sentPing)p.containerLoad=false;else{z.sentPing=(new Date).valueOf();p.containerLoad=true}p.isS3=false;p.pageViewId=P.cookie.PageView.update();p.tags=[];return p}var q="text/plain;charset\x3dUTF-8";B.Define.clazz("qubit.opentag.Ping",b);b.prototype.sendErrors=function(z,h){};b.getPingID=function(z){if(z.config.id)return z.config.id;var h=z.PACKAGE_NAME.lastIndexOf(".");if(h!==-1)return z.PACKAGE_NAME.substring(h+1);else return z.PACKAGE_NAME};
b.prototype.send=function(z,h){var p=z.config;var e=w(z,p);var u=e.tags;var n=p.pingServerUrl;for(var y=0;y<h.length;y++){var C=h[y].tag;var d=h[y].loadTime;if(d===null||isNaN(d))continue;var A={};var D=b.getPingID(C);if(!C.pingSent&&D&&d!==null)if(D!==undefined){A.tagId=D;A.loadTime=d;A.fired=true;u.push(A);C.pingSent=true}else;else if(C.pingSent);else if(d===null);}if(n&&(u.length>0||e.containerLoad)){var F=V.stringify(e);var r="//"+n;P.html.PostData(r,F,"POST",q)}else{if(!u.length);if(!n);}};b.prototype.sendDedupe=
function(z,h){var p=z.config;var e=w(z,p);var u=p.pingServerUrl;var n=e.tags;for(var y=0;y<h.length;y++){var C=h[y];var d=b.getPingID(C);var A={};if(d===undefined);else if(!C.dedupePingSent){A.tagId=""+d;A.fired=false;A.loadTime=0;n.push(A);C.dedupePingSent=true}}if(u&&(n.length>0||e.containerLoad)){var D=V.stringify(e);var F="//"+u;P.html.PostData(F,D,"POST",q)}else{if(!n.length);if(!u);}}})();P.cookie.SimpleSessionCounter={};P.cookie.SimpleSessionCounter._cookieName="_qst_s";P.cookie.SimpleSessionCounter._sessionCookie=
"_qsst_s";P.cookie.SimpleSessionCounter.update=function(b){var w;var q;var z;var h=30;w=B.Cookie.get(P.cookie.SimpleSessionCounter._cookieName);q=B.Cookie.get(P.cookie.SimpleSessionCounter._sessionCookie);if(!w)w=1;else{w=parseInt(w,10);if(!q||parseInt(q,10)<(new Date).getTime()-h*60*1E3)w+=1}B.Cookie.set(P.cookie.SimpleSessionCounter._cookieName,w,365,b);B.Cookie.set(P.cookie.SimpleSessionCounter._sessionCookie,(new Date).getTime().toString(),null,b);return w};(function(){function b(n){if(n)if(n.alphabet){this.alphabet=
n.alphabet;this.dict={};for(var y=0;y<this.alphabet.length;y++)this.dict[this.alphabet[y]]=y}else{this.alphabet=q;this.dict=p}}function w(n,y){for(var C in y)if(n===y[C])return C;return null}var q=[];var z=Math.pow(2,8);for(var h=0;h<z;h++)q.push(String.fromCharCode(h));var p={};for(var e=0;e<q.length;e++)p[q[e]]=e;var u=B.Define;u.clazz("qubit.compression.LZW",b);b.prototype.encode=function(n){var y=this.alphabet.length;var C={};var d=[];var A=0;var D=n.charAt(A++);var F;for(var r=this.dict;!!(F=
n.charAt(A++));){var m=D+F;if(r.hasOwnProperty(m)||C.hasOwnProperty(m))D=m;else{var l=r.hasOwnProperty(D)?r[D]:C[D];if(l===undefined)throw"Dictionary base is to small for those contents: "+D;d.push(l);C[m]=y++;D=F}}if(D!=="")d.push(C.hasOwnProperty(D)?C[D]:r[D]);return d};b.prototype.decode=function(n){var y=this.dict;var C=this.alphabet.length;var d;var A={};var D=w(n[0],y);var F=D;var r=[D];for(var m=1;m<n.length;m++){var l=n[m];d=w(l,y);if(d===null){if(A.hasOwnProperty(l))d=A[l];if(d===null)d=
F+D}r.push(d);D=d.charAt(0);A[C++]=F+D;F=d}return r.join("")}})();(function(){function b(r){var m=0;var l=r<0;if(l)r=-r;var f="";var c=true;do{m=r%A;if(c){f=y[d[m]];c=false}else f=d[m]+f;r=(r-m)/A}while(r>0);if(l)return"-"+f;return f}function w(r){var m=0;var l=0;var f=true;for(var c=0;c<r.length;c++){var k=r.charAt(r.length-1-c);if(f){f=false;k=z.charAt(u[k])}m+=p[k]*Math.pow(A,l++)}return m}function q(r){}var z="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"'%./:\x3c\x3e?[";var h="ABCDEFGHIJKLMNOPQRSTUVWXYZ"+
"*!-+()@{|}"+'"]^_`~$\x26#';var p={};for(var e=0;e<z.length;e++)p[z.charAt(e)]=e;var u={};for(var n=0;n<z.length;n++)u[h.charAt(n)]=n;var y={};for(var C=0;C<z.length;C++)y[z.charAt(C)]=h.charAt(C);var d=z.split("");var A=d.length;var D=new B.compression.LZW({});var F=B.Define;F.clazz("qubit.compression.Compressor",q);q.prototype.compress=function(r,m){var l=(m||D).encode(r);var f=[];for(var c=0;c<l.length;c++)f.push(String.fromCharCode(l[c]));return f.join("")};q.prototype.compressAnsi=function(r,
m){var l=(m||D).encode(r);var f=[];for(var c=0;c<l.length;c++){var k=b(l[c]);f.push(k)}return f.join("")};q.prototype.decompressAnsi=function(r,m){var l=[];var f="";for(var c=0;c<r.length;c++){var k=r.charAt(c);if(u.hasOwnProperty(k)){var t=f+k;f="";t=w(t);l.push(t)}else f+=k}return(m||D).decode(l)};q.prototype.decompress=function(r,m){var l=[];for(var f=0;f<r.length;f++)l.push(r.charCodeAt(f));return(m||D).decode(l)}})();(function(){function b(l){var f=[];for(var c=0;c<l.length;c++){var k=p(l[c][0]);
f.push([new RegExp(k,"g"),"*"+l[c][1]])}return f}function w(l,f){for(var c=0;c<f.length;c++)if(f[c][1]===l)return f[c][0];return null}function q(l){this._regexDefs=d;this._defs=C;if(l)if(l.definitions){this._regexDefs=b(l.definitions);this._defs=l.definitions}}function z(l,f){var c=[];for(var k=0;k<l.length;k++){var t=true;if(f)t=l.charCodeAt(k)<=f;var E=y.cookieAlphabetMap.hasOwnProperty(l.charAt(k));if(t&&!E)c.push("*"+l.charCodeAt(k)+".");else c.push(l.charAt(k))}return c.join("")}function h(l,
f){f=f.replace(/@/g,"@@");var c=[];var k=0;for(var t=0;k<l.length;k++){var E=l[k][0];var I=new RegExp(p(E),"g");var L=f.replace(I,"@"+t+"-");if(L!==f){c.push(l[k][0]);t++;f=L}}return[f,c]}function p(l){return l.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function e(l){var f={};var c="";for(var k=0;k<l.length;k++){var t=l.charAt(k);if(!D[t]){if(isNaN(f[c]))f[c]=l.split(c).length-1;c=""}else c+=t}var E=[];for(var I in f)if(f.hasOwnProperty(I)){var L=f[I];if(L>=m&&I.length>=r)E.push([I,L])}E=E.sort(function(Q,
S){if(Q[0].length===S[0].length)return 0;if(S[0].length>Q[0].length)return 1;else return-1});return E}function u(l,f){if(!f||f.length===0||!l)return l;var c="";var k=false;var t=false;var E="";for(var I=0;I<l.length;I++){var L=l.charAt(I);if(L==="@"||k||t)if(k||t){k=false;if(L==="@")c+="@";else if(!isNaN(+("-"+L))){t=true;E=E+L}else if(t){if(f&&L==="-"&&f[+E])c+=f[+E];else c+="@"+E+L;E="";t=false}else c+="@"+L}else k=true;else c+=L}if(E)c+="@"+E;if(k)c+="@";return c}var n=B.Define;var y=B.Cookie;
var C=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],
["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["\x3c","S"],["\x3e","G"],["[","Z"],["]","E"],["{","a"],["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];var d=b(C);n.clazz("qubit.opentag.compression.Encoder",q);q.prototype.encode=function f(c,k){var t=
c.replace(/\*/g,"**");var E=e(t);for(var I=0;I<this._regexDefs.length;I++){var L=this._regexDefs[I];t=t.replace(L[0],L[1])}t=t.replace(/;/g,"*-");t=t.replace(/&/g,"*.");t=t.replace(/\\/g,"*/");t=t.replace(/=/g,"*+");t=t.replace(/\n/g,"*N");t=t.replace(/ /g,"*_");t=t.replace(/\t/g,"*T");t=t.replace(/"/g,"*Q");var Q=e(t);Q.concat(E);var S=h(Q,t);var T=S[1];var U=T.length>0;if(U)t=S[0];if(!k)t=z(t);else t=z(t,k);if(U)return"Y"+T.join("*")+"@"+t;else return"N"+t};var A="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";
var D={};for(var F=0;F<A.length;F++)D[A.charAt(F)]=true;var r=4;var m=2;q.prototype.decode=function(f){var c=null;if(f.charAt(0)==="N")f=f.substring(1);else if(f.charAt(0)==="Y"){var k=f.indexOf("@");if(k>=0){c=f.substring(1,k);c=c.split("*");f=f.substring(k+1);f=u(f,c)}}var t="";var E=false;var I=false;var L="";for(var Q=0;Q<f.length;Q++){var S=f.charAt(Q);if(S==="*"||E||I)if(E||I){E=false;if(!isNaN(+("-"+S))){L=L+S;I=true}else if(I){if(S===".")t+=String.fromCharCode(+L);else if(S==="-"&&w(L+"-",
this._defs))t+=w(L+"-",this._defs);else t+="*"+L+S;L="";I=false}else if(S==="*")t+="*";else if(S==="-")t+=";";else if(S==="/")t+="\\";else if(S===".")t+="\x26";else if(S==="+")t+="\x3d";else if(S==="N")t+="\n";else if(S==="_")t+=" ";else if(S==="T")t+="\t";else if(S==="Q")t+='"';else if(w(S,this._defs)!==null){var T=w(S,this._defs);t+=T}else t+="*"+S}else E=true;else t+=S}if(L)t+="*"+L;if(E)t+="*";return t}})();(function(){function b(h){this.testBinary=false;this.binSupported=z;if(h){this.compressor=
new B.compression.Compressor;this.encoder=new B.opentag.compression.Encoder({})}}var w=B.Define;var q=B.Cookie;var z=false;w.clazz("qubit.opentag.compression.CookieCompressor",b);b.prototype.compress=function(h,p){if(typeof h!=="string"||h==="")return h;var e=this.encoder.encode(h);var u;if(this.binSupported||this.testBinary){var n=this.compressor.compress(e);u='"B'+this.encoder.encode(n,128)+'"';q.set("__qtag_test_bin__",u,undefined,undefined,true);var y=q.get("__qtag_test_bin__",true);q.rm("__qtag_test_bin__");
if(y&&y!==u)u=null}var C;var d=this.encoder.encode(this.compressor.compressAnsi(e));if(!p&&e.length<=d.length)C="E"+e;else C="C"+d;if(u&&u.length<C.length)return u;else return C};b.prototype.decompress=function(h){if(typeof h!=="string"||h==="")return h;if(h.charAt(0)==='"')h=h.substring(1,h.length-1);var p=h.charAt(0);h=h.substring(1);switch(p){case "E":return this.encoder.decode(h);case "C":var e=this.compressor.decompressAnsi(this.encoder.decode(h));return this.encoder.decode(e);case "B":var u=
this.compressor.decompress(this.encoder.decode(h));return this.encoder.decode(u);default:throw"This code is not supported! Code: "+p;}}})();(function(){var b=B.Cookie;var w=B.opentag.Utils;var q=function(){};B.Define.clazz("qubit.opentag.Session",q);var z=new B.opentag.compression.CookieCompressor({});q.readCompressedCookie=function(h){var p=b.get(h,true);return z.decompress(p)};q.setupSession=function(h){var p=h.config;var e;var u;var n;var y;var C;var d;e={};e.sessionCount=P.cookie.SimpleSessionCounter.update(p.cookieDomain);
C="qtag_"+h.getContainerId();var A="x_qtag_"+h.getContainerId();n=b.get(C);var D=!!n;if(n===null){n=b.get(A,true);n=z.decompress(n)}if(n)try{n=V.parse(n)}catch(r){n={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}else n={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}};d=(new Date).getTime();if(e.sessionCount!==parseInt(n.sc,10)){n.sessionStartTime=d;n.sc=e.sessionCount;n.sessionCount+=1;n.referrer.push({url:q.getReferrer(),
landing:w.getUrl().substring(0,300),time:d});n.sessionLandingPage=w.getUrl().substring(0,300)}else if(q.isReferrerDifferent())if(!q.referrerIsSameAsPrevious(n.referrer,d,30*60*1E3)){n.referrer.push({url:q.getReferrer(),landing:w.getUrl().substring(0,300),time:d});n.sessionLandingPage=w.getUrl().substring(0,300);n.sessionStartTime=d;n.sessionCount+=1}e.sessionCount=n.sessionCount;e.sessionStartTime=n.sessionStartTime;e.pageStartTime=d;n.pageViews+=1;e.pageViews=n.pageViews;e.sessionLandingPage=n.sessionLandingPage;
e.referrer=n.referrer;if(e.referrer.length>5)e.referrer.splice(2,e.referrer.length-5);y=V.stringify(n);for(u=0;z.compress(y).length>p.maxCookieLength&&u<5;){if(n.referrer.length>=3)n.referrer.splice(2,1);else if(n.referrer.length===2)n.referrer=[n.referrer[0]];else if(n.referrer.length===1)n.referrer=[];y=V.stringify(n);u+=1}e.referrer=n.referrer;if(D)b.rm(C);var F=z.compress(y);b.rm(A);if(p.maxCookieLength>0)b.set(A,F,365,p.cookieDomain,true);e.setVariable=function(r,m,l){var f=!!l?l:0;n.__v[r]=
[m,f];var c=z.compress(V.stringify(n));if(p.maxCookieLength>0)b.set(A,c,365,p.cookieDomain,true);else b.rm(A)};e.getCookie=function(r,m){var l=b.get(r,true);if(l&&(m||r.indexOf("x_")===0))try{l=z.decompress(l)}catch(f){}else if(l!==null)l=b.decode(l);return l};e.getVariable=function(r){var m;var l;var f;m=n.__v[r];if(m){l=m[1];if(l===0||l>(new Date).getTime())return m[0]}return null};e.on=function(r,m,l){if(m.attachEvent)m.attachEvent("on"+r,l);else if(m.addEventListener)m.addEventListener(r,l,false)};
e.getTagCookie=function(){return q.readCompressedCookie(A)};q.lastSession=e;return e};q.referrerIsSameAsPrevious=function(h,p,e){var u;var n;var y;if(h.length>0){u=q.getReferrer();n=w.getUrl().substring(0,300);y=h[h.length-1];return y.url===u&&y.landing===n&&y.time+e>p}return false};q.isReferrerDifferent=function(){var h;var p;var e;e=q.getReferrer();h=e.indexOf("://");if(h===-1)return true;h+=3;try{if(e.substring(h).indexOf(q.getDomain())!==0)return true;return false}catch(u){return true}};q.getReferrer=
function(){if(document.referrer)return document.referrer.substring(0,300);return"direct"};q.getDomain=function(){return document.location.host}})();(function(){function b(){}var w=B.opentag.LibraryTag;var q=B.Define;b.library=function(){return w.define.apply(w,arguments)};b.libraryRef=function(){return w.getLibraryByClasspath.apply(w.getLibraryByClasspath,arguments)};q.namespace("qubit.Quick",b)})();(function(){function b(r){this.runQueue=[];this.tags=[];this.config={cookieDomain:"",maxCookieLength:1E3,
gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:null,pingServerUrl:null,trackSession:null,disabled:false,containerId:"",scanTags:false,noPings:false,restartable:true};this.ignoreTagsState=false;if(r){this.setConfig(r);if(!r.name)this.config.name="Cont-"+C++;b.register(this);if(b.NO_PINGS)this.config.noPings=true;this.ping=new B.opentag.Ping(this.config);this._sendPingsTrigger=this.sendPings.bind(this);if(r.init)try{r.init.call(this,r)}catch(l){}var m=this;this._tagLoadedHandler=
function(l){if(m._containerAlreadySentPings){m.sendPingsNotTooOften();if(l.success);}}}this.events=new B.Events({});return this}function w(r,m,l,f){if(r[l]){f[l]=f[l]+1||1;l+="("+f[l]+")"}r[l]=m}var q=B.opentag.Utils;var z=B.opentag.filter.BaseFilter;var h=B.opentag.filter.Filter;var p=B.opentag.BaseTag;var e=B.opentag.Timed;var u=B.opentag.Tags;var n=B.opentag.Session;var y=B.Cookie;var C=1;try{window.opentag_consentGiven=function(){b.consentIsGiven=true;var r=b.getContainers();for(var m=0;m<r.length;m++)try{r[m].run()}catch(l){}}.bind(this)}catch(r){}B.Define.clazz("qubit.opentag.Container",
b);var d=[];var A="restart";b.prototype.EVENT_TYPES={RESTART_EVENT:A};b.register=function(r){q.addToArrayIfNotExist(d,r)};b.prototype.isTellingLoadTimes=function(){var r=this.config.tellLoadTimesProbability;if(r===null)r=0;return r>Math.random()};b.prototype.destroy=function(r){this.destroyed=true;this.unregister();for(var m=0;m<this.tags.length;m++){var l=this.tags[m];if(l.owningContainer===this){l.owningContainer=null;if(r&&l instanceof p)l.destroy()}}this.tags=[]};b.destroyAll=function(r){var m=
b.getContainers();for(var l=0;l<m.length;l++)m[l].destroy(r)};b.findContainersByName=function(r){var m=b.getContainers();var l=[];for(var f=0;f<m.length;f++)if(m[f].config.name===r)l.push(m[f]);return l};b.getById=function(r){var m=b.getContainers();for(var l=0;l<m.length;l++)if(m[l].getContainerId()===r)return m[l];return null};b.prototype.unregister=function(r){b.unregister(this,r)};b.unregister=function(r,m){q.addToArrayIfNotExist(d,r);var l=q.removeFromArray(d,r);if(m){for(var f=0;f<r.tags.length;f++){var c=
r.tags[f];if(c.owningContainer===r){c.owningContainer=null;if(c instanceof p)c.unregister()}}r.tags=[]}if(!l||l.length===0);};b.prototype.hasConsent=function(){return y.get("qubitconsent")==="Accepted"};b.prototype.register=function(r){b.register(r||this)};b.getContainers=function(){return d};b.prototype.getContainers=function(){return b.getContainers()};b.prototype.onTagRegistered=function(r){};b.prototype.registerTag=function(r){if(r.owningContainer!==null)return false;else{this.tags.push(r);r.owningContainer=
this;r.onAfter(this._tagLoadedHandler);try{this.onTagRegistered(r)}catch(m){}}return true};b.prototype.unregisterTag=function(r){if(r.owningContainer===this)r.owningContainer=null;for(var m=0;m<this.tags.length;)if(this.tags[m]===r)this.tags.splice(m,1);else m++};b.prototype.registerTags=function(r){for(var m=0;m<r.length;m++)this.registerTag(r[m])};b.prototype.setConfig=function(r){for(var m in r)this.config[m]=r[m]};b.prototype.run=function(r){this.runTags({command:"runOnceIfFiltersPass"},r)};b.prototype.runWithoutFilters=
function(r){this.runTags({command:"run"},r)};b.prototype.containerScriptLoadedSynchronously=function(){var r;var m;var l;var f;var c;f=document.getElementsByTagName("script");for(r=0,m=f.length;r<m;r+=1){l=f[r];c=l.getAttribute("src");if(!!c&&c.indexOf(""+this.config.clientId+"-"+this.getContainerId()+".js")>0)return l.getAttribute("async")===null&&(l.getAttribute("defer")===false||l.getAttribute("defer")===""||l.getAttribute("defer")===null)}return true};b.prototype.prepareSessionIfNeeded=function(){var r=
this.config.trackSession;if(r!==true&&r!==false)for(var m=0;m<this.tags.length;m++){var l=this.tags[m];l.resolveAllDynamicData();var f=l.getFilters();for(var c=0;c<f.length;c++){var k=f[c];if(k instanceof h&&k.isSession()){this.trackSession=true;break}}if(this.trackSession)break}else this.trackSession=r;if(b.TRACK_SESSION)this.trackSession=true;if(this.trackSession)this.session=n.setupSession(this);if(this.session);};b.runtimeCounter=b.runtimeCounter||1;b.prototype.runTags=function(r,m){if(this.destroyed)throw"Container has been destroyed.";
if(!m){if(this.config.disabled){this.sendPingsNotTooOften();return}if(b.LOCKED||q.global().QUBIT_CONTAINERS_LOCKED){this.sendPingsNotTooOften();return}}if(this.onBeforeRun)try{this.onBeforeRun()}catch(L){}var l=!this.containerScriptLoadedSynchronously();var f="runIfFiltersPass";if(r&&r.command)f=r.command;this.runningStarted=(new Date).valueOf();if(this.config.scanTags)if(!this._scanned){this.scanForTags();this._scanned=(new Date).valueOf()}this.prepareSessionIfNeeded();var c=this.getTagsInOrder();
var k="___otctnmk"+b.runtimeCounter++;for(var t=0;t<c.length;t++)try{var E=c[t];if(this.includedToRun(E))this._checkAndRun(E,f,l,k)}catch(L){}e.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),3100);this.waitForAllTagsToFinish();for(var I=0;I<c.length;I++){c[I]._runtimeMarkers[k]=undefined;delete c[I]._runtimeMarkers[k]}};b.prototype.getTagsInOrder=function(){var r=[];for(var m=0;m<this.tags.length;m++){var l=this.tags[m];var f=l.config.priority;if(+f>0){var c=0;for(var k=0;k<r.length;k++){var t=
r[k];if(t){var E=+t.config.priority;if(E>0&&E>f)c++;else break}}r.splice(c,0,l)}else r.push(l)}return r};b.prototype._checkAndRun=function(r,m,l,f){if(!r._runtimeMarkers[f])r._runtimeMarkers[f]=true;else return;var c=r.resolveDependencies();if(c.length>0)for(var k=0;k<c.length;k++)this._checkAndRun(c[k],m,l,f);this._tagRunner(r,m,l)};b.prototype._tagRunner=function(r,m,l){try{if(this.includedToRun(r)){if(l)r.forceAsynchronous=true;if(this.config.delayDocWrite)r.delayDocWrite=true;r.session=r.session||
this.session;r[m]()}}catch(f){}};b.prototype.getContainerId=function(){if(this.config.containerId)return this.config.containerId;else{if(this._pkgName)return this._pkgName;var r=this.PACKAGE_NAME.split(".");r=r[r.length-1];this._pkgName=r;return r}};b.prototype.includedToRun=function(r){if(!r)return false;var m=r.config;if(m.inactive)return false;if(m.disabled)if(!r.cookieSaysToRunEvenIfDisabled())return false;if(r.disabledByCookie())return false;var l=b.consentIsGiven||!m.needsConsent||this.hasConsent();
var f=r.state===p.prototype.STATE.INITIAL;return this.ignoreTagsState||l&&f};b.prototype.scanForTags=function(r,m){if(r)this.tags=[];var l;if(m&&typeof m==="object")l=this.findAllTags(m);else l=this.findAllTagsByClassPath();this.registerTags(l);return l};b.prototype.findAllTags=function(r,m){r=r||this.tagsPackageName||this.PACKAGE_NAME;return u.findAllTags(r,m)};b.prototype.findAllTagsByClassPath=function(r){r=r||this.PACKAGE_NAME;return u.findAllTagsByClassPath(r)};b.prototype.findAllFilters=function(r,
m){r=r||this.tagsPackageName||this.PACKAGE_NAME;return u.findAllFilters(r,m)};b.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting)return;if(!this._lastWaited)this._lastWaited=(new Date).valueOf();var r=(new Date).valueOf()-this._lastWaited>15*1E3;var m=this.allTagsFinished()||r;if(!this._showFinishedOnce&&m){this._lastWaited=null;if(r);this._showFinishedOnce=true;this.runningFinished=(new Date).valueOf();this._containerAlreadySentPings=(new Date).valueOf();this.sendPingsNotTooOften();
if(this.onTagsInitiallyRun)this.onTagsInitiallyRun()}else if(!m){this._waitForAllTagsToFinishWaiting=true;this._showFinishedOnce=false;e.setTimeout(function(){this._waitForAllTagsToFinishWaiting=false;this.waitForAllTagsToFinish()}.bind(this),100)}else;};b.prototype.onTagsInitiallyRun=R;b.prototype.resetAllTags=function(r){for(var m=0;m<this.tags.length;m++){this.tags[m].reset();if(!r)this.tags[m].resetFilters()}};b.prototype._prepareTagsToRestart=function(r){for(var m=0;m<this.tags.length;m++)this.tags[m].prepareForRestart(r)};
b.prototype.reset=function(r,m){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=undefined;if(!r)this.resetAllTags(m)};b.prototype.onRestart=function(r){this.events.on(A,r)};b.prototype.restart=function(r,m){if(this.config.restartable){this.events.call(A,this);this.reset(true,true);if(!r)this._prepareTagsToRestart(m);this.run()}};b.restartAll=function(r,m){var l=b.getContainers();for(var f=0;f<l.length;f++)try{l[f].restart(r,
m)}catch(c){log.ERROR("Restart failed for container "+l[f].config.name,c)}};b.resetAll=function(r,m){var l=b.getContainers();for(var f=0;f<l.length;f++)try{l[f].reset(r,m)}catch(c){log.ERROR("Reset failed for container "+l[f].config.name,c)}};b.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||{};e.runIfNotScheduled(this._sendPingsTrigger,2E3,this._sndLck)};b.prototype.sendPings=function(){if(this.config.noPings)return;var r;if(this.isTellingLoadTimes()){var m=this.getAllTagsByState();
var l=[];if(m.run)l=u.getLoadTimes(m.run);this.lastPingsSentTime=(new Date).valueOf();this.ping.send(this,l);l=u.getLoadTimes();var f=[];for(r=0;r<l.length;r++){var c=l[r].tag;if(c.config.dedupe&&c.sendDedupePing)f.push(c)}if(f.length>0){this.lastDedupePingsSentTime=(new Date).valueOf();this.ping.sendDedupe(this,f)}if(m.other){l=u.getLoadTimes(m.other);var k=[];for(r=0;r<l.length;r++)k.push(l[r]);if(k.length>0)this.ping.send(this,k)}if(m.awaiting){l=u.getLoadTimes(m.awaiting);var t=[];for(r=0;r<l.length;r++)t.push(l[r]);
if(t.length>0)this.ping.send(this,t)}}else this.ping.send(this,[])};b.prototype.getAllTagsByState=function(){return b.getAllTagsByState(this.tags)};b.getAllTagsByState=function(r){var m=null;var l=null;var f=null;var c=null;var k=null;var t=null;var E={};var I=p.prototype.STATE.EXECUTED_WITH_ERRORS;for(var L=0;L<r.length;L++){var Q=r[L];if(Q instanceof p){var S=Q.config.name;if(Q.scriptExecuted>0){m=m||{};w(m,Q,S,E)}else if(Q.locked){t=t||{};w(t,Q,S,E)}else if(Q.scriptExecuted<0||Q.state>=I){c=c||
{};w(c,Q,S)}else if(Q.filtersState()===z.state.SESSION||Q.filtersState()>0){f=f||{};w(f,Q,S,E)}else if(Q.config.needsConsent){k=k||{};w(k,Q,S,E)}else{l=l||{};w(l,Q,S,E)}}}return{run:m,failed:c,awaiting:f,consent:k,locked:t,other:l}};b.prototype.allTagsFinished=function(){for(var r=0;r<this.tags.length;r++){var m=this.tags[r];if(m instanceof B.opentag.BaseTag){var l=m.filtersState();if(!m.config.disabled){var f=m.filtersState()<0&&!m.locked;var c=!(m.finished()||m.config.runner&&!m.isRunning);if(f&&
c){var k=l!==z.state.SESSION;var t=+m.awaitingDependencies>0;if(k&&!t)return false}}}}return true};b.prototype.getPageVariables=function(){var r=[];for(var m=0;m<this.tags.length;m++){var l=this.tags[m].getPageVariables();for(var f=0;f<l.length;f++)q.addToArrayIfNotExist(r,l[f])}return r};b.getPageVariableByName=function(r){var m=this.getAllPageVariables();var l=[];for(var f=0;f<m.length;f++)if(m[f].config.name===r)l.push(m[f]);return l};var D="qubit.opentag.disableContainerRunning_";var F="qubit.opentag.forceContainerRunning";
b.prototype._getCookieNameForDisabling=function(){return D+this.getContainerId()+this.config.name};b.prototype.disabledByCookie=function(){return!!y.getCached(this._getCookieNameForDisabling())};b.prototype.setCookieToDisable=function(){y.set(this._getCookieNameForDisabling(),"true");y.resetCache()};b.prototype.rmCookieToDisable=function(){y.rm(this._getCookieNameForDisabling());y.resetCache()};b.rmAllDisablingCookies=function(){q.rmCookiesMatching(D);y.resetCache()};b.setCookieForDisabledContainersToRun=
function(){y.set(F,"true");y.resetCache()};b.rmCookieForDisabledContainersToRun=function(){y.rm(F);y.resetCache()}})();(function(){function b(){}function w(){var y=false;if(u.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=0)y=true;return y}function q(){var y=false;if(u.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=0)y=true;return y}function z(){try{var y=J.TAGSDK_MAIN_DISABLED_FUNCTION;if(y&&y())return true}catch(C){}if(document.location.href.indexOf("opentag_disabled\x3dtrue")>=
0)return true;return false}function h(y,C,d){if(d&&(y[C]===undefined||y[C]===""||y[C]===null))y[C]=d}function p(y){var C=y.PACKAGE_NAME.split(".");C=C[C.length-1];var d=n.getParentObject(y.PACKAGE_NAME);d[C]=null;delete d[C]}function e(y){var C=n.getParentObject(y.PACKAGE_NAME);var d=C.ClientConfig;if(d&&d.clientId)return d.clientId;else{var A=y.PACKAGE_NAME.split(".");return A[A.length-2].substring(1)}}var u=B.Cookie;var n=B.opentag.Utils;B.opentag.Log.setLevelFromCookie();b.run=function(){var y=
false;if(z())return;var C=false;var d=q();var A=d||w();if(!C&&A){if(!B.DEBUG_MODE)J.TAGSDK_NS_OVERRIDE=true;else J.TAGSDK_NS_OVERRIDE=false;y=true}if(B.DEBUG_MODE)J.TAGSDK_NS_OVERRIDE=false;try{P.html.UVListener.init()}catch(D){}b.runAllContainers(y)};b.runAllContainers=function(y){try{var C=B.opentag.Container.getContainers();for(var d=0;d<C.length;d++){var A=C[d];var D=A.config;if(!A.runningStarted&&!A.configuredInMain){D.scanTags=true;var F=n.getParentObject(A.PACKAGE_NAME).ClientConfig;if(F)h(A.config,
"clientId",F.id);var r=n.getParentObject(A.PACKAGE_NAME).SystemDefaults;if(r){h(D,"pingServerUrl",r.pingServerUrl);h(D,"tellLoadTimesProbability",r.tellLoadTimesProbability)}A.configuredInMain=true;if(y){A.destroy(true);p(A);b.loadDebugVersion(A)}else if(!J.QUBIT_OPENTAG_STOP_MAIN_EXECUTION)A.run();else(function(){var m=B.opentag.RUN_STOPPED_EXECUTON;B.opentag.RUN_STOPPED_EXECUTON=function(){try{if(m)m()}finally{A.run()}}})(A)}}}catch(m){}};b.loadDebugVersion=function(y){var C=document.createElement("script");
var d;var A=y.config.scriptURL;var D=e(y);var F=y.getContainerId();if(A){d=A;var r="-debug.js".length;if(d.lastIndexOf("-debug.js")!==d.length-r){d=d.substring(0,d.length-".js".length);d+="-debug.js"}}var m="//d3c3cq33003psk.cloudfront.net/opentag-"+D+"-"+F+"-debug.js";if(d&&m!==d)C.src=d;else C.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+D+"-"+F+"-debug.js";document.getElementsByTagName("head")[0].appendChild(C)};B.Define.namespace("qubit.opentag.Main",b)})()})()})();(function(){})();
(function(){var x=qubit.opentag.Container;var a=new x({"maxCookieLength":"50","cookieDomain":"","pingServerUrl":"","delayDocWrite":false,"name":"[L] [Mag] Vhols","gzip":true,"disabled":false,"tellLoadTimesProbability":1,"containerId":1611273});var v="livemagnoliavirginholidays.Container";qubit.Define.clientNamespace(v,a)})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Wonderlist","pattern":"wonderlist","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeWonderlist";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"ResponseTap Cookie"});var v="livemagnoliavirginholidays.filters.ResponseTapCookie";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude OfferSort\x3dDisabled","pattern":"OfferSort\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeOfferSortDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Wonderlist","pattern":"/wonderlist","patternType":"CONTAINS","priority":3});var v="livemagnoliavirginholidays.filters.Wonderlist";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Hotjar\x3dDisabled","pattern":"Hotjar\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeHotjarDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude VWO\x3dDisabled Cookie"});var v="livemagnoliavirginholidays.filters.ExcludeVWODisabledCookie";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=function(J){return J.getCookie("ExcludeVWO")||""};a.lexicalPattern='{"rows":[{"operators":[],"starters":[],"variables":[{"type":"cookie","comparator":"0","value":["ExcludeVWO",""]}]}],"operators":["or"]}'})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude PhonePrem\x3dDisabled","pattern":"PhonePrem\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludePhonePremDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Not on Payments","pattern":"/checkout","patternType":"CONTAINS","priority":5});var v="livemagnoliavirginholidays.filters.NotOnPayments";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Facebook\x3dDisabled","pattern":"Facebook\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeFacebookDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Qubit\x3dDisable and Infinity\x3dYes","priority":2});var v="livemagnoliavirginholidays.filters.ExcludeQubitDisableAndInfinityYes";qubit.Define.clientNamespace(v,a);a.customStarter=function(J,N){N(false)};a.customScript=function(J){return document.location.href.indexOf&&document.location.href.indexOf("Qubit\x3dDisable")>=0};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "currentUrl",\n            "comparator": "3",\n            "value": "Qubit\x3dDisable"\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Neustar\x3dDisabled","pattern":"Neustar\x3dDisabled"});var v="livemagnoliavirginholidays.filters.NeustarDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude GoogleRemarketing\x3dDisabled","pattern":"GoogleRemarketing\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeGoogleRemarketingDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Multi Destination Form Lightbox","pattern":"multi-centre-form","patternType":"ENDS_WITH"});var v="livemagnoliavirginholidays.filters.ExcludeMultiDestinationFormLightbox";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Outrigger Hotel Page","pattern":"http://www.virginholidays.co.uk/destinations/florida/gulf-coast-beaches/fort-myers/outrigger-beach-resort-browse"});var v="livemagnoliavirginholidays.filters.IncludeOutriggerHotelPage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Destinations Offers Pages","pattern":"((.*)\\/destinations\\/(.*)\\-offers|special\\-offers(.*))","patternType":"REGULAR_EXPRESSION","priority":3});var v="livemagnoliavirginholidays.filters.DestinationsOffersPages1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Include: St Petes and Clearwater","pattern":"/destinations/florida/gulf-coast-beaches/clearwater-and-st-pete-holidays","patternType":"CONTAINS","priority":3});var v="livemagnoliavirginholidays.filters.DestinationsOffersPages";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Flashtalking\x3dDisabled","pattern":"Flashtalking\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeFlashtalkingDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Accuen\x3dDisabled","pattern":"Accuen\x3dDisabled"});var v="livemagnoliavirginholidays.filters.ExcludeAccuenDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Checkout","pattern":"/checkout"});var v="livemagnoliavirginholidays.filters.ExcludeCheckout";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"HotelPOCOn"});var v="livemagnoliavirginholidays.filters.HotelPOCOn";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=function(J){return(J.getCookie("showPOCContent")||"")==="Yes"};a.lexicalPattern='{"rows":[{"operators":[],"starters":[],"variables":[{"type":"cookie","comparator":"1","value":["showPOCContent","Yes"]}]}],"operators":[]}'})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Non Bookflow or Wonderlist","pattern":"www\\.virginholidays\\.co\\.uk\\/(hotel\\/|flydrive\\/|holiday\\/|wonderlist|payment|checkout\\/)","patternType":"REGULAR_EXPRESSION","priority":3});var v="livemagnoliavirginholidays.filters.NonBookflowOrWonderlist";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Coremetrics\x3dDisabled","pattern":"Coremetrics\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeCoremetricsDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude OfferSort\x3dDisabled","pattern":"OfferSort\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeOfferSortDisabled1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"SaleCycle\x3dDisabled","pattern":"SaleCycle\x3dDisabled"});var v="livemagnoliavirginholidays.filters.SaleCycleDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Excluding Qubit\x3dDisable","pattern":"Qubit\x3dDisable","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludingQubitDisable1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude TrackingEvents\x3dDisabled","pattern":"TrackingEvents\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeTrackingEventsDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"www.virginholidays.co.uk","pattern":"www.virginholidays.co.uk"});var v="livemagnoliavirginholidays.filters.WwwVirginholidaysCoUk";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude signup.","pattern":"signup.virginholidays.co.uk"});var v="livemagnoliavirginholidays.filters.ExcludeSignup";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Qubit\x3dDisable","pattern":"Qubit\x3dDisable","patternType":"CONTAINS","priority":2});var v="livemagnoliavirginholidays.filters.ExcludeQubitDisable1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Florida destinaiton","pattern":"/destinations/florida-holidays","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.FloridaDestinaiton";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Dream Ticket","priority":2});var v="livemagnoliavirginholidays.filters.DreamTicket";qubit.Define.clientNamespace(v,a);a.customStarter=function(J,N){N(false)};a.customScript=function(J){return document.location.href.indexOf&&document.location.href.indexOf("where-to-go-on-holiday")>=0};a.lexicalPattern='{"rows":[{"variables":[{"type":"currentUrl","comparator":"3","value":"where-to-go-on-holiday"}],"starters":[],"operators":[]}],"operators":[]}'})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var v="livemagnoliavirginholidays.filters.DefaultFilterMatchAll";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Cookie\x3dDisabled","pattern":"Cookie\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeCookieDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude VWO\x3dDisabled","pattern":"VWO\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeVWODisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"ResponseTap\x3dDisabled","pattern":"ResponseTap\x3dDisabled"});var v="livemagnoliavirginholidays.filters.ResponseTapDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Destinations","pattern":"/destinations/"});var v="livemagnoliavirginholidays.filters.IncludeDestination";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Bookflows","pattern":"(http|https)\\:\\/\\/www\\.virginholidays\\.co\\.uk\\/(holiday\\/|hotel\\/|flydrive\\/|car\\/|payments)(.*)","patternType":"REGULAR_EXPRESSION","priority":3});var v="livemagnoliavirginholidays.filters.Bookflows";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Excluding Qubit\x3dDisable","pattern":"Qubit\x3dDisable","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludingQubitDisable";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude MovableInk\x3dDisabled","pattern":"MovableInk\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeMovableInkDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude PhoneBrowse\x3dDisabled","pattern":"PhoneBrowse\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludePhoneBrowseDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Magnolia Interface","pattern":"mgnlauth-vhols"});var v="livemagnoliavirginholidays.filters.ExcludeMagnoliaInterface";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"SaleCycle\x3dOn","pattern":"SaleCycle\x3dOn"});var v="livemagnoliavirginholidays.filters.SaleCycleOn";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Infinity\x3dDisabled","pattern":"Infinity\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeInfinityDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Not on Customer Support","pattern":"/customer-service","patternType":"CONTAINS","priority":6});var v="livemagnoliavirginholidays.filters.NotOnCustomerSupport";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Content Square Test Cookie"});var v="livemagnoliavirginholidays.filters.ContentSquareTestCookie";qubit.Define.clientNamespace(v,a);a.customStarter=function(J,N){N()};a.customScript=function(J){return!document.cookie.match("contentSquareTest")};a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Tour Callback Lightbox","pattern":"/tours-callback","patternType":"ENDS_WITH"});var v="livemagnoliavirginholidays.filters.ExcludeTourCallbackLightbox";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":3});var v="livemagnoliavirginholidays.filters.DefaultFilterMatchAll2";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Forward3D\x3dDisabled","pattern":"Forward3D\x3dDisabled"});var v="livemagnoliavirginholidays.filters.Forward3DDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Live Hotel Options Page","pattern":"https\\:\\/\\/www\\.virginholidays\\.co\\.uk\\/holiday\\/(.*)\\/options","patternType":"REGULAR_EXPRESSION"});var v="livemagnoliavirginholidays.filters.IncludeLiveHotelOptionsPage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Bookflow","priority":3});var v="livemagnoliavirginholidays.filters.ExcludeBookflow";qubit.Define.clientNamespace(v,a);a.customStarter=function(J,N){N(false)};a.customScript=function(J){return document.location.href.indexOf&&document.location.href.indexOf("/holiday/")>=0||document.location.href.indexOf&&document.location.href.indexOf("/hotel/")>=0||document.location.href.indexOf&&document.location.href.indexOf("/car/")>=
0||document.location.href.indexOf&&document.location.href.indexOf("/flydrive/")>=0};a.lexicalPattern='{"rows":[{"variables":[{"type":"currentUrl","comparator":"3","value":"/holiday/"},{"type":"currentUrl","comparator":"3","value":"/hotel/"},{"type":"currentUrl","comparator":"3","value":"/car/"},{"type":"currentUrl","comparator":"3","value":"/flydrive/"}],"starters":[],"operators":["or","or","or"]}],"operators":[]}'})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Not on Homepage","pattern":"^(http|https)\\:\\/\\/www\\.virginholidays\\.co\\.uk\\/($|\\?(.*)$)","patternType":"REGULAR_EXPRESSION","priority":7});var v="livemagnoliavirginholidays.filters.NotOnHomepage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Twitter\x3dDisabled","pattern":"Twitter\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeTwitterDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Hotjar\x3dDisabled","pattern":"Hotjar\x3dDisabled"});var v="livemagnoliavirginholidays.filters.HotjarDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":".virginholidays.co.uk","pattern":".virginholidays.co.uk"});var v="livemagnoliavirginholidays.filters.VirginholidaysCoUk";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Sojern\x3dDisabled","pattern":"Sojern\x3dDisabled"});var v="livemagnoliavirginholidays.filters.ExcludeSojernDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude ResponseTap\x3dYes","pattern":"ResponseTap\x3dYes"});var v="livemagnoliavirginholidays.filters.ExcludeResponseTapYes";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude PromoPricePoint\x3dDisabled","pattern":"PromoPricePoint\x3dDisabled"});var v="livemagnoliavirginholidays.filters.ExcludePromoPricePointDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Order Brochure Page","pattern":"virginholidays.co.uk/order-brochure"});var v="livemagnoliavirginholidays.filters.IncludeOrderBrochurePage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude mojoquiz","pattern":"mojoquiz.virginholidays.co.uk","patternType":"CONTAINS","priority":6});var v="livemagnoliavirginholidays.filters.ExcludeMojoquiz";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude MMB","pattern":"/yourbooking"});var v="livemagnoliavirginholidays.filters.ExcludeMMB";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude C2C Windows","pattern":"(click\\-to\\-chat|find\\-an\\-expert)(.*)","patternType":"REGULAR_EXPRESSION"});var v="livemagnoliavirginholidays.filters.ExcludeC2CWindows";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=function(J){return true};a.lexicalPattern='{"rows":[],"operators":[]}'})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Snapchat\x3dDisabled","pattern":"Snapchat\x3dDisabled"});var v="livemagnoliavirginholidays.filters.SnapchatDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Virgin Holidays Experiences","pattern":"virgin-holidays-experiences"});var v="livemagnoliavirginholidays.filters.IncludeVirginHolidaysExperiences";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude GoogleAnalytics\x3dDisabled","pattern":"GoogleAnalytics\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeGoogleAnalyticsDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"No Mobile","priority":4});var v="livemagnoliavirginholidays.filters.NoMobile";qubit.Define.clientNamespace(v,a);a.customStarter=function(J,N){N()};a.customScript=function(J){return navigator.userAgent.match("iPhone")||navigator.userAgent.match("Android")||navigator.userAgent.match("Windows Phone")};a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include UAT Hotel Options Page","pattern":"https\\:\\/\\/vhols\\-uat\\.webdev\\.vholsinternal\\.co\\.uk\\/holiday\\/(.*)\\/options","patternType":"REGULAR_EXPRESSION"});var v="livemagnoliavirginholidays.filters.IncludeHotelOptionsPage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"CommissionJunction\x3dDisabled","pattern":"CommissionJunction\x3dDisabled"});var v="livemagnoliavirginholidays.filters.CommissionJunctionDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Usabilla\x3dDisabled","pattern":"Usabilla\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeUsabillaDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Pridecompetition","pattern":"www.virginholidays.co.uk/pridecompetition"});var v="livemagnoliavirginholidays.filters.IncludePridecompetition";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Contact Us","pattern":"/contact-us","patternType":"CONTAINS","priority":4});var v="livemagnoliavirginholidays.filters.ExcludeContactUs";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Camden Beach","pattern":"www.virginholidays.co.uk/atasteofbarbados"});var v="livemagnoliavirginholidays.filters.IncludeCamdenBeach";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Qubit\x3dDisable","pattern":"Qubit\x3dDisable","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeQubitDisable";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude CTAChanges\x3dDisabled","pattern":"CTAChanges\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeCTAChangesDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Dreamticket\x3dDisabled","pattern":"Dreamticket\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeDreamticketDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Tour","pattern":"tour"});var v="livemagnoliavirginholidays.filters.IncludeTour";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude BoldChat\x3dDisabled","pattern":"BoldChat\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeBoldChatDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Include: prem-plus","pattern":"prem-plus","patternType":"CONTAINS","priority":3});var v="livemagnoliavirginholidays.filters.IncludePremPlus";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Destinations","pattern":"destinations"});var v="livemagnoliavirginholidays.filters.Destinations";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include Hotel Browse Page","patternType":"ALL_URLS"});var v="livemagnoliavirginholidays.filters.IncludeHotelBrowsePage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=function(J){return document.location.href.indexOf&&document.location.href.indexOf("-browse")>=0&&(document.location.href.indexOf&&document.location.href.indexOf("/destinations/")>=0)};a.lexicalPattern='{"rows":[{"operators":["and"],"starters":[],"variables":[{"type":"currentUrl","comparator":"3","value":"-browse"},{"type":"currentUrl","comparator":"3","value":"/destinations/"}]}],"operators":[]}'})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"All URLs","pattern":"book.virginholidays.co.uk","patternType":"ALL_URLS","priority":2});var v="livemagnoliavirginholidays.filters.AllURLs3";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Pinterest\x3dDisabled","pattern":"Pinterest\x3dDisabled"});var v="livemagnoliavirginholidays.filters.PinterestDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Caribbean destination","pattern":"/destinations/caribbean-holidays","patternType":"CONTAINS","priority":2});var v="livemagnoliavirginholidays.filters.CaribbeanDestination";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Fixes\x3dDisabled","pattern":"Fixes\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeFixesDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var v="livemagnoliavirginholidays.filters.DefaultFilterMatchAll1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":true,"name":"Include Homepage","pattern":"(http|https)\\:\\/\\/www\\.virginholidays\\.co\\.uk($|\\/$|\\?(.*)$|\\/\\?(.*)$)","patternType":"REGULAR_EXPRESSION","priority":4});var v="livemagnoliavirginholidays.filters.Homepage1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude planitmojo","pattern":"planitmojo.virginholidays.co.uk","patternType":"CONTAINS","priority":5});var v="livemagnoliavirginholidays.filters.ExcludePlanitmojo";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"LinkedIn\x3dDisabled","pattern":"LinkedIn\x3dDisabled"});var v="livemagnoliavirginholidays.filters.LinkedInDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"name":"Include ResponseTap\x3dYes","pattern":"ResponseTap\x3dYes"});var v="livemagnoliavirginholidays.filters.ResponseTapYes";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.filter.Filter;var a=new x({"include":false,"name":"Exclude Storm\x3dDisabled","pattern":"Storm\x3dDisabled","patternType":"CONTAINS","priority":1});var v="livemagnoliavirginholidays.filters.ExcludeStormDisabled";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"prePostWindowScope":false,"name":"Special Offer Overrides","disabled":true,"locked":false,"locationObject":"HEAD"});var v="livemagnoliavirginholidays.tags.specialofferoverrides.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DestinationsOffersPages1",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable1","livemagnoliavirginholidays.filters.ExcludeOfferSortDisabled1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){if(!!~location.pathname.indexOf("/destinations/florida/orlando/walt-disney-world-offers")&&typeof bannerAdded==="undefined"){var J=document.createElement("A");J.className="col-xs-12 standard-image";J.href="/special-offers/disney";J.innerHTML=
"\x3cimg style\x3d'width:100%;' src\x3d'/dam/virginholidays/destinations/florida/orlando/disney/landing-page_disney_dine_2017.jpg'\x3e";document.querySelectorAll(".search-result-sort")[0].parentNode.insertBefore(J,document.querySelectorAll(".search-result-sort")[0]);bannerAdded=1}};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Sale Cycle","disabled":false});var v="livemagnoliavirginholidays.tags.salecycle.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.SaleCycleDisabled","livemagnoliavirginholidays.filters.ExcludeSignup"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=
[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function J(){try{var B=document.createElement("script");B.type="text/javascript";B.async=true;B.src="https://s.salecycle.com/virginholidays/bundle.js";document.getElementsByTagName("head")[0].appendChild(B)}catch(H){}}var N=Math.floor(Math.random()*100+1);if(!localStorage.getItem("longRunSaleCycleVariant"))localStorage.setItem("longRunSaleCycleVariant",N);if(localStorage.getItem("longRunSaleCycleVariant")<=95)J()};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"CRO Tests","disabled":false});var v="livemagnoliavirginholidays.tags.crotests.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"async":true,"usesDocumentWrite":false,"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"name":"CRO Changes","active":true,"disabled":true,"locked":false,"locationObject":"HEAD","url":"","timeout":5E3});var v="livemagnoliavirginholidays.tags.crochanges.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\n\tfunction toTitleCase(str) {\n  \treturn str.replace(\n  \t\t/\\w\\S*/g,\n  \t\tfunction(txt) {\n  \t\t\treturn txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  \t\t}\n  \t);\n  }\n  \n  function changeForVoyages(){\n  \ttry {\n  \t\tvar cruiseName \x3d toTitleCase(document.location.pathname.split("/")[3].replace(/-/g, " "));\n  \t\tfor (var i \x3d 0; i \x3c document.querySelectorAll(".summary-title").length; i++){\n  \t\t\tdocument.querySelectorAll(".summary-title")[i].innerHTML \x3d \'\x3cspan class\x3d"location heading-lg"\x3e\' + cruiseName + \'\x3c/span\x3e\';\n  \t\t}\n  \t\tdocument.querySelectorAll(".timeline-intro h2")[0].innerHTML \x3d "Your voyage details";\n  \t\tdocument.querySelectorAll(".timeline-intro p strong")[0].innerHTML \x3d "The following components are included in the price."\n  \t\tdocument.querySelectorAll(\'.content-slider section.toggled\')[document.querySelectorAll(\'.content-slider section.toggled\').length-1].setAttribute("style","display:none!important;")\n  \t\tfor(var i \x3d 0; i \x3c document.querySelectorAll(".button-tertiary").length; i++){\n  \t\t\tif(document.querySelectorAll(".button-tertiary")[i].parentNode.parentNode.parentNode.querySelectorAll("h3").length \x3e 0){\t\t\n  \t\t\t\tif(document.querySelectorAll(".button-tertiary")[i].parentNode.parentNode.parentNode.querySelectorAll("h3")[0].innerText \x3d\x3d "Virgin Voyages"){\n  \t\t\t\t\tdocument.querySelectorAll(".button-tertiary")[i].setAttribute("style","display:none!important;");\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t} catch (ignore) {}\n  }\n  \n  \n  // THIS IS THE LIST OF CRUISES TO INCLUDE\n  var isVirginVoyageCruise \x3d !!~document.location.pathname.indexOf("5-night-havana-after-dark-voyage") || !!~document.location.pathname.indexOf("4-night-havana-after-dark-voyage") || !!~document.location.pathname.indexOf("5-night-mayan-sol-voyage") || !!~document.location.pathname.indexOf("5-night-dominican-daze-voyage");\n  \n  if(document.location.pathname.split("/")[1] \x3d\x3d "multidestination" \x26\x26 isVirginVoyageCruise){\n  \tchangeForVoyages();\n  \tif (typeof(voyagesHackJob) \x3d\x3d\x3d "undefined") {\n  \t\twindow.addEventListener("message",function(message){\n  \t\t\tif(message \x26\x26 message.data \x3d\x3d "repaint"){\n  \t\t\t\tchangeForVoyages();\n  \t\t\t}\n  \t\t});\n  \t\tvar voyagesHackJob \x3d true;\n  \t}\n  }\n\x3c/script\x3e';
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll2","livemagnoliavirginholidays.filters.ExcludeQubitDisable1","livemagnoliavirginholidays.filters.ExcludeCTAChangesDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":false,"url":"","timeout":5E3,"async":false,"usesDocumentWrite":false,"name":"Google Remarketing - Sync","disabled":false,"id":54256587,"locked":false,"locationObject":"HEAD"});var v="livemagnoliavirginholidays.tags.heathrowcampaign.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeGoogleRemarketingDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){(function(){function J(V,P,ea){var da=new Image(1,1);da.src="//www.googleadservices.com/pagead/conversion/"+V+"/?label\x3d"+P+"\x26currency_code\x3dGBP\x26value\x3d"+ea}var N=universal_variable||{};var B=N.page||{};var H=N.payment||
{};var R=N.transaction||{};var Z=R.totalPrice||R.totalPrice||"1";if(B.name==="Confirmation")J("882356781","O2gxCICDr2YQreTepAM",Z)})()};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"www.google-analytics.com/analytics.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"prePostWindowScope":false,"name":"Google Analytics","disabled":false,"id":40003813,"locked":false,"locationObject":"BODY"});var v="livemagnoliavirginholidays.tags.googleanalytics.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeGoogleAnalyticsDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["livemagnoliavirginholidays.tags.onsitesearchhide.Tag"]);a.pre=function(){function J(N){return(N<10?"0":"")+N}(function(){var N=true;if(!!window.Storage){var B=JSON.parse(localStorage.getItem("_tab_ids"));var H=sessionStorage.getItem("_tab_id");var R=JSON.parse(sessionStorage.getItem("_nav_path"));
var Z=document.location.href;var V=false;var P=document.location.origin;var ea;var da;var ba;var Y;var ha;var M;var g=function(){if(N===false)return"BACK/FORWARD";if(R.length<2)return"FORWARD";Y=R[R.length-2];ha=R[R.length-1];if(Y===Z||ha===Z)return"BACK";else return"FORWARD"};var b=function(){var z;B=JSON.parse(localStorage.getItem("_tab_ids"));H=sessionStorage.getItem("_tab_id");if(B!==null&&H!==null){z=B.indexOf(H);if(z>-1)B.splice(z,1);localStorage.setItem("_tab_ids",JSON.stringify(B))}};var w=
function(){var z=(new Date).getTime();if(typeof performance!=="undefined"&&typeof performance.now==="function")z+=performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var p=(z+Math.random()*16)%16|0;z=Math.floor(z/16);return(h==="x"?p:p&3|8).toString(16)})};var q=function(z,h){return!(h===true&&(z!==0&&z!==255))};if(H===null){H=w();V=true;sessionStorage.setItem("_tab_id",H)}B=B||[];if(B.indexOf(H)===-1){B.push(H);localStorage.setItem("_tab_ids",JSON.stringify(B))}ea=
B.length;if(!!window.PerformanceNavigation){R=R||[];da=window.performance.navigation.redirectCount;if(q(window.performance.navigation.type,V))switch(window.performance.navigation.type){case 0:ba="NAVIGATE";R.push(Z);break;case 1:ba="RELOAD";if(R.length===0||R[R.length-1]!==Z)R.push(Z);break;case 2:ba=g();if(ba==="FORWARD"){if(document.referrer.indexOf(P)>-1)R.push(Z)}else if(ba==="BACK"){if(ha!==Z)R.pop()}else R.push(Z);break;default:ba="OTHER";R.push(Z)}else R.push(Z);sessionStorage.setItem("_nav_path",
JSON.stringify(R))}window.addEventListener("beforeunload",b);navigationVariables={tabCount:ea,redirectCount:da,navigationType:ba,newTab:V===true?"New":"Existing",tabId:H}}})()};a.script=function(){};a.post=function(){function J(K){return(K<10?"0":"")+K}function N(K){var G=K.getDate();var O=K.getMonth()+1;var ca=K.getFullYear();return""+(G<=9?"0"+G:G)+"-"+(O<=9?"0"+O:O)+"-"+ca}function B(K){return typeof K!=="undefined"}function H(K,G){var O=K;G.split(".").forEach(function(ca){O=B(O[ca])?O[ca]:""});
return O}if(!!~location.host.indexOf("virginholidays.co.uk")){ga("create","UA-1509342-1",".virginholidays.co.uk",{"siteSpeedSampleRate":100});ga("require","GTM-KJVKH3Q");gaCMCID="90225614"}else if(!!~document.location.hostname.indexOf("virginatlantictravelplus.com")||!!~document.location.hostname.indexOf("virginatlantic.com")){ga("create","UA-48589193-1",".virginatlantic.com",{"siteSpeedSampleRate":100});ga("require","GTM-WVVCD4R");gaCMCID="90383446"}else{ga("create","UA-38812021-1",document.location.hostname,
{"siteSpeedSampleRate":100});ga("require","GTM-K6G38NC")}ga("require","displayfeatures");ga("require","ec","ec.js");try{if(!!~document.cookie.indexOf("CoreID6\x3d")){gaCMUserID=document.cookie.split("CoreID6\x3d")[1].split("\x26")[0].split(";")[0];ga("set",{"dimension26":gaCMUserID})}}catch(K){}try{if(localStorage.getItem("HOTLIST_STORE")){var R=JSON.parse(localStorage.getItem("HOTLIST_STORE"));if(R.lists){var Z=R.lists.length;ga("set",{"dimension55":Z})}}}catch(K){}try{gaCMCIDFull=gaCMCID+"_clogin";
if(!!~document.cookie.indexOf(gaCMCIDFull)){gaCMSessionID=document.cookie.split(gaCMCIDFull)[1].split("l\x3d")[1].split("\x26")[0].split(";")[0];ga("set",{"dimension27":gaCMSessionID})}}catch(K){}try{if(document.cookie.split("userSegment\x3d").length>0){var V=document.cookie.split("userSegment\x3d")[1].split(";")[0];V=J(V);ga("set",{"dimension37":V})}}catch(K){}try{if(document.querySelectorAll("meta[name\x3drobots][content\x3dnoindex]").length>0)ga("set",{"dimension15":"No Index"});else ga("set",
{"dimension15":"Index"})}catch(K){}try{var P=new URL(document.location.href);var ea=P.searchParams.get("depLoc")||P.searchParams.get("deploc");ga("set",{"dimension47":ea})}catch(K){}try{P=new URL(document.location.href);var da=P.searchParams.get("mi_u");if(da.length===64)ga("set",{"dimension48":da})}catch(K){}try{if(universal_variable&&universal_variable.user&&universal_variable.user.email&&typeof SHA256=="function"){userSHA256=SHA256(universal_variable.user.email);ga("set",{"dimension48":userSHA256})}}catch(K){}if(typeof navigationVariables!==
"undefined")ga("set",{"dimension40":navigationVariables.redirectCount,"dimension41":navigationVariables.navigationType,"dimension42":navigationVariables.newTab,"dimension43":navigationVariables.tabCount,"dimension44":navigationVariables.tabId});try{arriveIATA=universal_variable.search_results.outboundFlight.lastLeg.endAirport.iataCode;ga("set",{"dimension45":arriveIATA})}catch(K){}try{if(typeof arriveIATA==="undefined"){arriveIATA=universal_variable.booking.outboundFlights[universal_variable.booking.outboundFlights.length-
1].arriving.iata;ga("set",{"dimension45":arriveIATA})}}catch(K){}try{if(typeof g==="undefined"){if(universal_variable&&universal_variable.search_results&&universal_variable.search_results.selectedDate&&universal_variable.search_results.departureDate){var ba=universal_variable.search_results.selectedDate.split("-");var Y=universal_variable.search_results.departureDate.split("-");var ha=new Date(ba[2]+"-"+ba[1]+"-"+ba[0]);var M=new Date(Y[2]+"-"+Y[1]+"-"+Y[0]);var g=Math.round((ha.getTime()-M.getTime())/
(24*60*60*1E3))}ga("set",{"dimension57":g+""})}}catch(K){}try{ga("set",{"dimension38":pageNameFix(trPageName)});ga("set",{"dimension39":pageCategoryFix(trPageCategory)})}catch(K){}try{urlFolders=document.location.pathname.split("/");if(urlFolders.length>=3)if(urlFolders[1]==="holiday"||urlFolders[1]==="flydrive"||urlFolders[1]==="car"||urlFolders[1]==="hotel"||urlFolders[1]==="multidestination"||urlFolders[1]==="tour"||urlFolders[1]==="flight+hotel")if(urlFolders[2])if(universal_variable.search_results.locationName===
undefined)universal_variable.search_results.locationName=urlFolders[2].replace(/-/g," ")}catch(K){}try{urlFolders=document.location.pathname.split("/");if(urlFolders.length>=4&&universal_variable.page.name!="404")if(urlFolders[1]==="holiday"||urlFolders[1]==="flydrive"||urlFolders[1]==="car"||urlFolders[1]==="hotel"||urlFolders[1]==="multidestination"||urlFolders[1]==="tour"||urlFolders[1]==="flight+hotel")if(urlFolders[4]==="options")universal_variable.page.name="Hotel Options";else if(urlFolders[4]===
"flights")universal_variable.page.name="Flight Options";else if(urlFolders[4]==="transfers")universal_variable.page.name="Transfer Options";else if(urlFolders[4]==="extras")universal_variable.page.name="Extras Options"}catch(K){}try{urlFolders=document.location.pathname.split("/");if(urlFolders[1]==="tour"&&typeof universal_variable.search_results.hotels==="undefined"){universal_variable.search_results.hotels=[{}];universal_variable.search_results.hotels[0].tourName=urlFolders[3]}if(urlFolders[1]===
"cruise"&&typeof universal_variable.search_results.cruises==="undefined"){universal_variable.search_results.cruises=[{}];universal_variable.search_results.cruises[0].name=urlFolders[3]}}catch(K){}try{if(!universal_variable.search_results.hotels[0].pricePerPerson&&universal_variable.transaction.pricePerPerson)universal_variable.search_results.hotels[0].pricePerPerson=universal_variable.transaction.pricePerPerson}catch(K){}try{if(!universal_variable.search_results.hotels[0].totalPrice&&universal_variable.transaction.totalPrice)universal_variable.search_results.hotels[0].totalPrice=
universal_variable.transaction.totalPrice}catch(K){}try{if(universal_variable.search_results.hotels.length>0)for(var b=0;b<universal_variable.search_results.hotels.length;b++)if(universal_variable.search_results.hotels[b].multiDestinationName){universal_variable.search_results.hotels[b].id=universal_variable.search_results.hotels[b].multiDestinationName;universal_variable.search_results.hotels[b].name=universal_variable.search_results.hotels[b].multiDestinationName}}catch(K){}try{if(universal_variable.search_results.hotels.length>
0)for(b=0;b<universal_variable.search_results.hotels.length;b++)if(universal_variable.search_results.hotels[b].tourName){universal_variable.search_results.hotels[b].id=universal_variable.search_results.hotels[b].tourName;universal_variable.search_results.hotels[b].name=universal_variable.search_results.hotels[b].tourName}}catch(K){}try{universal_variable.search_results.dropOffDepot=universal_variable.search_results.dropOffDepot.replace(/-/g," ")}catch(K){}try{universal_variable.product.destination=
universal_variable.product.destination.replace("-holidays","").replace(/-/g," ")}catch(K){}try{universal_variable.page.name=universal_variable.page.name.replace(/( - no availability){2,}/g," - no availability")}catch(K){}try{if(universal_variable.booking.bookingType==="car"||universal_variable.booking.bookingType==="Car Hire"){universal_variable.booking.returnDate=new Date(universal_variable.booking.cars[0].hireEnd);universal_variable.booking.returnDate=N(universal_variable.booking.returnDate);universal_variable.booking.duration=
Math.round((new Date(universal_variable.booking.cars[0].hireEnd)-new Date(universal_variable.booking.cars[0].hireStart))/(24*60*60*1E3))}else if(universal_variable.booking.bookingType==="holiday"||universal_variable.booking.bookingType==="flydrive"||universal_variable.booking.bookingType==="multicentre"||universal_variable.booking.bookingType==="multidestination"||universal_variable.booking.bookingType==="Complete Holiday"||universal_variable.booking.bookingType==="Flydrive"||universal_variable.booking.bookingType===
"Multi Destination Holiday"||universal_variable.booking.bookingType==="Flight And Hotel"||universal_variable.booking.bookingType==="flight+hotel"){universal_variable.booking.returnDate=new Date(universal_variable.booking.inboundFlights[0].departingAt);universal_variable.booking.returnDate=N(universal_variable.booking.returnDate);universal_variable.booking.duration=Math.round((new Date(universal_variable.booking.inboundFlights[0].departingAt)-new Date(universal_variable.booking.outboundFlights[0].departingAt))/
(24*60*60*1E3))}else if(universal_variable.booking.bookingType==="hotel"||universal_variable.booking.bookingType==="Hotel Only"){universal_variable.booking.returnDate=new Date(universal_variable.booking.hotels[0].checkOutDate);universal_variable.booking.returnDate=N(universal_variable.booking.returnDate);universal_variable.booking.duration=Math.round((new Date(universal_variable.booking.hotels[0].checkOutDate)-new Date(universal_variable.booking.hotels[0].checkInDate))/(24*60*60*1E3))}else if(universal_variable.booking.bookingType===
"tour"||universal_variable.booking.bookingType==="Touring"){universal_variable.booking.returnDate=new Date(universal_variable.booking.inboundFlights[0].departingAt);universal_variable.booking.returnDate=N(universal_variable.booking.returnDate);universal_variable.booking.duration=Math.round((new Date(universal_variable.booking.inboundFlights[0].departingAt)-new Date(universal_variable.booking.outboundFlights[0].departingAt))/(24*60*60*1E3))}else if(universal_variable.booking.bookingType==="cruise"||
universal_variable.booking.bookingType==="Cruise"){universal_variable.booking.returnDate=new Date(universal_variable.booking.inboundFlights[0].departingAt);universal_variable.booking.returnDate=N(universal_variable.booking.returnDate);universal_variable.booking.duration=Math.round((new Date(universal_variable.booking.inboundFlights[0].departingAt)-new Date(universal_variable.booking.outboundFlights[0].departingAt))/(24*60*60*1E3))}}catch(K){}try{if(universal_variable.booking.bookingType==="car"||
universal_variable.booking.bookingType==="Car Hire")universal_variable.booking.locationName=universal_variable.booking.cars[0].pickUp;else if(universal_variable.booking.bookingType==="holiday"||universal_variable.booking.bookingType==="Complete Holiday"||universal_variable.booking.bookingType==="hotel"||universal_variable.booking.bookingType==="Hotel Only"||universal_variable.booking.bookingType==="flight+hotel"||universal_variable.booking.bookingType==="Flight And Hotel")universal_variable.booking.locationName=
universal_variable.booking.hotels[0].content.parentLocation.split(",")[0];else if(universal_variable.booking.bookingType==="multidestination"||universal_variable.booking.bookingType==="multicentre"||universal_variable.booking.bookingType==="Multi Destination Holiday")universal_variable.booking.locationName=universal_variable.booking.hotels[0].content.parentLocation.split(",")[0];else if(universal_variable.booking.bookingType==="flydrive"||universal_variable.booking.bookingType==="Flydrive")universal_variable.booking.locationName=
universal_variable.booking.outboundFlights[0].arriving.name}catch(K){}try{if(window.location.pathname.indexOf("/checkout")!==-1)if(typeof universal_variable!=="undefined"){if(typeof universal_variable.page==="undefined")universal_variable.page={};if(typeof universal_variable.booking==="undefined")universal_variable.booking={};if(H(universal_variable,"page.name")==="details"||window.location.pathname==="/checkout/detail"||window.location.pathname==="/checkout/detail/")universal_variable.page.name=
"Passenger Details";else if(H(universal_variable,"page.name")==="payment error")universal_variable.page.name="Payment Error";else if(H(universal_variable,"page.name")==="payment"||H(universal_variable,"page.name")==="card"||window.location.pathname==="/checkout/payment"||window.location.pathname==="/checkout/payment/")universal_variable.page.name="Payment";else if(H(universal_variable,"page.name")==="3ds")universal_variable.page.name="3d Secure";else if(H(universal_variable,"page.name")==="surcharge")universal_variable.page.name=
"Confirm Surcharge";else if(H(universal_variable,"page.name")==="confirmation"||window.location.pathname==="/checkout/confirmation"||window.location.pathname==="/checkout/confirmation/")universal_variable.page.name="Confirmation";if(H(universal_variable,"booking.bookingType")==="holiday"||H(universal_variable,"booking.bookingType")==="complete"||H(universal_variable,"booking.bookingType")==="Complete Holiday"){universal_variable.page.category="Complete Holiday";universal_variable.booking.bookingType=
"Complete Holiday"}else if(H(universal_variable,"booking.bookingType")==="flight+hotel"||H(universal_variable,"booking.bookingType")==="Flight And Hotel"){universal_variable.page.category="Flight And Hotel";universal_variable.booking.bookingType="Flight And Hotel"}else if(H(universal_variable,"booking.bookingType")==="hotel"||H(universal_variable,"booking.bookingType")==="Hotel Only"){universal_variable.page.category="Hotel Only";universal_variable.booking.bookingType="Hotel Only"}else if(H(universal_variable,
"booking.bookingType")==="car"||H(universal_variable,"booking.bookingType")==="Car Hire"){universal_variable.page.category="Car Hire";universal_variable.booking.bookingType="Car Hire"}else if(H(universal_variable,"booking.bookingType")==="flydrive"||H(universal_variable,"booking.bookingType")==="Flydrive"){universal_variable.page.category="Flydrive";universal_variable.booking.bookingType="Flydrive"}else if(H(universal_variable,"booking.bookingType")==="multicentre"||H(universal_variable,"booking.bookingType")===
"multidestination"||H(universal_variable,"booking.bookingType")==="Multi Destination Holiday"){universal_variable.page.category="Multi Destination Holiday";universal_variable.booking.bookingType="Multi Destination Holiday"}else if(H(universal_variable,"booking.bookingType")==="cruise"||H(universal_variable,"booking.bookingType")==="Cruise"){universal_variable.page.category="Cruise";universal_variable.booking.bookingType="Cruise"}else if(H(universal_variable,"booking.bookingType")==="tour"||H(universal_variable,
"booking.bookingType")==="Tour"){universal_variable.page.category="Tour";universal_variable.booking.bookingType="Touring"}}}catch(K){}P=new URL(document.location.href);var w=P.searchParams.get("departureDate");var q=P.searchParams.get("duration");var z=P.searchParams.get("gateway");try{if(window.location.pathname.indexOf("/yourbooking")!==-1)if(typeof universal_variable!=="undefined"){if(typeof universal_variable.page==="undefined")universal_variable.page={};if(typeof universal_variable.booking===
"undefined")universal_variable.booking={};universal_variable.page.category="Manage My Booking";if(window.location.pathname==="/yourbooking"||window.location.pathname==="/yourbooking/")universal_variable.page.name="Log In Page";else if(window.location.pathname==="/yourbooking/welcome"||window.location.pathname==="/yourbooking/welcome/")universal_variable.page.name="Summary Page";else if(window.location.pathname==="/yourbooking/booking"||window.location.pathname==="/yourbooking/booking/")universal_variable.page.name=
"Detail Page";else if(window.location.pathname==="/yourbooking/payment"||window.location.pathname==="/yourbooking/payment/")universal_variable.page.name="Post Booking Payment Page";else if(window.location.pathname==="/yourbooking/confirmation"||window.location.pathname==="/yourbooking/confirmation/")universal_variable.page.name="Post Booking Confirmation Page";else if(window.location.pathname==="/yourbooking/destination"||window.location.pathname==="/yourbooking/destination/")universal_variable.page.name=
"Destination Page";else if(window.location.pathname==="/yourbooking/documents"||window.location.pathname==="/yourbooking/documents/")universal_variable.page.name="Document Page";else if(window.location.pathname==="/yourbooking/destination-guide/before-travel"||window.location.pathname==="/yourbooking/destination-guide/before-travel/")universal_variable.page.name="Before You Travel";else if(window.location.pathname==="/yourbooking/destination-guide/your-destination"||window.location.pathname==="/yourbooking/destination-guide/your-destination/")universal_variable.page.name=
"Your Destination";else if(window.location.pathname==="/yourbooking/booking/itinerary"||window.location.pathname==="/yourbooking/booking/itinerary/")universal_variable.page.name="Itinerary";else if(window.location.pathname==="/yourbooking/booking/guest-details"||window.location.pathname==="/yourbooking/booking/guest-details/")universal_variable.page.name="Guest Details";else if(window.location.pathname==="/yourbooking/concierge"||window.location.pathname==="/yourbooking/concierge/")universal_variable.page.name=
"Concierge";else if(window.location.pathname==="/yourbooking/404"||window.location.pathname==="/yourbooking/404/")universal_variable.page.name="404";if(H(universal_variable,"booking.bookingType")==="holiday"||H(universal_variable,"booking.bookingType")==="complete"||H(universal_variable,"booking.bookingType")==="Complete Holiday")universal_variable.booking.bookingType="Complete Holiday";else if(H(universal_variable,"booking.bookingType")==="flight+hotel"||H(universal_variable,"booking.bookingType")===
"Flight+Hotel")universal_variable.booking.bookingType="Flight And Hotel";else if(H(universal_variable,"booking.bookingType")==="hotel"||H(universal_variable,"booking.bookingType")==="Hotel Only")universal_variable.booking.bookingType="Hotel Only";else if(H(universal_variable,"booking.bookingType")==="car"||H(universal_variable,"booking.bookingType")==="Car Hire")universal_variable.booking.bookingType="Car Hire";else if(H(universal_variable,"booking.bookingType")==="flydrive"||H(universal_variable,
"booking.bookingType")==="Flydrive")universal_variable.booking.bookingType="Flydrive";else if(H(universal_variable,"booking.bookingType")==="multicentre"||H(universal_variable,"booking.bookingType")==="multidestination"||H(universal_variable,"booking.bookingType")==="Multi Destination Holiday")universal_variable.booking.bookingType="Multi Destination Holiday";else if(H(universal_variable,"booking.bookingType")==="cruise"||H(universal_variable,"booking.bookingType")==="Cruise")universal_variable.booking.bookingType=
"Cruise";else if(H(universal_variable,"booking.bookingType")==="tour"||H(universal_variable,"booking.bookingType")==="Tour")universal_variable.booking.bookingType="Touring"}}catch(K){}try{if(H(universal_variable,"page.category")==="Car Hire"&&H(universal_variable,"page.name")==="car")universal_variable.page.name="Car Options"}catch(K){}try{universal_variable.booking.hotels[0].id=universal_variable.booking.hotels[0].code}catch(K){}try{universal_variable.booking.hotels[0].name=universal_variable.booking.hotels[0].content.name}catch(K){}try{universal_variable.search_results.hotels[0].name=
universal_variable.search_results.hotels[0].content.name}catch(K){}try{universal_variable.booking.cars[0].name=universal_variable.booking.cars[0].content.make+" "+universal_variable.booking.cars[0].content.model;universal_variable.booking.cars[0].id=universal_variable.booking.cars[0].content.make+" "+universal_variable.booking.cars[0].content.model}catch(K){}try{if(typeof universal_variable.booking==="undefined"&&typeof universal_variable.search_results!=="undefined")if(universal_variable.page.category===
"Complete Holiday"||universal_variable.page.category==="Hotel Only"||universal_variable.page.category==="Flydrive"||universal_variable.page.category==="Car Hire"||universal_variable.page.category==="Multi Destination Holiday"||universal_variable.page.category==="Touring"||universal_variable.page.category==="Cruise"||universal_variable.page.category==="Flight And Hotel")universal_variable.search_results.bookingType=universal_variable.page.category}catch(K){}var h;try{if(universal_variable.page.name===
"Hotel Options"||universal_variable.page.name==="Flight Options"||universal_variable.page.name==="Transfer Options"||universal_variable.page.name==="Extras Options"){hasHotelTab=document.querySelectorAll(".hotel-panel.active").length>0;hasFlightTab=document.querySelectorAll(".flights-panel.active").length>0;hasTransferTab=document.querySelectorAll(".transfers-panel.active").length>0;hasExtrasTab=document.querySelectorAll(".extras-panel.active").length>0;h="Hotel: "+hasHotelTab+" | Flight: "+hasFlightTab+
" | Transfer: "+hasTransferTab+" | Extras: "+hasExtrasTab}}catch(K){}var p="";(function(K){var G=function ca(){var ka=document.querySelectorAll('a:not(.image-container)[onclick*\x3d"addPromo"],[trackImpression][onclick*\x3d"addPromo"]');ka.forEach(function(aa){var ia=function pa(ja,oa){if(ja!=undefined&&ja.length>0&&ja[0].isIntersecting){var ma=aa.getAttribute("onclick");var na=JSON.parse(ma.split("ga('ec:addPromo',")[1].split(");")[0].trim().replace(/(')/g,'"'));if(typeof promoDataLast==="undefined"||
promoDataLast!==na){if(typeof promoImpressionArray=="undefined")promoImpressionArray=[];if(na)promoImpressionArray.push(na)}promoDataLast=na;oa.unobserve(aa)}};var la=new IntersectionObserver(ia,{threshold:.3});la.observe(aa)})};K(function(){return G()})})(setTimeout);(function(K){var G=function ca(){var ka=document.querySelectorAll("article.search-results-card");ka.forEach(function(aa){var ia=function pa(ja,oa){if(ja!=undefined&&ja.length>0&&ja[0].isIntersecting){var ma={resultType:aa.getAttribute("data-type")||
document.location.pathname.split("/")[1],resultID:aa.getAttribute("id"),resultName:aa.getAttribute("data-name")||aa.querySelectorAll("h2 a")[0].innerText,resultDate:aa.getAttribute("data-mincheckindate"),resultDuration:aa.getAttribute("data-duration"),resultDeparturePoint:aa.getAttribute("data-departureairportcode"),resultPosition:Number(aa.getAttribute("data-sort"))+1,resultPrice:aa.getAttribute("data-priceperperson")||aa.getAttribute("data-price"),resultVRating:aa.getAttribute("vratingsortorder")};
if(typeof resultImpressionArray=="undefined")resultImpressionArray=[];if(ma)resultImpressionArray.push(ma);oa.unobserve(aa)}};var la=new IntersectionObserver(ia,{threshold:.3});la.observe(aa)})};K(function(){return G()})})(setTimeout);setInterval(function(){if(typeof promoImpressionArray=="undefined")promoImpressionArray=[];var K=promoImpressionArray;promoImpressionArray=[];for(var G=0;G<K.length;G++){ga("ec:addPromo",K[G]);if(G%25===0&&G>0)ga("send","event","Impression Bundles","Merchandising",{"nonInteraction":true});
else if(G===K.length-1)ga("send","event","Impression Bundles","Merchandising",{"nonInteraction":true})}if(typeof resultImpressionArray=="undefined")resultImpressionArray=[];var O=resultImpressionArray;resultImpressionArray=[];for(G=0;G<O.length;G++){if(O&&(O[G].resultType==="deal"||O[G].resultType==="offer"))ga("ec:addPromo",{"id":O[G].resultID,"name":O[G].resultName,"creative":O[G].resultName+" | "+O[G].resultDeparturePoint+" | "+O[G].resultDate+" | "+O[G].resultDuration+" | \u00a3"+O[G].resultPrice+
" | "+O[G].resultType,"position":"Special Offers "+O[G].resultPosition});else if(O&&(O[G].resultType==="hotel"||O[G].resultType==="holiday"))ga("ec:addImpression",{"id":O[G].resultID,"name":O[G].resultName,"category":holidayTypeFix(O[G].resultType),"list":holidayTypeFix(O[G].resultType)+" Search Results","position":O[G].resultPosition,"price":O[G].resultPrice});else if(O&&O[G].resultType==="car")ga("ec:addImpression",{"id":O[G].resultID,"name":O[G].resultName,"category":holidayTypeFix(O[G].resultType),
"list":holidayTypeFix(O[G].resultType)+" Search Results","position":O[G].resultPosition,"price":O[G].resultPrice});else if(O&&O[G].resultType==="multidestination")ga("ec:addImpression",{"id":O[G].resultID.replace("---"," ").replace(/-/g," "),"name":O[G].resultID.replace("---"," ").replace(/-/g," "),"category":holidayTypeFix(O[G].resultType),"list":holidayTypeFix(O[G].resultType)+" Search Results","position":O[G].resultPosition,"price":O[G].resultPrice});else if(O&&O[G].resultType==="destinations")ga("ec:addImpression",
{"id":O[G].resultID,"name":O[G].resultName,"category":"Destination Hotels","list":"Destination Hotel Results","position":O[G].resultPosition});else if(O&&O[G].resultType==="holiday-types")ga("ec:addImpression",{"id":O[G].resultID,"name":O[G].resultName,"category":"Holiday Type Hotels","list":"Holiday Type Hotel Results","position":O[G].resultPosition});if(G%25===0&&G>0)ga("send","event","Impression Bundles","Results and Offers",{"nonInteraction":true});else if(G===O.length-1)ga("send","event","Impression Bundles",
"Results and Offers",{"nonInteraction":true})}},500);if(document.querySelectorAll(".search-results-card").length>0){var e=document.querySelectorAll(".search-results-card");for(b=0;b<e.length;b++)e[b].addEventListener("click",function(K){if(K.target.nodeName==="A"){var G={resultType:this.getAttribute("data-type")||document.location.pathname.split("/")[1],resultID:this.getAttribute("id"),resultName:this.getAttribute("data-name")||this.querySelectorAll("h2 a")[0].innerText,resultDate:this.getAttribute("data-mincheckindate"),
resultDuration:this.getAttribute("data-duration"),resultDeparturePoint:this.getAttribute("data-departureairportcode"),resultPosition:Number(this.getAttribute("data-sort"))+1,resultPrice:this.getAttribute("data-priceperperson")||this.getAttribute("data-price"),resultVRating:this.getAttribute("vratingsortorder")};if(G&&(G.resultType==="offer"||G.resultType==="deal")){console.log(G);ga("ec:addPromo",{"id":G.resultID,"name":G.resultName,"creative":G.resultName+" | "+G.resultDeparturePoint+" | "+G.resultDate+
" | "+G.resultDuration+" | \u00a3"+G.resultPrice+" | "+G.resultType,"position":"Special Offers "+G.resultPosition});ga("ec:setAction","promo_click");ga("send","event","Special Offers","Select Offer",G.resultName)}else if(G&&(G.resultType==="hotel"||G.resultType==="holiday")){ga("ec:addProduct",{"id":G.resultID,"name":G.resultName,"category":holidayTypeFix(G.resultType),"list":holidayTypeFix(G.resultType)+" Search Results","position":G.resultPosition,"price":G.resultPrice});ga("ec:setAction","click",
{"list":holidayTypeFix(G.resultType)+" Search Results"});ga("send","event",holidayTypeFix(G.resultType)+" Search Results","Select Result",G.resultName)}else if(G&&G.resultType==="car"){ga("ec:addProduct",{"id":G.resultID,"name":G.resultName,"category":holidayTypeFix(G.resultType),"list":holidayTypeFix(G.resultType)+" Search Results","position":G.resultPosition,"price":G.resultPrice});ga("ec:setAction","click",{"list":holidayTypeFix(G.resultType)+" Search Results"});ga("send","event",holidayTypeFix(G.resultType)+
" Search Results","Select Result",G.resultName)}else if(G&&G.resultType==="multidestination"){ga("ec:addProduct",{"id":G.resultID.replace("---"," ").replace(/-/g," "),"name":G.resultID.replace("---"," ").replace(/-/g," "),"category":holidayTypeFix(G.resultType),"list":holidayTypeFix(G.resultType)+" Search Results","position":G.resultPosition,"price":G.resultPrice});ga("ec:setAction","click",{"list":holidayTypeFix(G.resultType)+" Search Results"});ga("send","event",holidayTypeFix(G.resultType)+" Search Results",
"Select Result",G.resultID.replace("---"," ").replace(/-/g," "))}else if(G&&G.resultType==="destinations"){ga("ec:addProduct",{"id":G.resultID,"name":G.resultName,"category":"Destination Hotels","list":"Destination Hotel Results","position":G.resultPosition});ga("ec:setAction","click",{"list":"Destination Hotel Results"});ga("send","event","Destination Hotels","Select Hotel",G.resultName)}else if(G&&G.resultType==="holiday-types"){ga("ec:addProduct",{"id":G.resultID,"name":G.resultName,"category":"Holiday Type Hotels",
"list":"Holiday Type Hotel Results","position":G.resultPosition});ga("ec:setAction","click",{"list":"Holiday Type Hotel Results"});ga("send","event","Holiday Type Hotels","Select Hotel",G.resultName)}}})}try{var u=universal_variable||{};var n=H(universal_variable,"page");var y=H(universal_variable,"page.name");var C=H(universal_variable,"page.category");C=pageCategoryFix(C);var d=H(universal_variable,"search_results")||H(universal_variable,"booking")||{};var A=H(d,"locationName")||H(universal_variable,
"searchLocation")||H(d,"dropOffDepot");A=A.replace(/-/g," ");A=A.toLowerCase();var D=H(d,"type")||H(d,"bookingType");if(!D&&(C==="Complete Holiday"||C==="Hotel Only"||C==="Multi Destination Holiday"||C==="Car Hire"||C==="Flydrive"||C==="Cruise"||C==="Touring"))D=C;D=holidayTypeFix(D);var F=H(universal_variable,"payment")||H(universal_variable,"transaction");var r=H(d,"totalPassengers")||Math.round(H(F,"totalPrice")/H(F,"pricePerPerson"))||null;var m=H(d,"hotels");m=m&&m.length?m:[];var l={};if(D===
"Car Hire"){m=H(d,"cars");l=H(d,"car")||m[0][0]||m[0]||{};l.totalPrice=l.totalPrice||F.totalPrice;l.name=l.name||l.make+" "+l.model}else if(D==="Flydrive"){l.id=A+" - flydrive";l.name=A+" - flydrive";l.boardBasis="Flydrive";l.totalPrice=F.totalPrice;l.totalPrice=l.totalPrice||F.totalPrice}else if(D==="Complete Holiday"||D==="Hotel Only"||D==="Flight And Hotel"){l=H(d,"hotel")||m[0]||{};l.totalPrice=l.totalPrice||F.totalPrice}else if(D==="Multi Destination Holiday"||D==="Touring"){m=H(d,"multiCentres");
l=H(d,"hotel")||H(d,"hotels")[0]||m[0]||{};l.id=H(d,"name")||H(l,"id");l.id=l.id.replace(/-/g," ").toLowerCase();l.name=d.name||l.name||"";l.name=l.name.replace(/-/g," ").toLowerCase();l.totalPrice=l.totalPrice||F.totalPrice}else if(D==="Cruise"){m=H(d,"cruises");l=H(d,"cruise")||m[0]||{};l.id=H(d,"name")||H(l,"name");l.name=d.name||l.name||"";l.name=l.name.replace(/-/g," ");l.totalPrice=l.totalPrice||F.totalPrice}var f=l.totalPrice||F.totalPrice;d.departureDateShort=d.departureDate||w;d.departureDateShort=
d.departureDateShort&&d.departureDateShort.length?d.departureDateShort:"dd-mm-yyyy";d.departureDateShort=d.departureDateShort.substring(6,10)+" - "+d.departureDateShort.substring(3,5)||"yyyy - mm";var c=u.transaction||{};var k=c.reference||d.reference;var t=u.user||{};var E=l.locationParentName||"";if((n.name==="Hotel Options"||n.name==="Flight Options"||n.name==="Transfer Options"||n.name==="Extras Options")&&document.querySelectorAll(".no-availability").length>0)n.name=n.name+" No Results";else if((n.name===
"Hotel Options"||n.name==="Flight Options"||n.name==="Transfer Options"||n.name==="Extras Options")&&typeof l.totalPrice==="undefined")n.name=n.name+" Interstitial";else if((n.name==="Hotel Options Interstitial"||n.name==="Flight Options Interstitial"||n.name==="Transfer Options Interstitial"||n.name==="Extras Options Interstitial")&&typeof l.totalPrice!=="undefined")n.name=n.name.replace(" Interstitial","");if((n.name==="Search Results"||n.name==="Search results")&&document.querySelectorAll(".error-page").length>
0);else if(n.name==="Search Results Interstitial"&&document.querySelectorAll(".error-page").length>0)n.name="Search Results";if(n.name==="Hotel Options"||n.name==="Flight Options"||n.name==="Transfer Options"||n.name==="Car Options"||n.name==="Extras Options"||n.name==="Hotel Options - No Availablity"||n.name==="Flight Options - No Availablity"||n.name==="Transfer Options - No Availablity"||n.name==="Extras Options - No Availablity"||n.name==="Passenger Details"||n.name==="Payment"||n.name==="Confirm Surcharge"||
n.name==="3D Secure"||n.name==="Confirmation")ga("set",{"dimension1":l.id,"dimension2":l.name||l.model,"dimension13":l.vRating});try{for(b=0;b<d.outboundFlight.sectors.length;b++){if(b===0){gaOutboundFlightCode=d.outboundFlight.sectors[b].airline+d.outboundFlight.sectors[b].airlineFlightNumber;gaOutboundFlightClass=d.outboundFlight.sectors[b].cabinClass}else{gaOutboundFlightCode=gaOutboundFlightCode+" | "+d.outboundFlight.sectors[b].airline+d.outboundFlight.sectors[b].airlineFlightNumber;gaOutboundFlightClass=
gaOutboundFlightClass+" | "+d.outboundFlight.sectors[b].cabinClass}if(b===d.outboundFlight.sectors.length-1)ga("set",{"dimension32":gaOutboundFlightCode,"dimension33":gaOutboundFlightClass})}for(b=0;b<d.inboundFlight.sectors.length;b++){if(b===0){gaInboundFlightCode=d.inboundFlight.sectors[b].airline+d.inboundFlight.sectors[b].airlineFlightNumber;gaInboundFlightClass=d.inboundFlight.sectors[b].cabinClass}else{gaInboundFlightCode=gaInboundFlightCode+" | "+d.inboundFlight.sectors[b].airline+d.inboundFlight.sectors[b].airlineFlightNumber;
gaInboundFlightClass=gaInboundFlightClass+" | "+d.inboundFlight.sectors[b].cabinClass}if(b===d.inboundFlight.sectors.length-1)ga("set",{"dimension52":gaInboundFlightCode,"dimension53":gaInboundFlightClass})}}catch(K){}try{for(b=0;b<d.outboundFlights[0].sectors.length;b++){if(b===0){gaOutboundFlightCode=d.outboundFlights[0].sectors[b].flightNumber;gaOutboundFlightClass=d.outboundFlights[0].sectors[b].cabinClass}else{gaOutboundFlightCode=gaOutboundFlightCode+" | "+d.outboundFlights[0].sectors[b].flightNumber;
gaOutboundFlightClass=gaOutboundFlightClass+" | "+d.outboundFlights[0].sectors[b].cabinClass}if(b===d.outboundFlights[0].sectors.length-1)ga("set",{"dimension32":gaOutboundFlightCode,"dimension33":gaOutboundFlightClass})}for(b=0;b<d.inboundFlights[0].sectors.length;b++){if(b===0){gaInboundFlightCode=d.inboundFlights[0].sectors[b].flightNumber;gaInboundFlightClass=d.inboundFlights[0].sectors[b].flightNumber}else{gaInboundFlightCode=gaInboundFlightCode+" | "+d.inboundFlights[0].sectors[b].flightNumber;
gaInboundFlightClass=gaInboundFlightClass+" | "+d.inboundFlights[0].sectors[b].flightNumber}if(b===d.inboundFlights[0].sectors.length-1)ga("set",{"dimension52":gaInboundFlightCode,"dimension53":gaInboundFlightClass})}}catch(K){}try{ga("set",{"dimension29":k})}catch(K){}try{ga("set",{"dimension30":f})}catch(K){}try{if(typeof F!=="undefined"){gaMembershipNumber=H(F,"membershipNumber");gaMembershipType=H(F,"membershipNumberType");if(gaMembershipNumber.length>0&&gaMembershipType.length>0)ga("set",{"dimension31":gaMembershipType+
" "+gaMembershipNumber});if(typeof F.promotionalCodeValue!=="undefined")F.promotionalCodeValue=F.promotionalCodeValue.toLowerCase()}}catch(K){}try{ga("set",{"dimension32":gaOutboundFlightCode})}catch(K){}try{ga("set",{"dimension33":gaInboundFlightCode})}catch(K){}try{ga("set",{"dimension52":gaOutboundFlightClass})}catch(K){}try{ga("set",{"dimension53":gaInboundFlightClass})}catch(K){}try{ga("set",{"dimension34":h})}catch(K){}try{var I=universal_variable.search_results.totalPassengers;ga("set",{"dimension8":d.totalAdults,
"dimension9":d.totalChildren,"dimension10":d.totalInfants})}catch(K){}try{if(typeof I==="undefined")ga("set",{"dimension8":d.partyComposition.adults,"dimension9":d.partyComposition.children,"dimension10":d.partyComposition.infants})}catch(K){}if(C==="Hotel Only"||C==="Complete Holiday"||C==="Flydrive"||C==="Car Hire"||C==="Multi Destination Holiday"||C==="Touring"||C==="Cruise"||C==="Flight And Hotel")ga("set",{"dimension3":A,"dimension4":d.departurePoint||d.pickUpDepot||z,"dimension5":d.departureDate||
w,"dimension6":d.departureDateShort,"dimension7":d.duration||q,"dimension12":D});if(C==="destinations")ga("set",{"dimension3":E.split(",")[0]});if(C==="Hotel Only"||C==="Complete Holiday"||C==="Flydrive"||C==="Car Hire"||C==="Multi Destination Holiday"||C==="Touring"||C==="Cruise"||C==="Flight And Hotel")ga("set",{"page":"/["+D+"]/["+n.name+"]"});if(y==="Search Results"||y==="Search results")ga("set",{"dimension19":m.length});if(n.name==="Combined Options"||n.name==="Hotel Options"||n.name==="Flight Options"||
n.name==="Transfer Options"||n.name==="Car Options"||n.name==="Extras Options"||n.name==="Passenger Details"||n.name==="Payment"||n.name==="Confirm Surcharge"||n.name==="3D Secure"||n.name==="Confirmation")if(typeof gaProductSet==="undefined"){ga("ec:addProduct",{"id":l.id,"name":l.name,"category":D,"price":f,"quantity":1});ga("ec:setAction","add",{"list":D+" Search Results"});gaProductSet=true}if(n.name==="Combined Options"||n.name==="Hotel Options"||n.name==="Flight Options"||n.name==="Transfer Options"||
n.name==="Car Options"||n.name==="Extras Options")ga("send","event",D+" Search","View Options",A,{"nonInteraction":true});else if(n.name==="Passenger Details")ga("ec:setAction","checkout",{"step":1,"list":D+" Search Results"});else if(n.name==="Payment"||n.name==="Confirm Surcharge"||n.name==="3D Secure")ga("ec:setAction","checkout",{"step":2,"coupon":F.promotionalCodeValue,"list":D+" Search Results"});try{var L=!!~location.pathname.indexOf("/options")||!!~location.pathname.indexOf("/flights")||!!~location.pathname.indexOf("/transfers")||
!!~location.pathname.indexOf("/extras");var Q=!!~location.pathname.indexOf("/holiday")||!!~location.pathname.indexOf("/flydrive")||!!~location.pathname.indexOf("/hotel")||!!~location.pathname.indexOf("/multidestination")||!!~location.pathname.indexOf("/flight+hotel");var S=!!~location.pathname.indexOf("/checkout");if(L&&Q){var T=document.querySelectorAll(".discount-price")[0];var U=0;if(T.innerHTML.length>0)if(!!~T.innerHTML.indexOf("online discount"))U=parseFloat(T.innerHTML.replace(/\u00a3/,"").replace(/&pound;/,
"").replace(/online discount/,"").trim());undiscountedNumber=H(universal_variable,"transaction.totalPrice");undiscountedNumber=undiscountedNumber+U;discountNumber10s=Math.round(U/10)*10;try{fa=Math.round(U/undiscountedNumber*400)/4}catch(K){}ga("set",{"dimension35":discountNumber10s,"dimension36":fa})}else if(S){U=H(universal_variable,"payment.onlineDiscount");undiscountedNumber=H(universal_variable,"payment.totalPriceWithoutDiscount");discountNumber10s=Math.round(U/10)*10;var fa;try{fa=Math.round(U/
undiscountedNumber*400)/4}catch(K){}ga("set",{"dimension35":discountNumber10s,"dimension36":fa})}}catch(K){}try{if(C==="Manage My Booking")ga("set",{"page":"/[Manage Booking]/["+n.name+"]"});else if(C==="Timeout")ga("set",{"page":"/[Timeout]/["+n.name+"]"})}catch(K){}}catch(K){}if(n.name==="Passenger Details"||n.name==="Payment"||n.name==="Confirmation")if(universal_variable&&universal_variable.booking&&universal_variable.booking.extras&&universal_variable.booking.extras.length>0)for(var X=0;X<universal_variable.booking.extras.length;X++)ga("send",
"event","Tickets and Excursions","Tickets on "+n.name,universal_variable.booking.extras[X].name);if((n.name==="Search Results"||n.name==="Search results"||n.name==="Search Results Interstitial")&&document.querySelectorAll(".error-page").length>0){var W=document.querySelectorAll(".error-page h1")[0];if(W)errorHeadingText=W.innerText;else errorHeadingText="";ga("send","event","Error","Search Results",escape(errorHeadingText))}if((document.location.pathname==="/multi-centre-form"||document.location.pathname===
"/tours-callback")&&self!=top)ga("set",{"page":window.parent.location.pathname});else{gaTrackTimeStampNow=Math.round((new Date).getTime());gaTrackPageStampNow=y;if(typeof gaTrackTimeStamp==="undefined"){ga("send","pageview");ga("set",{"metric1":null,"metric2":null,"metric3":null});gaProductSet=undefined;if(!!~document.cookie.indexOf("printUV\x3d1"))console.log("GA Pageview UV"+JSON.stringify(universal_variable));gaTrackTimeStamp=Math.round((new Date).getTime());gaTrackPageStamp=y}else if(typeof gaTrackTimeStamp===
"number"&&typeof gaTrackTimeStampNow==="number"&&(gaTrackTimeStampNow-gaTrackTimeStamp>2E3||gaTrackPageStampNow!==gaTrackPageStamp)){ga("send","pageview");ga("set",{"metric1":null,"metric2":null,"metric3":null});gaProductSet=undefined;if(!!~document.cookie.indexOf("printUV\x3d1"))console.log("GA Pageview UV"+JSON.stringify(universal_variable));gaTrackTimeStamp=Math.round((new Date).getTime());gaTrackPageStamp=y}}if(typeof gaTrackingEventsSet==="undefined")window.addEventListener("message",function(K){try{if(K.data.eventName===
"BOOKING_CONFIRMATION")setTimeout(function(){if(typeof gaBookingSet==="undefined"){ga("set",{"page":"/["+holidayTypeFix(K.data.summary.bookingType)+"]/[Confirmation]"});ga("ec:setAction","purchase",{"id":K.data.summary.tracking.bookingReference,"affiliation":"Internet","revenue":K.data.summary.totalPrice,"coupon":K.data.summary.promotionalCodeValue,"list":holidayTypeFix(K.data.summary.bookingType)+" Search Results"});ga("send","event","Booking",holidayTypeFix(K.data.summary.bookingType),{"metric1":K.data.summary.membershipMiles,
"metric2":K.data.summary.onlineDiscount,"metric3":K.data.summary.partyComposition.total});gaProductSet=undefined;gaBookingSet=true}},1E3)}catch(G){}gaTrackingEventsSet=true})};a.postInitialisationSection=function(){(function(){function J(M){this.time=M.time;this.target=M.target;this.rootBounds=M.rootBounds;this.boundingClientRect=M.boundingClientRect;this.intersectionRect=M.intersectionRect||ea();this.isIntersecting=!!M.intersectionRect;var g=this.boundingClientRect;var b=g.width*g.height;var w=this.intersectionRect;
var q=w.width*w.height;if(b)this.intersectionRatio=Number((q/b).toFixed(4));else this.intersectionRatio=this.isIntersecting?1:0}function N(M,g){var b=g||{};if(typeof M!="function")throw new Error("callback must be a function");if(b.root&&b.root.nodeType!=1)throw new Error("root must be an Element");this._checkForIntersections=H(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=M;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(b.rootMargin);
this.thresholds=this._initThresholds(b.threshold);this.root=b.root||null;this.rootMargin=this._rootMarginValues.map(function(w){return w.value+w.unit}).join(" ")}function B(){return window.performance&&performance.now&&performance.now()}function H(M,g){var b=null;return function(){if(!b)b=setTimeout(function(){M();b=null},g)}}function R(M,g,b,w){if(typeof M.addEventListener=="function")M.addEventListener(g,b,w||false);else if(typeof M.attachEvent=="function")M.attachEvent("on"+g,b)}function Z(M,g,
b,w){if(typeof M.removeEventListener=="function")M.removeEventListener(g,b,w||false);else if(typeof M.detatchEvent=="function")M.detatchEvent("on"+g,b)}function V(M,g){var b=Math.max(M.top,g.top);var w=Math.min(M.bottom,g.bottom);var q=Math.max(M.left,g.left);var z=Math.min(M.right,g.right);var h=z-q;var p=w-b;return h>=0&&p>=0&&{top:b,bottom:w,left:q,right:z,width:h,height:p}}function P(M){var g;try{g=M.getBoundingClientRect()}catch(b){}if(!g)return ea();if(!(g.width&&g.height))g={top:g.top,right:g.right,
bottom:g.bottom,left:g.left,width:g.right-g.left,height:g.bottom-g.top};return g}function ea(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function da(M,g){for(var b=g;b;){if(b==M)return true;b=ba(b)}return false}function ba(M){var g=M.parentNode;if(g&&g.nodeType==11&&g.host)return g.host;if(g&&g.assignedSlot)return g.assignedSlot.parentNode;return g}if(typeof window!=="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){if(!("isIntersecting"in
window.IntersectionObserverEntry.prototype))Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var Y=window.document;var ha=[];N.prototype.THROTTLE_TIMEOUT=100;N.prototype.POLL_INTERVAL=null;N.prototype.USE_MUTATION_OBSERVER=true;N.prototype.observe=function(M){var g=this._observationTargets.some(function(b){return b.element==M});if(g)return;if(!(M&&M.nodeType==1))throw new Error("target must be an Element");
this._registerInstance();this._observationTargets.push({element:M,entry:null});this._monitorIntersections();this._checkForIntersections()};N.prototype.unobserve=function(M){this._observationTargets=this._observationTargets.filter(function(g){return g.element!=M});if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance()}};N.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};N.prototype.takeRecords=
function(){var M=this._queuedEntries.slice();this._queuedEntries=[];return M};N.prototype._initThresholds=function(M){var g=M||[0];if(!Array.isArray(g))g=[g];return g.sort().filter(function(b,w,q){if(typeof b!="number"||isNaN(b)||b<0||b>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return b!==q[w-1]})};N.prototype._parseRootMargin=function(M){var g=M||"0px";var b=g.split(/\s+/).map(function(w){var q=/^(-?\d*\.?\d+)(px|%)$/.exec(w);if(!q)throw new Error("rootMargin must be specified in pixels or percent");
return{value:parseFloat(q[1]),unit:q[2]}});b[1]=b[1]||b[0];b[2]=b[2]||b[0];b[3]=b[3]||b[1];return b};N.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL)this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL);else{R(window,"resize",this._checkForIntersections,true);R(Y,"scroll",this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&"MutationObserver"in window){this._domObserver=
new MutationObserver(this._checkForIntersections);this._domObserver.observe(Y,{attributes:true,childList:true,characterData:true,subtree:true})}}}};N.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;Z(window,"resize",this._checkForIntersections,true);Z(Y,"scroll",this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=
null}}};N.prototype._checkForIntersections=function(){var M=this._rootIsInDom();var g=M?this._getRootRect():ea();this._observationTargets.forEach(function(b){var w=b.element;var q=P(w);var z=this._rootContainsTarget(w);var h=b.entry;var p=M&&z&&this._computeTargetAndRootIntersection(w,g);var e=b.entry=new J({time:B(),target:w,boundingClientRect:q,rootBounds:g,intersectionRect:p});if(!h)this._queuedEntries.push(e);else if(M&&z){if(this._hasCrossedThreshold(h,e))this._queuedEntries.push(e)}else if(h&&
h.isIntersecting)this._queuedEntries.push(e)},this);if(this._queuedEntries.length)this._callback(this.takeRecords(),this)};N.prototype._computeTargetAndRootIntersection=function(M,g){if(window.getComputedStyle(M).display=="none")return;var b=P(M);var w=b;var q=ba(M);for(var z=false;!z;){var h=null;var p=q.nodeType==1?window.getComputedStyle(q):{};if(p.display=="none")return;if(q==this.root||q==Y){z=true;h=g}else if(q!=Y.body&&q!=Y.documentElement&&p.overflow!="visible")h=P(q);if(h){w=V(h,w);if(!w)break}q=
ba(q)}return w};N.prototype._getRootRect=function(){var M;if(this.root)M=P(this.root);else{var g=Y.documentElement;var b=Y.body;M={top:0,left:0,right:g.clientWidth||b.clientWidth,width:g.clientWidth||b.clientWidth,bottom:g.clientHeight||b.clientHeight,height:g.clientHeight||b.clientHeight}}return this._expandRectByRootMargin(M)};N.prototype._expandRectByRootMargin=function(M){var g=this._rootMarginValues.map(function(w,q){return w.unit=="px"?w.value:w.value*(q%2?M.width:M.height)/100});var b={top:M.top-
g[0],right:M.right+g[1],bottom:M.bottom+g[2],left:M.left-g[3]};b.width=b.right-b.left;b.height=b.bottom-b.top;return b};N.prototype._hasCrossedThreshold=function(M,g){var b=M&&M.isIntersecting?M.intersectionRatio||0:-1;var w=g.isIntersecting?g.intersectionRatio||0:-1;if(b===w)return;for(var q=0;q<this.thresholds.length;q++){var z=this.thresholds[q];if(z==b||z==w||z<b!==z<w)return true}};N.prototype._rootIsInDom=function(){return!this.root||da(Y,this.root)};N.prototype._rootContainsTarget=function(M){return da(this.root||
Y,M)};N.prototype._registerInstance=function(){if(ha.indexOf(this)<0)ha.push(this)};N.prototype._unregisterInstance=function(){var M=ha.indexOf(this);if(M!=-1)ha.splice(M,1)};window.IntersectionObserver=N;window.IntersectionObserverEntry=J})()}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"locationPlaceHolder":"END","name":"Browse Sale Banner","description":"Browse Sale Banners","disabled":true,"url":""});var v="livemagnoliavirginholidays.tags.browsesalebanner.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n\n\n    (function(window) {\n        var _messageHandler \x3d function() {\n            if (!!~window.location.pathname.indexOf('-browse')) {\n                _handleMessage();\n            }\n        };\n\n        var _handleMessage \x3d function() {\n            var redHot50\x3d !!~window.location.pathname.indexOf('/destinations/caribbean') || !!~window.location.pathname.indexOf('/destinations/middle-east') || !!~window.location.pathname.indexOf('/destinations/africa') || !!~window.location.pathname.indexOf('/destinations/asia-and-far-east') || !!~window.location.pathname.indexOf('/destinations/indian-ocean')\x26\x26 !!~window.location.pathname.indexOf('-browse');\n                        \n\n            var showBanner \x3d (redHot50)\n            if (showBanner) {\n                _addBanner();\n            }\n        };\n\n        var _addBanner \x3d function() {\n            var insertion \x3d document.querySelectorAll(\".reviews-block\");\n            if (document.getElementsByClassName('promotion-banner').length \x3c 1 \x26\x26 insertion.length \x3e 0) {\n                insertion[0].parentNode.appendChild(_createBanner());\n            }\n        };\n\n        var _createBanner \x3d function() {\n            var banner \x3d document.createElement('div');\n            var content \x3d document.createElement('div');\n            var contentText \x3d document.createElement('div');\n            var image \x3d document.createElement('img');\n            var heading \x3d document.createElement('h3');\n\n            var redHot50\x3d !!~window.location.pathname.indexOf('/destinations/caribbean') || !!~window.location.pathname.indexOf('/destinations/middle-east') || !!~window.location.pathname.indexOf('/destinations/africa') || !!~window.location.pathname.indexOf('/destinations/asia-and-far-east') || !!~window.location.pathname.indexOf('/destinations/indian-ocean')\x26\x26 !!~window.location.pathname.indexOf('-browse');\n\n            banner.classList.add('promotion-banner');\n            banner.classList.add('clearfix');\n\n            if (redHot50) {\n                heading.innerText \x3d 'Save an extra \u00a350pp - use code REDHOT50';\n                content.classList.add('promotion-content');\n                contentText.innerHTML \x3d 'Apply code at Guest Details page. Applicable to selected holidays in the Caribbean, Middle East, Africa, Asia and the Far East for departures before 31 Dec 2019.';\n                image.setAttribute('src', '/dam/virginholidays/bookflow-images/sale-beach.jpg');\n                content.appendChild(heading);\n                content.appendChild(contentText);\n                image.classList.add('img-responsive');\n                // banner.appendChild(image);\n                banner.appendChild(content);\n                return banner;\n\n            }\n        };\n        _messageHandler();\n    })(window);\n\x3c/script\x3e\n\n\x3cstyle\x3e\n    .promotion-banner {\n        background-color: #333;\n        color: white;\n        padding: 15px;\n        border-radius: 0px 0px 0px 0px;\n        border: 1px solid #dadada;\n        border-radius: 4px;\n        font-family: Gilroy;\n    }\n\n    .promotion-banner img {\n        width: 0%;\n        float: left;\n    }\n\n    .promotion-banner .promotion-content {\n        float: left;\n        width: 100%;\n        padding-left: 15px;\n    }\n\n    .promotion-banner h3 {\n        color: white;\n        font-family: gilroy-bold;\n        font-size: 22px;\n    margin-top: 0px;\n    margin-bottom: 2px;\n    }\n\n    .hotel-tab .promotion-banner {\n        margin-top: 15px;\n   }\n\x3c/style\x3e";
a.addClientFiltersList(["livemagnoliavirginholidays.filters.IncludeHotelBrowsePage","livemagnoliavirginholidays.filters.ExcludeQubitDisable"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Pinterest"});var v="livemagnoliavirginholidays.tags.pinterest.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.PinterestDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};
a.script=function(){!function(J){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};var N=window.pintrk;N.queue=[],N.version="3.0";var B=document.createElement("script");B.async=!0,B.src=J;var H=document.getElementsByTagName("script")[0];H.parentNode.insertBefore(B,H)}}("https://s.pinimg.com/ct/core.js");if(typeof pinterestTracked==="undefined"){pintrk("load","2614348757776");pintrk("page");if(!!~document.location.pathname.indexOf("/holiday/")||
!!~document.location.pathname.indexOf("/flydrive/")||!!~document.location.pathname.indexOf("/hotel/")||!!~document.location.pathname.indexOf("/car/")||!!~document.location.pathname.indexOf("/multidestination/"))pintrk("track","search");if(!!~document.location.pathname.indexOf("/checkout/confirmation"))pintrk("track","checkout");pinterestTracked=true}};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Browse Roundels","disabled":true});var v="livemagnoliavirginholidays.tags.browseroundels.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){var J=
window.location.pathname;var N=!!~J.indexOf("maldives-holidays")||!!~J.indexOf("mauritius-holidays")||!!~J.indexOf("seychelles-holidays");if(N&&!!~document.location.pathname.indexOf("/destinations")){var B=document.querySelectorAll(".roundel-image");var H=document.querySelectorAll(".banner-image");roundelURL="/dam/virginholidays/roundels/10-percent-off0.png";if(B.length>0)B[0].src=roundelURL;else if(H.length>0){var R=document.createElement("DIV");R.className="roundel-container";R.innerHTML="\x3cimg class\x3d'roundel-image' src\x3d'"+
roundelURL+"'\x3e";H[0].appendChild(R)}}};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"async":true,"usesDocumentWrite":false,"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"name":"Hotjar","active":true,"disabled":false,"locked":false,"locationObject":"HEAD","url":"","timeout":5E3});var v="livemagnoliavirginholidays.tags.hotjar.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3c!-- Hotjar Tracking Code for www.virginholidays.co.uk --\x3e\n\x3cscript\x3e\n    (function(h,o,t,j,a,r){\n        h.hj\x3dh.hj||function(){(h.hj.q\x3dh.hj.q||[]).push(arguments)};\n        h._hjSettings\x3d{hjid:98748,hjsv:6};\n        a\x3do.getElementsByTagName('head')[0];\n        r\x3do.createElement('script');r.async\x3d1;\n        r.src\x3dt+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n        a.appendChild(r);\n    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv\x3d');\n\t\n\t//Barbados Content\n\ttry {\n\t\tif (document.cookie.split(\"destinations-page-client\x3d\").length \x3e 1) {\n\t\t\tvar destinationsPageClientVariant \x3d document.cookie.split(\"destinations-page-client\x3d\")[1].split(\";\")[0];\n\t\t\tif(document.location.pathname \x3d\x3d\x3d \"/destinations/caribbean/barbados-holidays\"){\n\t\t\t\tif(destinationsPageClientVariant \x3d\x3d \"1\"){\n\t\t\t\t\thj('trigger', 'barbados_variant_new');\n\t\t\t\t} else {\n\t\t\t\t\thj('trigger', 'barbados_variant_old');\n\t\t\t\t}\n\t\t\t} \n\t\t}\n\t} catch (ignore) {}\n\t\n\t\n\tif (typeof(hjTrackingEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\twindow.addEventListener(\"message\", function(message) {\n\t\t\ttry {\n\t\t\t\tif (message.data.eventName \x3d\x3d\x3d \"BOOKING_CONFIRMATION\") {\n\t\t\t\t\tif(typeof(hj) \x3d\x3d \"function\"){\n\t\t\t\t\t\thjReference \x3d message.data.summary.tracking.bookingReference + \"\";\n\t\t\t\t\t\t\n\t\t\t\t\t\thj('tagRecording', ['Booking', hjReference]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\t\t\thjTrackingEventsSet \x3d true;\n\t\t});\n\t}\n\x3c/script\x3e";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Facebook","disabled":false,"id":54195166,"locked":false,"locationObject":"HEAD"});var v="livemagnoliavirginholidays.tags.facebook.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n\ttry {\n\t\tif(typeof(fbq) \x3d\x3d\x3d \"undefined\"){\n\t\t\t! function(f, b, e, v, n, t, s) {\n\t\t\t\tif (f.fbq) return;\n\t\t\t\tn \x3d f.fbq \x3d function() {\n\t\t\t\t\tn.callMethod ?\n\t\t\t\t\t\tn.callMethod.apply(n, arguments) : n.queue.push(arguments);\n\t\t\t\t};\n\t\t\t\tif (!f._fbq) f._fbq \x3d n;\n\t\t\t\tn.push \x3d n;\n\t\t\t\tn.loaded \x3d !0;\n\t\t\t\tn.version \x3d '2.0';\n\t\t\t\tn.queue \x3d [];\n\t\t\t\tt \x3d b.createElement(e);\n\t\t\t\tt.async \x3d !0;\n\t\t\t\tt.src \x3d v;\n\t\t\t\ts \x3d b.getElementsByTagName(e)[0];\n\t\t\t\ts.parentNode.insertBefore(t, s);\n\t\t\t}(window,\n\t\t\t\tdocument, 'script', '//connect.facebook.net/en_US/fbevents.js');\n\t\t\tfbq('init', '1155975407826761');\n\t\t\t\n\t\t\tif (typeof(fbTrackingEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\t\t\twindow.addEventListener(\"message\", function(message) {\n\t\t\t\t\tif (location.pathname \x3d\x3d\x3d \"/checkout/confirmation\" || location.pathname \x3d\x3d\x3d \"/checkout/confirmation/\") {\n\t\t\t\t\t\tif (message.data.eventName \x3d\x3d\x3d \"BOOKING_CONFIRMATION\") {\n\t\t\t\t\t\t\tfbBookingReference \x3d message.data.summary.tracking.bookingReference;\n\t\t\t\t\t\t\tfbUV \x3d universal_variable || {};\n\t\t\t\t\t\t\tfbPayment \x3d fbUV.payment || {};\n\t\t\t\t\t\t\tfbPaymentTotal \x3d fbPayment.totalPrice || \"\";\n\t\t\t\t\t\t\tfbq('track', 'Purchase', {\n\t\t\t\t\t\t\t\tvalue: fbPaymentTotal,\n\t\t\t\t\t\t\t\tcurrency: 'GBP'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfbTrackingEventsSet \x3d true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\t\n\ttry {\n\t\tif (document.location.pathname \x3d\x3d\x3d \"/\") {\n\t\t\tfbq('track', 'ViewContent');\n\t\t} else if (universal_variable.page.name \x3d\x3d\x3d \"Hotel Options\" || universal_variable.page.name \x3d\x3d\x3d \"Flight Options\") {\n\t\t\tfbq('track', 'InitiateCheckout');\n\t\t} else if (universal_variable.page.name \x3d\x3d\x3d \"Payment\") {\n\t\t\tfbq('track', 'AddToCart');\n\t\t} else if(document.location.pathname \x3d\x3d\x3d \"/destinations/caribbean/barbados-holidays/departure-beach\") {\n\t\t\tfbq('track', 'Lead');\n\t\t} else {\n\t\t\tfbq('track', 'PageView');\n\t\t}\n\t} catch (ignore) {}\n\x3c/script\x3e";
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludeFacebookDisabled","livemagnoliavirginholidays.filters.ExcludingQubitDisable"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["livemagnoliavirginholidays.tags.googleanalytics.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Content Square","disabled":false});var v="livemagnoliavirginholidays.tags.contentsquare.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.AllURLs3","livemagnoliavirginholidays.filters.ExcludeMMB","livemagnoliavirginholidays.filters.ExcludeCheckout"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};
a.script=function(){window._uxa=window._uxa||[];try{if(typeof window.universal_variable==="object"){if(typeof window.universal_variable.page==="object"){if(typeof window.universal_variable.page.name==="string")window._uxa.push(["setCustomVariable",1,"pageName",window.universal_variable.page.name,3]);if(typeof window.universal_variable.page.nameGroup==="string")window._uxa.push(["setCustomVariable",2,"nameGroup",window.universal_variable.page.nameGroup,3]);if(typeof window.universal_variable.page.category===
"string")window._uxa.push(["setCustomVariable",3,"pageCategory",window.universal_variable.page.category,3])}if(typeof window.universal_variable.search_results==="object"){if(typeof window.universal_variable.search_results.bookingType==="string")window._uxa.push(["setCustomVariable",4,"bookingType",window.universal_variable.search_results.bookingType,3]);if(typeof window.universal_variable.search_results.totalAdults==="number")window._uxa.push(["setCustomVariable",5,"numAdults",window.universal_variable.search_results.totalAdults,
3]);if(typeof window.universal_variable.search_results.totalChildren==="number")window._uxa.push(["setCustomVariable",6,"numChildren",window.universal_variable.search_results.totalChildren,3]);if(typeof window.universal_variable.search_results.totalInfants==="number")window._uxa.push(["setCustomVariable",7,"numInfants",window.universal_variable.search_results.totalInfants,3]);if(typeof window.universal_variable.search_results.totalPassengers==="number")window._uxa.push(["setCustomVariable",8,"totalPassengers",
window.universal_variable.search_results.totalPassengers,3]);if(typeof window.universal_variable.search_results.duration==="string")window._uxa.push(["setCustomVariable",9,"duration",window.universal_variable.search_results.duration,3]);if(typeof window.universal_variable.search_results.extras==="string")window._uxa.push(["setCustomVariable",10,"extras",window.universal_variable.search_results.extras,3]);if(typeof window.universal_variable.search_results.locationName==="string")window._uxa.push(["setCustomVariable",
11,"locationName",window.universal_variable.search_results.locationName,3])}}}catch(N){}if(typeof CS_CONF==="undefined"){window._uxa.push(["setPath",window.location.pathname+window.location.hash.replace("#","?__")]);var J=document.createElement("script");J.type="text/javascript";J.async=true;J.src="//t.contentsquare.net/uxa/6a6f1b368ecab.js";document.getElementsByTagName("head")[0].appendChild(J)}else window._uxa.push(["trackPageview",window.location.pathname+window.location.hash.replace("#","?__")]);
if(typeof csTrackingEventsSet==="undefined")window.addEventListener("message",function(N){try{if(location.pathname==="/checkout/confirmation"||location.pathname==="/checkout/confirmation/")if(N.data.eventName==="BOOKING_CONFIRMATION"){csBookingReference=N.data.summary.tracking.bookingReference;csBookingPrice=N.data.summary.totalPrice;window._uxa=window._uxa||[];window._uxa.push(["ecommerce:addTransaction",{"id":csBookingReference,"revenue":csBookingPrice}]);window._uxa.push(["ecommerce:send"])}}catch(B){}csTrackingEventsSet=
true})};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Snapchat"});var v="livemagnoliavirginholidays.tags.snapchat.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript type\x3d'text/javascript'\x3e\n  (function(win, doc, sdk_url) {\n      if (win.snaptr) return;\n      var tr \x3d win.snaptr \x3d function() {\n          tr.handleRequest ? tr.handleRequest.apply(tr, arguments) : tr.queue.push(arguments);\n      };\n      tr.queue \x3d [];\n      var s \x3d 'script';\n      var new_script_section \x3d doc.createElement(s);\n      new_script_section.async \x3d !0;\n      new_script_section.src \x3d sdk_url;\n      var insert_pos \x3d doc.getElementsByTagName(s)[0];\n      insert_pos.parentNode.insertBefore(new_script_section, insert_pos);\n  })(window, document, 'https://sc-static.net/scevent.min.js');\n\n  snaptr('init', 'eebea7fe-c592-4f5f-86ac-9fd978cab3ca');\n  snaptr('track', 'PAGE_VIEW');\n\x3c/script\x3e";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.SnapchatDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"usesDocumentWrite":false,"name":"Forward3D","disabled":false});var v="livemagnoliavirginholidays.tags.forward3d.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=
function(){function J(N,B,H){try{var R=document.createElement("IMG");R.id="f3dDCImg_"+N;R.style.display="none";R.src="//ad.doubleclick.net/ddm/activity/src\x3d5969207;type\x3df3dcount;cat\x3d"+N+";"+B+";dc_lat\x3d;dc_rdid\x3d;tag_for_child_directed_treatment\x3d;tfua\x3d;npa\x3d;ord\x3d"+H;if(document.querySelectorAll("#f3dDCImg_"+N).length===0)document.querySelectorAll("body")[0].append(R)}catch(Z){}}if(document.location.pathname==="/")J("homepage+standard","","1");if(document.location.pathname===
"/blog")J("holsblog+standard","","1");if(document.location.pathname==="/destinations")J("destinat+standard","","1");if(document.location.pathname==="/holiday-types")J("holstype+standard","","1");if(document.location.pathname==="/saturday-night-takeaway")J("promcomp+standard","","1");if(document.location.pathname==="/special-offers")J("deals+standard","","1");if((!!~document.location.pathname.indexOf("/holiday/")||!!~document.location.pathname.indexOf("/flydrive/")||!!~document.location.pathname.indexOf("/hotel/")||
!!~document.location.pathname.indexOf("/multidestination/")||!!~document.location.pathname.indexOf("/car/"))&&(!!~document.location.pathname.indexOf("options")||!!~document.location.pathname.indexOf("flights")||!!~document.location.pathname.indexOf("transfers")||!!~document.location.pathname.indexOf("extras")))J("basket+standard","","1");else if((!!~document.location.pathname.indexOf("/holiday/")||!!~document.location.pathname.indexOf("/flydrive/")||!!~document.location.pathname.indexOf("/hotel/")||
!!~document.location.pathname.indexOf("/multidestination/")||!!~document.location.pathname.indexOf("/car/"))&&!~document.location.pathname.indexOf("options")&&!~document.location.pathname.indexOf("flights")&&!~document.location.pathname.indexOf("transfers")&&!~document.location.pathname.indexOf("extras"))J("search+standard","","1");if(document.location.pathname==="/checkout/confirmation")J("chekcomp+transactions","","1");if(document.location.pathname==="/checkout/details")J("chekstar+standard","",
"1");if(document.location.pathname==="/travel-extras")J("travextr+standard","","1");if(document.location.pathname==="/who-are-we/overview")J("institut+standard","","1");if(document.location.pathname==="/yourbooking")J("usermenu+standard","","1")};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Phone Number Browse","disabled":false,"id":52891035,"locked":false,"locationObject":"HEAD"});var v="livemagnoliavirginholidays.tags.phonenumberbrowse.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n    (function() {\n\t\tvar phoneNumber;\n\t\tvar replaceOnlyNumber \x3d \"0203 668 8011\";\n        if (document.location.pathname.indexOf(\"/virgin-holidays-experiences\") !\x3d\x3d -1) {\n            phoneNumber \x3d \"0344 557 1725\";\n        } else if (document.location.pathname.indexOf(\"/holiday-types/group-bookings/overview\") !\x3d\x3d -1) {\n            phoneNumber \x3d \"0344 573 8345\";\n        }\n        var $topNavPhone \x3d document.querySelectorAll('.navbar-text.contact \x3e a')[0];\n        if ($topNavPhone \x26\x26 phoneNumber !\x3d\x3d undefined \x26\x26 $topNavPhone.innerHTML.indexOf(replaceOnlyNumber) !\x3d\x3d -1) {\n            $topNavPhone.href \x3d 'tel:' + phoneNumber;\n            $topNavPhone.innerHTML \x3d '\x3ci class\x3d\"icon-phone\"\x3e\x3c/i\x3e ' + phoneNumber;\n        }\n        var $contactDarkenedPhone \x3d document.querySelectorAll('.contact.darkened \x3e a')[0];\n        if ($contactDarkenedPhone \x26\x26 phoneNumber !\x3d\x3d undefined \x26\x26 $contactDarkenedPhone.innerHTML.indexOf(replaceOnlyNumber) !\x3d\x3d -1) {\n            $contactDarkenedPhone.href \x3d 'tel:' + phoneNumber;\n            $contactDarkenedPhone.querySelectorAll(\"span\")[0].innerHTML \x3d phoneNumber;\n        }\n        var $footerPhone \x3d document.querySelectorAll('.ways-to-contact-container .footer-link')[1];\n        if ($footerPhone \x26\x26 phoneNumber !\x3d\x3d undefined \x26\x26 $footerPhone.innerHTML.indexOf(replaceOnlyNumber) !\x3d\x3d -1) {\n            $footerPhone.href \x3d 'tel:' + phoneNumber;\n            $footerPhone.getElementsByTagName('h4')[0].innerText \x3d 'Call ' + phoneNumber;\n        }\n        var $rightHandPhone \x3d document.querySelectorAll('.phone-item \x3e a')[0];\n        if ($rightHandPhone \x26\x26 phoneNumber !\x3d\x3d undefined \x26\x26 $rightHandPhone.innerHTML.indexOf(replaceOnlyNumber) !\x3d\x3d -1) {\n            $rightHandPhone.href \x3d 'tel:' + phoneNumber;\n            $rightHandPhone.innerText \x3d 'Call ' + phoneNumber;\n        }\n    })();\n\x3c/script\x3e";
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll","livemagnoliavirginholidays.filters.NonBookflowOrWonderlist","livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludePhoneBrowseDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"www.googleadservices.com/pagead/conversion_async.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"prePostWindowScope":true,"name":"Google Remarketing - Async","disabled":false,"id":52000013,"locked":false,"locationObject":"BODY"});var v="livemagnoliavirginholidays.tags.googleremarketing.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeGoogleRemarketingDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){var J={};try{J.pagetype=universal_variable.page.name}catch(N){}try{if(universal_variable.page.name.indexOf("results")===-1){J.hotelname=universal_variable.search_results.hotels[0].name;J.priceperperson=universal_variable.search_results.hotels[0].pricePerPerson}}catch(N){}try{J.location=
universal_variable.search_results.locationName}catch(N){}try{J.depdate=universal_variable.search_results.departureDate}catch(N){}try{J.partysize=universal_variable.search_results.totalPassengers}catch(N){}try{J.packagetype=universal_variable.search_results.type}catch(N){}try{if(universal_variable.page.category==="Complete Holiday"||universal_variable.page.category==="Hotel Only"||universal_variable.page.category==="Fly Drive"||universal_variable.page.category==="Car Hire")window.google_trackConversion({google_conversion_id:995741963,
google_conversion_label:"DoFYCJWr6QYQi6Ln2gM",google_custom_params:J,google_remarketing_only:false,google_conversion_language:"en",google_conversion_format:"2",google_conversion_color:"ffffff",google_conversion_value:0})}catch(N){}try{if(universal_variable.page.name==="Confirmation"){window.google_trackConversion({google_conversion_id:968020977,google_conversion_label:"9nx3CN_ZzgIQ8afLzQM",google_custom_params:J,google_remarketing_only:false,google_conversion_language:"en",google_conversion_format:"3",
google_conversion_color:"ffffff",google_conversion_value:universal_variable.transaction.totalCost,google_conversion_currency:"GBP"});window.google_trackConversion({google_conversion_id:994229237,google_conversion_label:"bXQWCLO9gW4Q9feK2gM",google_custom_params:J,google_remarketing_only:false,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_value:universal_variable.transaction.totalCost,google_conversion_currency:"GBP"})}}catch(N){}}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Bing"});var v="livemagnoliavirginholidays.tags.bing.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\n    (function(w, d, t, r, u) {\n        var f, n, i;\n        w[u] \x3d w[u] || [], f \x3d function() {\n            var o \x3d {\n                ti: "5511070"\n            };\n            o.q \x3d w[u], w[u] \x3d new UET(o), w[u].push("pageLoad")\n        }, n \x3d d.createElement(t), n.src \x3d r, n.async \x3d 1, n.onload \x3d n.onreadystatechange \x3d function() {\n            var s \x3d this.readyState;\n            s \x26\x26 s !\x3d\x3d "loaded" \x26\x26 s !\x3d\x3d "complete" || (f(), n.onload \x3d n.onreadystatechange \x3d null)\n        }, i \x3d d.getElementsByTagName(t)[0], i.parentNode.insertBefore(n, i)\n    })(window, document, "script", "//bat.bing.com/bat.js", "uetq");\n    //window.uetq \x3d window.uetq || [];  \n    //window.uetq.push (\'event\', \'signup\', {event_category: \'newsletter\', event_label: \'voyages\', event_value: \'1\'});  \n\x3c/script\x3e';
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll","livemagnoliavirginholidays.filters.ExcludingQubitDisable1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":false,"usesDocumentWrite":true,"name":"Usabilla","disabled":false,"id":40003880,"locked":false,"locationObject":"BODY"});var v="livemagnoliavirginholidays.tags.usabilla.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3c!-- begin usabilla live embed code --\x3e\n\x3cscript type\x3d"text/javascript"\x3e/*{literal}\x3c![CDATA[*/window.lightningjs||function(c){function g(b,d){d\x26\x26(d+\x3d(/\\?/.test(d)?"\x26":"?")+"lv\x3d1");c[b]||function(){var i\x3dwindow,h\x3ddocument,j\x3db,g\x3dh.location.protocol,l\x3d"load",k\x3d0;(function(){function b(){a.P(l);a.w\x3d1;c[j]("_load")}c[j]\x3dfunction(){function m(){m.id\x3de;return c[j].apply(m,arguments)}var b,e\x3d++k;b\x3dthis\x26\x26this!\x3di?this.id||0:0;(a.s\x3da.s||[]).push([e,b,arguments]);m.then\x3dfunction(b,c,h){var d\x3da.fh[e]\x3da.fh[e]||[],j\x3da.eh[e]\x3da.eh[e]||[],f\x3da.ph[e]\x3da.ph[e]||[];b\x26\x26d.push(b);c\x26\x26j.push(c);h\x26\x26f.push(h);return m};return m};var a\x3dc[j]._\x3d{};a.fh\x3d{};a.eh\x3d{};a.ph\x3d{};a.l\x3dd?d.replace(/^\\/\\//,(g\x3d\x3d"https:"?g:"http:")+"//"):d;a.p\x3d{0:+new Date};a.P\x3dfunction(b){a.p[b]\x3dnew Date-a.p[0]};a.w\x26\x26b();i.addEventListener?i.addEventListener(l,b,!1):i.attachEvent("on"+l,b);var q\x3dfunction(){function b(){return["\x3chead\x3e\x3c/head\x3e\x3c",c,\' onload\x3d"var d\x3d\',n,";d.getElementsByTagName(\'head\')[0].",d,"(d.",g,"(\'script\')).",i,"\x3d\'",a.l,"\'\\"\x3e\x3c/",c,"\x3e"].join("")}var c\x3d"body",e\x3dh[c];if(!e)return setTimeout(q,100);a.P(1);var d\x3d"appendChild",g\x3d"createElement",i\x3d"src",k\x3dh[g]("div"),l\x3dk[d](h[g]("div")),f\x3dh[g]("iframe"),n\x3d"document",p;k.style.display\x3d"none";e.insertBefore(k,e.firstChild).id\x3do+"-"+j;f.frameBorder\x3d"0";f.id\x3do+"-frame-"+j;/MSIE[ ]+6/.test(navigator.userAgent)\x26\x26(f[i]\x3d"javascript:false");f.allowTransparency\x3d"true";l[d](f);try{f.contentWindow[n].open()}catch(s){a.domain\x3dh.domain,p\x3d"javascript:var d\x3d"+n+".open();d.domain\x3d\'"+h.domain+"\';",f[i]\x3dp+"void(0);"}try{var r\x3df.contentWindow[n];r.write(b());r.close()}catch(t){f[i]\x3dp+\'d.write("\'+b().replace(/"/g,String.fromCharCode(92)+\'"\')+\'");d.close();\'}a.P(2)};a.l\x26\x26setTimeout(q,0)})()}();c[b].lv\x3d"1";return c[b]}var o\x3d"lightningjs",k\x3dwindow[o]\x3dg(o);k.require\x3dg;k.modules\x3dc}({});\nwindow.usabilla_live \x3d lightningjs.require("usabilla_live", "//w.usabilla.com/365ca6ff06ee.js");\n/*]]\x3e{/literal}*/\x3c/script\x3e\n\x3c!-- end usabilla live embed code --\x3e\n\n\n\x3cscript\x3e\n    if(document.querySelectorAll("#usabillaStyle").length \x3d\x3d\x3d 0){\n        var usabillaStyle \x3d document.createElement("style");\n        usabillaStyle.id \x3d "usabillaStyle";\n        usabillaStyle.innerHTML \x3d ".usabilla_live_button_container { left: -7px!important; }";\n        if(!!~window.navigator.userAgent.indexOf("Android") || !!~window.navigator.userAgent.indexOf("Phone")){\n            usabillaStyle.innerHTML \x3d usabillaStyle.innerHTML + ".usabilla_live_button_container { display: none!important; }";\n        }\n        document.querySelectorAll("body")[0].appendChild(usabillaStyle);\n    }\n\x3c/script\x3e\n\x3cscript\x3e\n    var vwoTestArray \x3d {}\n    try {\n        cookieListUsabilla \x3d document.cookie.split(";");\n        for (i \x3d 0; i \x3c cookieListUsabilla.length; i++) {\n            if (!!~cookieListUsabilla[i].indexOf("_vis_opt_exp_") \x26\x26 !!~cookieListUsabilla[i].indexOf("_combi")) {\n                cookieToken \x3d cookieListUsabilla[i].split("\x3d")[0];\n                vwoExp \x3d "VWO: " + cookieToken.replace("_vis_opt_exp_", "").replace("_combi", "")\n                vwoVariant \x3d cookieListUsabilla[i].split("\x3d")[1];\n                vwoTestArray[vwoExp] \x3d vwoVariant;\n            }\n            if (!!~cookieListUsabilla[i].indexOf("options_5pl")) {\n                cookieToken \x3d cookieListUsabilla[i].split("\x3d")[0];\n                vwoVariant \x3d cookieListUsabilla[i].split("\x3d")[1];\n                vwoTestArray[cookieToken] \x3d vwoVariant;\n            }\n            if (i \x3d\x3d\x3d (cookieListUsabilla.length - 1)) {\n                window.usabilla_live("data", {\n                    custom: vwoTestArray\n                });\n            }\n        }\n    } catch (ignore) {}\n\n    window.usabilla_live(\'setEventCallback\', function(category, action, label, value) {\n        //Temp disabled as not needed?\n\t\t// ga(function() {\n            // var trackers \x3d ga.getAll();\n            // for (var i \x3d 0; i \x3c trackers.length; i++) {\n                // var trackerName \x3d trackers[i].get(\'name\');\n                // ga(trackerName + \'.send\', \'event\', \'Usabilla Live\', action, label, value, {\n                    // \'nonInteraction\': true\n                // });\n            // }\n        // })\n\t\t\n\t\tif(action \x3d\x3d\x3d "Campaign:Open" \x26\x26 typeof(popupSaturationCookieSet) !\x3d\x3d "undefined"){\n\t\t\tpopupSaturationCookieSet();\n\t\t}\n\t\t\n\t\tif(action !\x3d "Campaign:Open") {\n\t\t\treturn;\n\t\t}\n\t\twindow.addEventListener("message", function(event) {\n\t\t\t// Listen to messages from the Usabilla Cloudfront domain\n\t\t\tif(!/d6tizftlrpuof\\.cloudfront\\.net/.test(event.origin)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tvar data \x3d JSON.parse(event.data);\n\t\t\t\tif(data.type \x3d\x3d\x3d "pageSwitch" \x26\x26 data.end) {\n\t\t\t\t\tfor(var key in data.data) {\n\t\t\t\t\t\tif((label \x3d\x3d\x3d "0ec0b8cc0d27" \x26\x26 key \x3d\x3d\x3d "1ease") || (label \x3d\x3d\x3d "85d5e2097c2e" \x26\x26 key \x3d\x3d\x3d "1ease") || (label \x3d\x3d\x3d "9089dc6df3fd" \x26\x26 key \x3d\x3d\x3d "1Ease")){\n\t\t\t\t\t\t\teaseScore \x3d data.data[key];\n\t\t\t\t\t\t\tga(\'send\', \'event\', \'Usabilla Campaign\', label + " - " + key, data.data[key], { \'dimension56\': easeScore } );\n\t\t\t\t\t\t} else if ((label \x3d\x3d\x3d "ec812dd3c4e3" || label \x3d\x3d\x3d "be92dfe2de1d") \x26\x26 key \x3d\x3d\x3d "Ease_Score") {\n\t\t\t\t\t\t\teaseScore \x3d data.data[key];\n\t\t\t\t\t\t\tga(\'send\', \'event\', \'Usabilla Campaign\', label + " - " + key, data.data[key], { \'dimension56\': easeScore } );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tga(\'send\', \'event\', \'Usabilla Campaign\', label + " - " + key, data.data[key] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(ignore) { }\n\t\t});\n\t});\n\t\n\x3c/script\x3e';
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll","livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeUsabillaDisabled","livemagnoliavirginholidays.filters.ExcludeMagnoliaInterface","livemagnoliavirginholidays.filters.ExcludeMultiDestinationFormLightbox","livemagnoliavirginholidays.filters.ExcludeTourCallbackLightbox","livemagnoliavirginholidays.filters.ExcludeC2CWindows"]);a.addClientVariablesMap({});a.addParameters([]);
a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Neustar"});var v="livemagnoliavirginholidays.tags.neustar.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable1","livemagnoliavirginholidays.filters.NeustarDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["livemagnoliavirginholidays.tags.googleanalytics.Tag"]);
a.pre=function(){};a.script=function(){try{if(document.querySelectorAll("#neustarFacebook").length===0){gaCIDVar=localStorage.getItem("gaCIDVar")||ga.getAll()[0].get("clientId")||null;if(gaCIDVar!==null)localStorage.setItem("gaCIDVar",gaCIDVar);var J=document.createElement("IMG");J.style.display="none";J.id="neustarFacebook";J.src="https://www.facebook.com/tr?id\x3d843048712567728\x26ev\x3dPageView\x26cd[order_id]\x3d"+gaCIDVar;document.body.append(J)}}catch(H){}try{if(document.querySelectorAll("#neustarAGKN").length===
0){gaCIDVar=localStorage.getItem("gaCIDVar")||ga.getAll()[0].get("clientId")||null;if(gaCIDVar!==null)localStorage.setItem("gaCIDVar",gaCIDVar);if(!!~document.cookie.indexOf("adiV\x3d"))rTapVisitorID=document.cookie.split("adiV\x3d")[1].split(";")[0];else rTapVisitorID=null;var N=(Math.random()*1E13).toFixed(0);var B=document.createElement("IMG");B.style.display="none";B.id="neustarAGKN";B.src="https://d.agkn.com/pixel/9551/?che\x3d"+N+"\x26gauid\x3d"+gaCIDVar+"\x26rtid\x3d"+rTapVisitorID;document.body.append(B)}}catch(H){}};
a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Cookie Setting","disabled":false,"id":40003921,"locked":false,"locationObject":"BODY"});var v="livemagnoliavirginholidays.tags.cookiesetting.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\n\tvar today \x3d new Date();\n    var expire \x3d new Date();\n    var expire7Days \x3d new Date();\n\tvar expire1Hour \x3d new Date();\n    expire.setTime(today.getTime() + 3600000 * 24 * 1000);\n    expire7Days.setTime(today.getTime() + 3600000 * 24 * 7);\n\texpire1Hour.setTime(today.getTime() + 3600000);\n\n\n    var pathName \x3d window.location.pathname;\n    var checkoutSessionCount \x3d 0;\n\t\n\tfunction isNotUndefined(obj) {\n\t\treturn typeof obj !\x3d\x3d \'undefined\';\n\t}\n\n\tfunction safeGetFromObject(obj, path) {\n\t\tvar currentObj \x3d obj;\n\n\t\tpath.split(\'.\').forEach(function(level) { \n\t\t\tcurrentObj \x3d isNotUndefined(currentObj[level]) ? currentObj[level] : \'\';\n\t\t});\n\n\t\treturn currentObj;\n\t}\n\t\n\t\n\tfunction popupSaturationCookieSet() {\n\t\tif(!~document.cookie.indexOf("popupSaturation")){\n\t\t\tdocument.cookie \x3d "popupSaturation\x3d1" + ";path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + expire1Hour.toGMTString();\n\t\t}\n\t}\n\t\n\t\n\ttry {\n\t\tvar allCookie \x3d unescape(document.cookie);\n\t\tif(!!~allCookie.indexOf(\'saved-searches\') \x26\x26 allCookie.indexOf(\'"region":\')){\n\t\t\tvar savedSearchRegion \x3d allCookie.split(\'saved-searches\')[1].split(\'"region":\')[1].split(",")[0].replace(/"/g, \'\');\n\t\t\tdocument.cookie \x3d "savedRegion\x3d" + savedSearchRegion + ";path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + expire.toGMTString();\n\t\t}\n\t} catch (ignore) {}\n\t\n\t\n\t\n\twindow.addEventListener("message", function(message) {\n\t\ttry {\n\t\t\tif (message.data.eventName \x3d\x3d\x3d "BOOKING_CONFIRMATION") {\n\t\t\t\tholidayEndDate \x3d safeGetFromObject(universal_variable, \'search_results\') || safeGetFromObject(universal_variable, \'booking\') || {};\n\t\t\t\tif(holidayEndDate !\x3d\x3d ""){\n\t\t\t\t\tdocument.cookie \x3d "lastBookedTemp\x3dhasBooked;path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + moment(holidayEndDate).format(\'ddd, DD MMM YYYY HH:mm:SS\') + \' GMT\';\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\t});\n\ttry {\n\t\tif(!!~document.location.pathname.indexOf("yourbooking")){\n\t\t\tholidayEndDate \x3d safeGetFromObject(universal_variable, \'booking.holiday.endDate\');\n\t\t\tif(holidayEndDate !\x3d\x3d ""){\n\t\t\t\tdocument.cookie \x3d "lastBookedTemp\x3dhasBooked;path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + moment(holidayEndDate).format(\'ddd, DD MMM YYYY HH:mm:SS\') + \' GMT\';\n\t\t\t}\t\t\n\t\t}\t\n\t} catch (ignore) {}\n\t\n    try {\n        if (document.cookie.split("checkoutSessions\x3d").length \x3e 0) {\n            checkoutSessionCount \x3d Number(document.cookie.split("checkoutSessions\x3d")[1].split(";")[0]);\n        }\n    } catch (ignore) {}\n\n    if (!sessionStorage.getItem("checkoutSession") \x26\x26 !!~pathName.indexOf("checkout")) {\n        document.cookie \x3d "checkoutSessions\x3d" + (checkoutSessionCount + 1) + ";path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + expire7Days.toGMTString();\n        sessionStorage.setItem("checkoutSession", "1");\n    }\n\n    try {\n        if ((universal_variable.page.name \x3d\x3d\x3d "Combined Options" || universal_variable.page.name \x3d\x3d\x3d "Hotel Options") \x26\x26 universal_variable.search_results.hotels[0].id) {\n            if (document.location.hostname \x3d\x3d\x3d "www.virginholidays.co.uk") {\n                document.cookie \x3d "lastViewedTboxId\x3d" + universal_variable.search_results.hotels[0].id + ";path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + expire.toGMTString();\n            } else {\n                document.cookie \x3d "lastViewedTboxId\x3d" + universal_variable.search_results.hotels[0].id + ";path\x3d/;domain\x3d" + document.location.hostname + ";expires\x3d" + expire.toGMTString();\n            }\n        }\n    } catch (ignore) {}\n    try {\n        if (document.referrer.indexOf("www.virginholidayscruises.co.uk") !\x3d\x3d -1) {\n            document.cookie \x3d "lastViewedTboxId\x3dCruise;path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + expire.toGMTString();\n        }\n    } catch (ignore) {}\n    try {\n        document.cookie \x3d "VHOLS_NEW_REQUEST\x3d0;path/;domain\x3dvirginholidays.co.uk;expires\x3d" + expire.toGMTString();\n    } catch (ignore) {}\n\t\n\t//Holiday Type\n\t//https://www.virginholidays.co.uk/holiday-types/all-inclusive-holidays/overview\n\ttry {\n\t\tif(!!~document.location.pathname.indexOf("/holiday-types/")){\n\t\t\tvar holidayType \x3d document.location.pathname.split("/")[2];\n\t\t\tif(holidayType !\x3d\x3d ""){\n\t\t\t\tdocument.cookie \x3d "lastViewedHolidayType\x3d" + holidayType +";path\x3d/;domain\x3dvirginholidays.co.uk;expires\x3d" + expire.toGMTString();\n\t\t\t}\t\t\n\t\t}\t\n\t} catch (ignore) {}\n\t\n\t\n\x3c/script\x3e';a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeCookieDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"LinkedIn"});var v="livemagnoliavirginholidays.tags.linkedin.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  _linkedin_data_partner_id \x3d "163225";\n  (function(){var s \x3d document.getElementsByTagName("script")[0];\n  var b \x3d document.createElement("script");\n  b.type \x3d "text/javascript";b.async \x3d true;\n  b.src \x3d "https://snap.licdn.com/li.lms-analytics/insight.min.js";\n  s.parentNode.insertBefore(b, s);})();\n\x3c/script\x3e\n\x3cnoscript\x3e\n\x3cimg height\x3d"1" width\x3d"1" style\x3d"display:none;" alt\x3d"" src\x3d"https://dc.ads.linkedin.com/collect/?pid\x3d163225\x26fmt\x3dgif" /\x3e\n\x3c/noscript\x3e';a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"63lcdvtt.micpn.com/p/js/1.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MovableInk","disabled":false,"id":50820024,"locked":false,"locationObject":"HEAD"});var v="livemagnoliavirginholidays.tags.movableink.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeMovableInkDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"CRO Tests Ongoing","disabled":false});var v="livemagnoliavirginholidays.tags.crotestsongoing.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function J(){if(document.querySelectorAll("#c2cHideEl").length===
0){var R=document.createElement("style");R.id="c2cHideEl";R.innerHTML="#clickToChatWrapper,.connecting-experts,.expert-pod { display:none!important; } ";document.body.appendChild(R)}}var N=Math.floor(Math.random()*100+1);if(!localStorage.getItem("longRunC2CVariant"))localStorage.setItem("longRunC2CVariant",N);if(localStorage.getItem("longRunC2CVariant")>95)J();var B=Math.floor(Math.random()*100+1);if(!localStorage.getItem("longRunSalesBannerVariant"))localStorage.setItem("longRunSalesBannerVariant",
B);if(localStorage.getItem("longRunSalesBannerVariant")>95){if(document.querySelectorAll("#hideSalesBanner").length===0){var H=document.createElement("style");H.id="hideSalesBanner";H.innerHTML=".sales-banner { display:none!important; }";if(document.querySelectorAll(".sales-banner h2").length===0||document.querySelectorAll(".sales-banner h2").length>0&&!~document.querySelectorAll(".sales-banner h2")[0].innerHTML.indexOf("10%"))document.body.appendChild(H)}if(document.querySelectorAll("#hideSalesBanner").length>
0&&document.querySelectorAll(".sales-banner h2").length>0&&!!~document.querySelectorAll(".sales-banner h2")[0].innerHTML.indexOf("10%"))document.querySelectorAll("#hideSalesBanner")[0].parentElement.removeChild(document.querySelectorAll("#hideSalesBanner")[0])}};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":false,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Priority Variable Setting","disabled":false,"id":52578951,"locked":false,"locationObject":"HEAD"});var v="livemagnoliavirginholidays.tags.onsitesearchhide.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\n  \n  function uvNumberPad(number) {\n    return (number \x3c 10 ? \'0\' : \'\') + number;\n  }\n  function containsObject(obj, list) {\n    var i;\n    for (i \x3d 0; i \x3c list.length; i++) {\n        if (list[i] \x3d\x3d\x3d obj) {\n            return true;\n        }\n    }\n    return false;\n  }\n   function getElementsByAttribute(oElm, strTagName, strAttributeName, strAttributeValue) {\n\t    var arrElements \x3d (strTagName \x3d\x3d "*" \x26\x26 oElm.all) ? oElm.all : oElm.getElementsByTagName(strTagName);\n\t    var arrReturnElements \x3d [];\n\t    var oAttributeValue \x3d (typeof strAttributeValue !\x3d "undefined") ? new RegExp("(.*)" + strAttributeValue + "(.*)") : null;\n\t    var oCurrent;\n\t    var oAttribute;\n\t    for (var i \x3d 0; i \x3c arrElements.length; i++) {\n\t        oCurrent \x3d arrElements[i];\n\t        oAttribute \x3d oCurrent.getAttribute \x26\x26 oCurrent.getAttribute(strAttributeName);\n\t        if (typeof oAttribute \x3d\x3d "string" \x26\x26 oAttribute.length \x3e 0) {\n\t            if (typeof strAttributeValue \x3d\x3d "undefined" || (oAttributeValue \x26\x26 oAttributeValue.test(oAttribute))) {\n\t                arrReturnElements.push(oCurrent);\n\t            }\n\t        }\n\t    }\n\t    return arrReturnElements;\n\t}\n  \n  function isNotUndefined(obj) {\n\t\treturn typeof obj !\x3d\x3d \'undefined\';\n\t}\n  function safeGetFromObject(obj, path) {\n      var currentObj \x3d obj;\n\n      path.split(\'.\').forEach(function(level) {\u00a0\n          currentObj \x3d isNotUndefined(currentObj[level]) ? currentObj[level] : \'\';\n      });\n\n      return currentObj;\n  }\n  \n\tif(typeof(universal_variable) !\x3d\x3d "undefined" \x26\x26 universal_variable.page \x26\x26 universal_variable.page.name \x3d\x3d\x3d "Search Results Interstitial"){\n\t\tif(document.querySelectorAll(".error-page").length \x3e 0){\n\t\t\tuniversal_variable.page.name \x3d "Search Results";\n\t\t\tuniversal_variable.page.nameGroup \x3d "Search Results";\n\t\t}\n\t}\n\t\n\ttry { \n\t\ttrPageName \x3d safeGetFromObject(universal_variable, \'page.name\') || window.location.pathname;\n\t} catch(ignore) {}\n\ttry { \n\t\tif(!!~window.location.pathname.indexOf("checkout") \x26\x26 universal_variable \x26\x26 universal_variable.page \x26\x26 universal_variable.page.name \x3d\x3d\x3d "timed out"){\n\t\t\tuniversal_variable.page.category \x3d "Timeout"\n\t\t}\n\t\t\n\t\ttrPageCategory \x3d safeGetFromObject(universal_variable, \'page.category\') || window.location.pathname.split("/")[1] || "";\n\t} catch(ignore) {}\n\t\n\tfunction pageNameFix(trPageName){\n\t\tif(trPageName \x3d\x3d\x3d "confirmation"){ return "Confirmation"; }\n\t\telse if(trPageName \x3d\x3d\x3d "payment error"){ return "Payment Error"; }\n\t\telse if(trPageName \x3d\x3d\x3d "payment" || trPageName \x3d\x3d\x3d "card"){ return "Payment" }\n\t\telse if(trPageName \x3d\x3d\x3d "3ds"){ return "3D Secure" }\n\t\telse if(trPageName \x3d\x3d\x3d "details"){ return "Passenger Details" }\n\t\telse { return trPageName; }\n\t}\n\t\n\tfunction pageCategoryFix(trPageCategory){\n\t\tif(trPageCategory \x3d\x3d\x3d "yourbooking"){ return "Manage My Booking"; }\n\t\telse { return holidayTypeFix(trPageCategory) }\n\t}\n\t\n\tfunction holidayTypeFix(trHolidayType){\n\t\tif(trHolidayType \x3d\x3d\x3d "complete" || trHolidayType \x3d\x3d\x3d "holiday"){ return "Complete Holiday"; }\n\t\telse if(trHolidayType \x3d\x3d\x3d "flight+hotel"){ return "Flight And Hotel"; }\n\t\telse if(trHolidayType \x3d\x3d\x3d "flydrive"){ return "Flydrive"; }\n\t\telse if(trHolidayType \x3d\x3d\x3d "multicentre" || trHolidayType \x3d\x3d\x3d "multidestination" || trHolidayType \x3d\x3d\x3d "Multi-Destination Holiday"){ return "Multi Destination Holiday"; }\n\t\telse if(trHolidayType \x3d\x3d\x3d "hotel"){ return "Hotel Only"; }\n\t\telse if(trHolidayType \x3d\x3d\x3d "tour"){ return "Touring"; }\n\t\telse if(trHolidayType \x3d\x3d\x3d "cruise"){ return "Cruise"; }\n\t\telse if(trHolidayType \x3d\x3d\x3d "car"){ return "Car Hire"; }\n\t\telse { return trHolidayType }\n\t}\n\t\n\t\n\t\n\x3c/script\x3e';
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll","livemagnoliavirginholidays.filters.ExcludingQubitDisable"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){};a.postInitialisationSection=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"async":true,"usesDocumentWrite":false,"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"name":"CRO Overrides","active":false,"disabled":false,"locked":false,"locationObject":"HEAD","url":"","timeout":5E3});var v="livemagnoliavirginholidays.tags.crooverrides.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\n      //Expert C2C short form.\n    try {\n        if (document.querySelectorAll("[experts-iframe]").length \x3e 0) {\n\t\t\tvar expertBioHide \x3d document.createElement("STYLE");\n\t\t\texpertBioHide.id \x3d "expertBioHide";\n\t\t\texpertBioHide.innerHTML \x3d ".login-main-content\x3eform\x3e.labelled-text-input:nth-child(2) { display:none!important;} .login-main-content\x3eform\x3e.radio-group:nth-child(3) { display:none!important;} .login-main-content\x3eform\x3e.labelled-text-input:nth-of-type(5) { display:none!important;} .login-main-content\x3eform\x3e.labelled-text-input:nth-of-type(6) { display:none!important;} .login-main-content\x3eform\x3e.labelled-text-input:nth-of-type(7) { display:none!important;}";\n\t\t\tdocument.querySelectorAll("[experts-iframe]")[0].contentDocument.body.append(expertBioHide);\n        }\n    } catch (ignore) {}\n  \n  //Touring Contact Us Number\n  //try {\n  //\tif(document.querySelectorAll("#tourNumber").length \x3d\x3d\x3d 0 \x26\x26 document.location.pathname \x3d\x3d\x3d "/contact-us"){\n  //  \t\tvar lastSalesNumRow \x3d document.querySelectorAll(".row.section-info.sales")[document.querySelectorAll(".row.section-info.sales").length-1];\n  //  \t\tvar tourSalesNumRow \x3d document.createElement("SECTION");\n  //  \t\t  tourSalesNumRow.className \x3d "row section-info sales";\n  //  \t\t  tourSalesNumRow.id \x3d "tourNumber";\n  //  \t\t  tourSalesNumRow.innerHTML \x3d "\x3chr\x3e\x3cdiv class\x3d\\"col-sm-7\\"\x3e\x3cp\x3eTouring \x3cspan class\x3d\\"tel pull-right rTapNumber232189\\"\x3e0344 417 3706\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d\\"col-sm-5 op-times\\"\x3e\x3cp class\x3d\\"date-time\\"\x3e\x3cspan class\x3d\\"date\\"\x3eMon - Fri\x3c/span\x3e \x3cspan class\x3d\\"time\\"\x3e9:00am - 5:30pm\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d\\"date-time\\"\x3e\x3cspan class\x3d\\"date\\"\x3eSaturday\x3c/span\x3e \x3cspan class\x3d\\"time\\"\x3e9:00am - 5:00pm\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d\\"date-time\\"\x3e\x3cspan class\x3d\\"date\\"\x3eSunday\x3c/span\x3e \x3cspan class\x3d\\"time\\"\x3e\x3cb\x3eClosed\x3c/b\x3e\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e";\n  //  \t\tlastSalesNumRow.parentNode.insertBefore(tourSalesNumRow, lastSalesNumRow);\n  //  \t}\n  //  } catch (ignore) {}\n\n\n\n\nvar promoStyleOverride \x3d document.createElement("STYLE");\npromoStyleOverride.id \x3d "promoStyleOverride";\npromoStyleOverride.innerHTML \x3d ".promo-subtitle { font-size:22px!important; }";\n\nif(!!~location.hostname.indexOf("travelplus.virginatlantic.com") \x26\x26 document.location.pathname \x3d\x3d\x3d "/" \x26\x26 document.querySelectorAll("#promoStyleOverride").length \x3d\x3d\x3d 0){\n   document.body.appendChild(promoStyleOverride);\n}\n\n    \n\n    //Bookflow Hide for iPhones AND SNT fixes\n    try {\n        urlPath \x3d document.location.pathname;\n        isBookflow \x3d (!!~urlPath.indexOf("/options") || !!~urlPath.indexOf("/flights") || !!~urlPath.indexOf("/transfers") || !!~urlPath.indexOf("/extras"));\n        if (!!~navigator.userAgent.indexOf("iPhone") \x26\x26 isBookflow) {\n            var footerHide \x3d document.createElement("style");\n            footerHide.id \x3d "footerHide";\n            footerHide.innerHTML \x3d ".footer-links-container { display:none!important;} .footer-contact-info { display:none!important;} .footer-newsletter-subscribe { display:none!important;} .footer-company-info {padding-top:16px!important;}"\n\n            if (document.querySelectorAll("#footerHide").length \x3d\x3d\x3d 0) {\n                document.body.appendChild(footerHide);\n            }\n        }\n\n    } catch (ignore) {}\n\t\n\t//Hide view all hotels link on airport hotels page until Technology can fix the link\n\ttry {\n  \t\tif(document.querySelectorAll("#hideViewHotels").length \x3d\x3d\x3d 0 \x26\x26 !!~document.location.pathname.indexOf("/travel-extras/airport-hotels/overview")) {\n    \t\t\tvar hideViewHotels \x3d document.createElement("STYLE");\n    \t\t\thideViewHotels.innerHTML \x3d ".hotels-link-container { display:none; }";\n    \t\t\thideViewHotels.id \x3d "hideViewHotels";\n    \t\t\tdocument.body.appendChild(hideViewHotels);\n  \t\t}\n\t} catch (ignore) {}\n\n    // Tour Offer Roundels\n    try {\n        if (location.pathname \x3d\x3d\x3d "/holiday-types/tours-and-safaris/special-offers") {\n            for (var i \x3d 0; i \x3c document.querySelectorAll("a.card[lateDeal]").length; i++) {\n                var tourRoundel \x3d document.createElement("img");\n                tourRoundel.src \x3d "/dam/virginholidays/holiday-types/tours-and-safaris/special-offers/latedeal_roundal.jpg";\n                tourRoundel.style.float \x3d "right";\n                tourRoundel.style.position \x3d "absolute";\n                tourRoundel.style.top \x3d "0px";\n                tourRoundel.style.right \x3d "0px";\n                tourRoundel.style.width \x3d "500px";\n                tourRoundel.style.maxWidth \x3d "35%";\n                tourRoundel.style.height \x3d "auto";\n                document.querySelectorAll("a.card[lateDeal] .image")[i].appendChild(tourRoundel);\n            }\n        }\n    } catch (ignore) {}\n\n\n    // Hotel Tab Hidden\n    try {\n        if (!!~location.pathname.indexOf("/destinations/asia-and-far-east/japan") || !!~location.pathname.indexOf("/destinations/asia-and-far-east/myanmar") || !!~location.pathname.indexOf("/destinations/south-america") || !!~location.pathname.indexOf("/destinations/asia-and-far-east/china/shanghai-holidays") || !!~location.pathname.indexOf("/destinations/asia-and-far-east/china/beijing-holidays")) {\n            for (var i \x3d 0; i \x3c document.querySelectorAll("[aria-label\x3d\\"Destinations navigation bar\\"] li.fixed-tabs-list-item a").length; i++) {\n                if (document.querySelectorAll("[aria-label\x3d\\"Destinations navigation bar\\"] li.fixed-tabs-list-item a")[i].innerHTML \x3d\x3d\x3d "Hotels") {\n                    document.querySelectorAll("[aria-label\x3d\\"Destinations navigation bar\\"] li.fixed-tabs-list-item a")[i].style.display \x3d "none";\n                }\n            }\n        }\n    } catch (ignore) {}\n    \n    \n    //Footer Search Hidden\n    try {\n  \t\t  if(document.querySelectorAll("footer-search").length \x3d\x3d\x3d 0) {\n            var hideFooterSearch \x3d document.createElement("STYLE");\n            hideFooterSearch.innerHTML \x3d ".footer-search { display:none; }";\n            hideFooterSearch.id \x3d "hideFooterSearch";\n            document.body.appendChild(hideFooterSearch);\n        }\n    } catch (ignore) {}\n\t\n\t\n\t// Remove things for Caribbean Content\n\tfunction vholsEventDispatcher(eventName, eventValue) {\n        var event\n    \n        if (typeof(Event) \x3d\x3d\x3d \'function\') {\n            event \x3d new CustomEvent(eventName, eventValue)\n        } else {\n            event \x3d window.document.createEvent(\'CustomEvent\')\n            event.initCustomEvent(eventName, true, true, eventValue)\n        }\n    \n        window.dispatchEvent(event)\n    }\n\t\n\ttry {\n\t\tsetTimeout(function() {\n        if(!!~document.cookie.indexOf("destinations-page-client\x3d1") \x26\x26 (!!~document.location.pathname.indexOf("/destinations/caribbean/barbados-hotels") || !!~document.location.pathname.indexOf("/destinations/caribbean/barbados-offers"))) {\n            var mdLink \x3d document.querySelector(".fixed-tabs-list-item a[href\x3d\\"/destinations/caribbean/barbados/multi-destination\\"]:not(.active)")\n            var mdLinkSub \x3d  document.querySelector(".fixed-tabs-sub-item a[href\x3d\\"/destinations/caribbean/barbados/multi-destination\\"]:not(.active)")\n            \n            if (mdLink !\x3d undefined \x26\x26 mdLinkSub !\x3d undefined) {\n                mdLink.parentNode.remove();\n                mdLinkSub.parentNode.remove();            \n            }\n    \n            var offersLink \x3d document.querySelector(".fixed-tabs-list-item a[href\x3d\\"/destinations/caribbean/barbados-offers\\"]:not(.active)")\n            var offersLinkSub \x3d document.querySelector(".fixed-tabs-sub-item a[href\x3d\\"/destinations/caribbean/barbados-offers\\"]:not(.active)")\n            \n            if (offersLink !\x3d undefined \x26\x26 offersLinkSub !\x3d undefined) {\n                offersLink.parentNode.remove();\n                offersLinkSub.parentNode.remove();  \n            }\n    \n            var depBeachLink \x3d document.querySelector(".fixed-tabs-list-item a[href\x3d\\"/vhols/destinations/caribbean-holidays/barbados-holidays/departure-beach\\"]:not(.active)")\n            var depBeachLinkSub \x3d document.querySelector(".fixed-tabs-sub-item a[href\x3d\\"/vhols/destinations/caribbean-holidays/barbados-holidays/departure-beach\\"]:not(.active)")\n            \n            if (depBeachLink !\x3d undefined \x26\x26 depBeachLinkSub !\x3d undefined) {\n                depBeachLink.parentNode.remove();\n                depBeachLinkSub.parentNode.remove();  \n            }\n        \n            vholsEventDispatcher(\'resize\', undefined)\n      }\n    }, 500)\n\t} catch (ignore) {}\n\t\n\t\n\x3c/script\x3e';
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1","livemagnoliavirginholidays.filters.ExcludingQubitDisable1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":false,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"prePostWindowScope":false,"name":"Opening Hours Fix","disabled":false,"id":40003838,"locked":false,"locationObject":"BODY"});var v="livemagnoliavirginholidays.tags.openinghoursfix.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludeWonderlist"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){if((document.location.pathname.indexOf("wedding")||document.location.pathname.indexOf("honeymoon"))&&document.querySelectorAll(".phone-item div.body-md").length>0)if(document.querySelectorAll(".phone-item div.body-md")[0].innerText==="Open (9am - 9pm)")document.querySelectorAll(".phone-item div.body-md")[0].innerText=
"Open (9am - 7pm)"};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"prePostWindowScope":false,"name":"Twitter","disabled":false,"id":40003910,"locked":false,"locationObject":"HEAD"});var v="livemagnoliavirginholidays.tags.twitter.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3c!-- Twitter universal website tag code --\x3e\n\x3cscript\x3e\n\t!function(e,t,n,s,u,a){e.twq||(s\x3de.twq\x3dfunction(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);\n\t},s.version\x3d'1.1',s.queue\x3d[],u\x3dt.createElement(n),u.async\x3d!0,u.src\x3d'//static.ads-twitter.com/uwt.js',\n\ta\x3dt.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');\n\t// Insert Twitter Pixel ID and Standard Event data below\n\ttwq('init','nw84l');\n\ttwq('track','PageView');\n\n\n\tif (typeof(twTrackingEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\twindow.addEventListener(\"message\", function(message) {\n\t\t\tif (location.pathname \x3d\x3d\x3d \"/checkout/confirmation\" || location.pathname \x3d\x3d\x3d \"/checkout/confirmation/\") {\n\t\t\t\tif (message.data.eventName \x3d\x3d\x3d \"BOOKING_CONFIRMATION\") {\n\t\t\t\t\ttwBookingReference \x3d message.data.summary.tracking.bookingReference;\n\t\t\t\t\ttwUV \x3d universal_variable || {};\n\t\t\t\t\ttwPayment \x3d twUV.payment || {};\n\t\t\t\t\ttwPaymentTotal \x3d twPayment.totalPrice || \"\";\t\t\t\t\t\n\t\t\t\t\ttwq('track','Purchase', { \n\t\t\t\t\t\t//required parameters \n\t\t\t\t\t\tvalue: fbPaymentTotal, \n\t\t\t\t\t\tcurrency: 'GBP', \n\t\t\t\t\t\tnum_items: '1', \n\t\t\t\t\t\torder_id: twBookingReference\n\t\t\t\t\t}); \n\n\t\t\t\t}\n\t\t\t}\n\t\t\ttwTrackingEventsSet \x3d true;\n\t\t});\n\t}\n\n\x3c/script\x3e\n\x3c!-- End Twitter universal website tag code --\x3e";a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeTwitterDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Tracking Events","disabled":false,"id":40003951,"locked":false,"locationObject":"BODY"});var v="livemagnoliavirginholidays.tags.trackingevents.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n\tvar SHA256\x3dfunction(a){function c(a,b){var c\x3d(65535\x26a)+(65535\x26b),d\x3d(a\x3e\x3e16)+(b\x3e\x3e16)+(c\x3e\x3e16);return d\x3c\x3c16|65535\x26c}function d(a,b){return a\x3e\x3e\x3eb|a\x3c\x3c32-b}function e(a,b){return a\x3e\x3e\x3eb}function f(a,b,c){return a\x26b^~a\x26c}function g(a,b,c){return a\x26b^a\x26c^b\x26c}function h(a){return d(a,2)^d(a,13)^d(a,22)}function i(a){return d(a,6)^d(a,11)^d(a,25)}function j(a){return d(a,7)^d(a,18)^e(a,3)}function k(a){return d(a,17)^d(a,19)^e(a,10)}function l(a,b){var m,n,o,p,q,r,s,t,u,v,w,x,d\x3dnew Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),e\x3dnew Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),l\x3dnew Array(64);a[b\x3e\x3e5]|\x3d128\x3c\x3c24-b%32,a[(b+64\x3e\x3e9\x3c\x3c4)+15]\x3db;for(var u\x3d0;u\x3ca.length;u+\x3d16){m\x3de[0],n\x3de[1],o\x3de[2],p\x3de[3],q\x3de[4],r\x3de[5],s\x3de[6],t\x3de[7];for(var v\x3d0;64\x3ev;v++)16\x3ev?l[v]\x3da[v+u]:l[v]\x3dc(c(c(k(l[v-2]),l[v-7]),j(l[v-15])),l[v-16]),w\x3dc(c(c(c(t,i(q)),f(q,r,s)),d[v]),l[v]),x\x3dc(h(m),g(m,n,o)),t\x3ds,s\x3dr,r\x3dq,q\x3dc(p,w),p\x3do,o\x3dn,n\x3dm,m\x3dc(w,x);e[0]\x3dc(m,e[0]),e[1]\x3dc(n,e[1]),e[2]\x3dc(o,e[2]),e[3]\x3dc(p,e[3]),e[4]\x3dc(q,e[4]),e[5]\x3dc(r,e[5]),e[6]\x3dc(s,e[6]),e[7]\x3dc(t,e[7])}return e}function m(a){for(var c\x3dArray(),d\x3d(1\x3c\x3cb)-1,e\x3d0;e\x3ca.length*b;e+\x3db)c[e\x3e\x3e5]|\x3d(a.charCodeAt(e/b)\x26d)\x3c\x3c24-e%32;return c}function n(a){for(var b\x3d0,c\x3db?\"0123456789ABCDEF\":\"0123456789abcdef\",d\x3d\"\",e\x3d0;e\x3c4*a.length;e++)d+\x3dc.charAt(a[e\x3e\x3e2]\x3e\x3e8*(3-e%4)+4\x2615)+c.charAt(a[e\x3e\x3e2]\x3e\x3e8*(3-e%4)\x2615);return d}var b\x3d8;return n(l(m(a),a.length*b))};\n\t\n\tfunction isNotUndefined(obj) {\n\t\treturn typeof obj !\x3d\x3d 'undefined';\n\t}\n\n\tfunction safeGetFromObject(obj, path) {\n\t\tvar currentObj \x3d obj;\n\n\t\tpath.split('.').forEach(function(level) {\u00a0\n\t\t\tcurrentObj \x3d isNotUndefined(currentObj[level]) ? currentObj[level] : '';\n\t\t});\n\n\t\treturn currentObj;\n\t}\n\n\tfunction trackLogin(vSource, vEmail) {\n\t\ttry {\n\t\t\tif (vEmail.indexOf(\"@\") !\x3d\x3d -1) {\n\t\t\t\tif (typeof(cmCreateConversionEventTag) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tcmCreateConversionEventTag(\"Email Capture\", 2, vSource);\n\t\t\t\t}\n\t\t\t\tif (typeof(cmCreateRegistrationTag) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tcmRegisterAttributes \x3d [];\n\t\t\t\t\tcmRegisterAttributes[0] \x3d vSource;\n\t\t\t\t\tcmCreateRegistrationTag(SHA256(vEmail.toLowerCase().trim()), SHA256(vEmail.toLowerCase().trim()), null, null, null, null, cmRegisterAttributes);\n\t\t\t\t}\n\t\t\t\tif (typeof(ga) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tga('set', {\n\t\t\t\t\t\t'dimension48': SHA256((vEmail.toLowerCase().trim()+\"YgIz1V95t1mP\"))\n\t\t\t\t\t});\n\t\t\t\t\tga('send', 'event', 'Customer', 'Login', vSource, {\n\t\t\t\t\t\t'nonInteraction': true,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tif(document.querySelectorAll(\"#neustarAGKNLogin\").length \x3d\x3d\x3d 0){\n\t\t\t\t\t\tgaCIDVar \x3d localStorage.getItem(\"gaCIDVar\") || ga.getAll()[0].get('clientId') || null;\n\t\t\t\t\t\tif(gaCIDVar !\x3d\x3d null){\n\t\t\t\t\t\t\tlocalStorage.setItem(\"gaCIDVar\", gaCIDVar);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!!~document.cookie.indexOf(\"adiV\x3d\")){\n\t\t\t\t\t\t\trTapVisitorID \x3d document.cookie.split(\"adiV\x3d\")[1].split(\";\")[0];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trTapVisitorID \x3d null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar randomCache \x3d (Math.random() * 10000000000000).toFixed(0);\n\t\t\t\t\t\tvar neustarAGKNLogin \x3d document.createElement(\"IMG\");\n\t\t\t\t\t\tneustarAGKNLogin.style.display \x3d \"none\";\n\t\t\t\t\t\tneustarAGKNLogin.id \x3d \"neustarAGKNLogin\";\n\t\t\t\t\t\tneustarAGKNLogin.src \x3d \"https://d.agkn.com/pixel/9551/?che\x3d\" + randomCache + \"\x26gauid\x3d\" + gaCIDVar + \"\x26rtid\x3d\" + rTapVisitorID + \"\x26vhuid\x3d\" + SHA256((vEmail.toLowerCase().trim()+\"YgIz1V95t1mP\"));\n\t\t\t\t\t\tdocument.body.append(neustarAGKNLogin);\n\t\t\t\t\t}\n\t\t\t\t} catch(ignore) {}\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t} catch (ignore) {}\n\t}\n\n\tfunction trackeventlower(vCategory, vAction, vLabel, vNonInteraction, vEventAttributes) {\n\t\ttrackEvent(vCategory, vAction, vLabel, vNonInteraction, vEventAttributes);\n\t}\n\n\tfunction trackTimingEvent(vCategory, vAction, vLabel) {\n\t\tif (window.performance) {\n\t\t\t// Gets the number of milliseconds since page load\n\t\t\t// (and rounds the result since the value must be an integer).\n\t\t\tvar timeSincePageLoad \x3d Math.round(performance.now());\n\n\t\t\t// Sends the timing hit to Google Analytics.\n\t\t\tga('send', 'timing', vCategory, vAction, timeSincePageLoad, vLabel);\n\t\t}\n\t}\n\tfunction trackEvent(vCategory, vAction, vLabel, vNonInteraction, vEventAttributes) {\n\t\tif (typeof(vNonInteraction) !\x3d\x3d \"boolean\") {\n\t\t\tvNonInteraction \x3d true;\n\t\t}\n\t\tif (typeof(vEventAttributes) !\x3d\x3d \"object\") {\n\t\t\tvEventAttributes \x3d [];\n\t\t}\n\t\tif (typeof(vLabel) !\x3d\x3d \"string\") {\n\t\t\tvar vActionLabel \x3d vAction;\n\t\t\tvar vLabel \x3d null;\n\t\t} else {\n\t\t\tvar vActionLabel \x3d vAction + \" - \" + vLabel;\n\t\t}\n\t\tif(typeof(vLabel) \x3d\x3d\x3d \"number\") { vLabel \x3d vLabel + \"\"; }\n\n\t\ttry {\n\t\t\tif (typeof(vCategory) !\x3d\x3d \"undefined\" \x26\x26 typeof(vAction) !\x3d\x3d \"undefined\" \x26\x26 typeof(vLabel) !\x3d\x3d \"undefined\") {\n\t\t\t\tif (typeof(ga) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tga('send', 'event', vCategory, vAction, vLabel, {\n\t\t\t\t\t\t'nonInteraction': vNonInteraction\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (typeof(cmCreateConversionEventTag) !\x3d\x3d \"undefined\") {\n\t\t\t\t\t//cmCreateConversionEventTag(vActionLabel, 2, vCategory, 0, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (typeof(fbq) !\x3d\x3d \"undefined\" \x26\x26 vCategory \x3d\x3d\x3d \"SaturdayNightTakeaway\" \x26\x26 vAction \x3d\x3d\x3d \"Submit Form\") {\n\t\t\t\t\tfbq('track', 'CompleteRegistration');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\n\t\t//VWO events\n\t\ttry {\n\t\t\tif (vCategory \x3d\x3d\x3d \"Tour Callback Form\" \x26\x26 vAction \x3d\x3d\x3d \"Submit Form\") {\n\t\t\t\twindow._vis_opt_queue \x3d window._vis_opt_queue || [];\n\t\t\t\twindow._vis_opt_queue.push(function() {\n\t\t\t\t\t_vis_opt_goal_conversion(206);\n\t\t\t\t});\n\t\t\t\tif (typeof(fbq) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tfbq('track', 'Lead');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\t\ttry {\n\t\t\tif (vCategory \x3d\x3d\x3d \"Multi Centre Form\" \x26\x26 vAction \x3d\x3d\x3d \"Submit Form\") {\n\t\t\t\twindow._vis_opt_queue \x3d window._vis_opt_queue || [];\n\t\t\t\twindow._vis_opt_queue.push(function() {\n\t\t\t\t\t_vis_opt_goal_conversion(207);\n\t\t\t\t});\n\t\t\t\tif (typeof(fbq) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tfbq('track', 'Lead');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\t\ttry {\n\t\t\tif (vCategory \x3d\x3d\x3d \"Weddings Callback Form\" \x26\x26 vAction \x3d\x3d\x3d \"Submit Form\") {\n\t\t\t\tif (typeof(fbq) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tfbq('track', 'Lead');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\t\ttry {\n\t\t\tif (vCategory \x3d\x3d\x3d \"Web Competition Form\" \x26\x26 vAction \x3d\x3d\x3d \"Submit Form\") {\n\t\t\t\tif (typeof(fbq) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tfbq('track', 'Lead');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\t\ttry {\n\t\t\tif ((vCategory \x3d\x3d\x3d \"Group Booking Callback Form\" \x26\x26 vAction \x3d\x3d\x3d \"Submit Form\" || vCategory \x3d\x3d\x3d \"Groups Form\" \x26\x26 vAction \x3d\x3d\x3d \"Groups Form Submit\")) {\n\t\t\t\tif (typeof(fbq) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tfbq('track', 'Lead');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\t\ttry {\n\t\t\tif (vCategory \x3d\x3d\x3d \"Retail Store Finder\" \x26\x26 vAction.indexOf(\"Appointment Booked\") !\x3d\x3d -1) {\n\t\t\t\twindow._vis_opt_queue \x3d window._vis_opt_queue || [];\n\t\t\t\twindow._vis_opt_queue.push(function() {\n\t\t\t\t\t_vis_opt_goal_conversion(211);\n\t\t\t\t});\n\t\t\t\tif (typeof(fbq) !\x3d\x3d \"undefined\") {\n\t\t\t\t\tfbq('track', 'Lead');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore) {}\n\t\ttry {\n\t\t\tif (typeof(window.usabilla_live) \x3d\x3d \"function\" \x26\x26 vAction \x3d\x3d\x3d \"Submit Form\" \x26\x26 (vCategory \x3d\x3d\x3d \"Tour Callback Form\" || vCategory \x3d\x3d\x3d \"Multi Centre Form\")) {\n\t\t\t\twindow.usabilla_live('trigger', 'quote survey');\n\t\t\t} else if (typeof(window.usabilla_live) \x3d\x3d \"function\" \x26\x26 vAction \x3d\x3d\x3d \"Transport Option Changed\" \x26\x26 vCategory \x3d\x3d\x3d \"Options\" \x26\x26 vLabel \x3d\x3d\x3d \"GenericOption\" ) {\n\t\t\t\twindow.usabilla_live('trigger', 'transport survey');\n\t\t\t}\n\t\t} catch (ignore) {}\n\t\t\n\t\t\n\t\t//trackEvent(\"Options\", \"Transport Option Changed\", selectedOptionName, true, vEventAttributes);\n\n\t\t\n\t\t\n\t}\n\n\ttry {\n\t\tif (!!~window.location.search.indexOf(\"trackEventCategory\x3d\") \x26\x26 !!~window.location.search.indexOf(\"trackEventAction\x3d\")) {\n\t\t\tvCategory \x3d window.location.search.split(\"trackEventCategory\x3d\")[1].split(\"\x26\")[0].split(\"?\")[0].split(\"#\")[0];\n\t\t\tvAction \x3d window.location.search.split(\"trackEventAction\x3d\")[1].split(\"\x26\")[0].split(\"?\")[0].split(\"#\")[0];\n\t\t\tif (!!~window.location.search.indexOf(\"trackEventLabel\x3d\")) {\n\t\t\t\tvLabel \x3d window.location.search.split(\"trackEventLabel\x3d\")[1].split(\"\x26\")[0].split(\"?\")[0].split(\"#\")[0];\n\t\t\t\ttrackEvent(vCategory, vAction, vLabel);\n\t\t\t} else {\n\t\t\t\ttrackEvent(vCategory, vAction);\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\ttry {\n\t\tif (trackEventQueued \x26\x26 trackEventQueued !\x3d\x3d null) {\n\t\t\ttrackEvent(trackEventQueued.category, trackEventQueued.action, trackEventQueued.label);\n\t\t\ttrackEventQueued \x3d null;\n\t\t}\n\t} catch (ignore) {}\n\n\ttry {\n\t\tif (document.location.pathname \x3d\x3d\x3d \"/customer-service\") {\n\t\t\tdocument.querySelectorAll(\"[ng-click\x3d'submitFaq(faqQuery);']\")[0].setAttribute(\"onclick\", \"trackEvent('FAQ Form','Submit', document.querySelectorAll('#fa_autosuggest_input')[0].value);\");\n\t\t}\n\t} catch (ignore) {}\n\n\ttry {\n\t\tif (document.location.pathname \x3d\x3d\x3d \"/view-our-brochures\") {\n\t\t\tfor (var i \x3d 0; i \x3c document.querySelectorAll(\".brochure\").length; i++) {\n\t\t\t\tif (document.querySelectorAll(\".brochure\x3e.actions\")[i].querySelectorAll(\"a\").length \x3e 0) {\n\t\t\t\t\tdocument.querySelectorAll(\".brochure\x3e.actions\")[i].querySelectorAll(\"a\")[0].setAttribute(\"onclick\", \"trackEvent('Online Brochure', 'View Brochure', '\" + document.querySelectorAll('.brochure\x3eh2')[i].innerHTML + \"');\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\n\n\tif (typeof(vhmTrackingEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\twindow.addEventListener(\"vhmTrackingEvent\", function(vhmTrackingEvent) {\n\t\t\ttry {\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"sales-message-open\") {\n\t\t\t\t\tvar timeOfLook \x3d Math.round(vhmTrackingEvent.timeStamp / 1000)\n\t\t\t\t\ttrackEvent(\"Sales Message\", vhmTrackingEvent.detail.hotelId, timeOfLook + \" seconds\", true, vEventAttributes);\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\t\t\ttry {\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Search\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar selectedHolidayType \x3d safeGetFromObject(vhmTrackingEvent, 'detail.holidayType');\n\t\t\t\t\t\tif (selectedHolidayType \x3d\x3d\x3d \"holiday\" || selectedHolidayType \x3d\x3d\x3d \"complete\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Complete Holiday\"\n\t\t\t\t\t\t} else if (selectedHolidayType \x3d\x3d\x3d \"flight+hotel\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Flight And Hotel\"\n\t\t\t\t\t\t} else if (selectedHolidayType \x3d\x3d\x3d \"hotel\" || selectedHolidayType \x3d\x3d\x3d \"hotelonly\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Hotel Only\"\n\t\t\t\t\t\t} else if (selectedHolidayType \x3d\x3d\x3d \"multidestination\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Multi Destination Holiday\"\n\t\t\t\t\t\t} else if (selectedHolidayType \x3d\x3d\x3d \"flydrive\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Flydrive\"\n\t\t\t\t\t\t} else if (selectedHolidayType \x3d\x3d\x3d \"car\" || selectedHolidayType \x3d\x3d\x3d \"carhire\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Car Hire\"\n\t\t\t\t\t\t} else if (selectedHolidayType \x3d\x3d\x3d \"tour\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Touring\"\n\t\t\t\t\t\t} else if (selectedHolidayType \x3d\x3d\x3d \"cruise\") {\n\t\t\t\t\t\t\tselectedHolidayType \x3d \"Cruise\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvEventAttributes[3] \x3d selectedHolidayType;\n\t\t\t\t\t} catch (ignore) {}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar selectedGateways \x3d safeGetFromObject(vhmTrackingEvent, 'detail.gateway');\n\t\t\t\t\t\tselectedGatewaysConcat \x3d \"\";\n\t\t\t\t\t\tif (selectedGateways.length \x3e 0) {\n\t\t\t\t\t\t\tfor (var i \x3d 0; i \x3c selectedGateways.length; i++) {\n\t\t\t\t\t\t\t\tselectedGatewaysConcat \x3d selectedGatewaysConcat + \" \" + selectedGateways[i];\n\t\t\t\t\t\t\t\tselectedGatewaysConcat \x3d selectedGatewaysConcat.trim();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvEventAttributes[5] \x3d selectedGatewaysConcat;\n\t\t\t\t\t} catch (ignore) {}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar selectedDestination \x3d safeGetFromObject(vhmTrackingEvent, 'detail.destination');\n\t\t\t\t\t} catch (ignore) {}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar selectedDate \x3d safeGetFromObject(vhmTrackingEvent, 'detail.startDate');\n\t\t\t\t\t\tvEventAttributes[8] \x3d selectedDate;\n\t\t\t\t\t} catch (ignore) {}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar selectedDuration \x3d safeGetFromObject(vhmTrackingEvent, 'detail.duration') + \"\";\n\t\t\t\t\t\tvEventAttributes[6] \x3d selectedDuration;\n\t\t\t\t\t} catch (ignore) {}\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Find \" + selectedHolidayType, selectedDestination, true, vEventAttributes);\n\t\t\t\t\ttrackTimingEvent(\"Search Panel\", \"Find \" + selectedHolidayType, null);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Departure Point Change\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar selectedGateways \x3d safeGetFromObject(vhmTrackingEvent, 'detail.gateway');\n\t\t\t\t\tselectedGatewaysConcat \x3d \"\";\n\t\t\t\t\tif (selectedGateways.length \x3e 0) {\n\t\t\t\t\t\tfor (var i \x3d 0; i \x3c selectedGateways.length; i++) {\n\t\t\t\t\t\t\tselectedGatewaysConcat \x3d selectedGatewaysConcat + \" \" + selectedGateways[i];\n\t\t\t\t\t\t\tselectedGatewaysConcat \x3d selectedGatewaysConcat.trim();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Departure Point Change\", selectedGatewaysConcat, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Departure Point Change\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar selectedGateways \x3d safeGetFromObject(vhmTrackingEvent, 'detail.gateway');\n\t\t\t\t\tselectedGatewaysConcat \x3d \"\";\n\t\t\t\t\tif (selectedGateways.length \x3e 0) {\n\t\t\t\t\t\tfor (var i \x3d 0; i \x3c selectedGateways.length; i++) {\n\t\t\t\t\t\t\tselectedGatewaysConcat \x3d selectedGatewaysConcat + \" \" + selectedGateways[i];\n\t\t\t\t\t\t\tselectedGatewaysConcat \x3d selectedGatewaysConcat.trim();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Departure Point Change\", selectedGatewaysConcat, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Departure Flight Toggle\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Departure Flight Toggle\", null, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Departure Date Change\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar selectedDate \x3d safeGetFromObject(vhmTrackingEvent, 'detail.startDate');\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Departure Date Change\", selectedDate, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Duration Change\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar selectedDate \x3d safeGetFromObject(vhmTrackingEvent, 'detail.startDate');\n\t\t\t\t\tvar selectedDuration \x3d safeGetFromObject(vhmTrackingEvent, 'detail.duration') + \"\";\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Duration Change\", selectedDuration, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Holiday Type Tab Change\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar selectedHolidayType \x3d safeGetFromObject(vhmTrackingEvent, 'detail.holidayType');\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Holiday Type Tab Change\", selectedHolidayType, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Room Added\" || vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Room Removed\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar selectedRooms \x3d safeGetFromObject(vhmTrackingEvent, 'detail.rooms');\n\t\t\t\t\ttrackEvent(\"Search Panel\", vhmTrackingEvent.detail.name, selectedRooms, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Destination Change\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar selectedDestination \x3d safeGetFromObject(vhmTrackingEvent, 'detail.destination');\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Destination Change\", selectedDestination, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"Sort Order Changed\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar fromSortOrder \x3d safeGetFromObject(vhmTrackingEvent, 'detail.currentSortOrder.name');\n\t\t\t\t\tvar toSortOrder \x3d safeGetFromObject(vhmTrackingEvent, 'detail.newSortOrder.name');\n\t\t\t\t\tvar holidayType;\n\t\t\t\t\tif (document.location.pathname.split(\"/\").length \x3e 1) {\n\t\t\t\t\t\tfolderOne \x3d document.location.pathname.split(\"/\")[1];\n\t\t\t\t\t\tif (folderOne \x3d\x3d\x3d \"holiday\") {\n\t\t\t\t\t\t\tholidayType \x3d \"Complete Holiday\"\n\t\t\t\t\t\t} else if (folderOne \x3d\x3d\x3d \"flight+hotel\") {\n\t\t\t\t\t\t\tholidayType \x3d \"Flight And Hotel\"\n\t\t\t\t\t\t} else if (folderOne \x3d\x3d\x3d \"hotel\") {\n\t\t\t\t\t\t\tholidayType \x3d \"Hotel Only\"\n\t\t\t\t\t\t} else if (folderOne \x3d\x3d\x3d \"multidestination\") {\n\t\t\t\t\t\t\tholidayType \x3d \"Multi Destination Holiday\"\n\t\t\t\t\t\t} else if (folderOne \x3d\x3d\x3d \"flydrive\") {\n\t\t\t\t\t\t\tholidayType \x3d \"Flydrive\"\n\t\t\t\t\t\t} else if (folderOne \x3d\x3d\x3d \"car\") {\n\t\t\t\t\t\t\tholidayType \x3d \"Car Hire\"\n\t\t\t\t\t\t} else if (folderOne \x3d\x3d\x3d \"tour\") {\n\t\t\t\t\t\t\tholidayType \x3d \"Tour\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrackEvent(holidayType + \" Search\", \"Sort \" + fromSortOrder + \" to \" + toSortOrder, null, true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"nineplus-open\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar formAdults \x3d safeGetFromObject(vhmTrackingEvent, 'detail.adults');\n\t\t\t\t\tvar formChildren \x3d safeGetFromObject(vhmTrackingEvent, 'detail.children');\n\t\t\t\t\ttrackEvent(\"Groups Form\", \"Groups Form Open\", formAdults + \" Adults, \" + formChildren + \" Children\", true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"nineplus-continue\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar formAdults \x3d safeGetFromObject(vhmTrackingEvent, 'detail.adults');\n\t\t\t\t\tvar formChildren \x3d safeGetFromObject(vhmTrackingEvent, 'detail.children');\n\t\t\t\t\ttrackEvent(\"Groups Form\", \"Groups Form Details\", formAdults + \" Adults, \" + formChildren + \" Children\", true, vEventAttributes);\n\t\t\t\t}\n\t\t\t\tif (vhmTrackingEvent.detail.name \x3d\x3d\x3d \"nineplus-email-submit\") {\n\t\t\t\t\tvEventAttributes \x3d [];\n\t\t\t\t\tvar formAdults \x3d safeGetFromObject(vhmTrackingEvent, 'detail.adults');\n\t\t\t\t\tvar formChildren \x3d safeGetFromObject(vhmTrackingEvent, 'detail.children');\n\t\t\t\t\tvar formEmail \x3d safeGetFromObject(vhmTrackingEvent, 'detail.email');\n\t\t\t\t\ttrackEvent(\"Groups Form\", \"Groups Form Submit\", formAdults + \" Adults, \" + formChildren + \" Children\", true, vEventAttributes);\n\t\t\t\t\ttrackLogin(\"Groups Form\", formEmail);\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\t\t\tvhmTrackingEventsSet \x3d true;\n\t\t});\n\t}\n\n\tif (typeof(c2cTrackingEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\twindow.addEventListener(\"message\", function(message) {\n\t\t\ttry {\n\t\t\t\tchatEventCategory \x3d safeGetFromObject(message.data, 'category');\n\t\t\t\tchatEventCategory \x3d chatEventCategory.replace(\"Click To Chat\", \"Click to Chat\");\n\t\t\t\tchatEventName \x3d safeGetFromObject(message.data, 'name');\n\t\t\t\tchatEventEmail \x3d safeGetFromObject(message.data, 'email') || \"\";\n\t\t\t\tif (chatEventCategory \x3d\x3d\x3d \"Click to Chat\") {\n\t\t\t\t\ttrackEvent(\"Click to Chat\", chatEventName, chatEventCategory, true);\n\t\t\t\t}\n\t\t\t\tif (chatEventEmail.indexOf(\"@\") !\x3d\x3d -1) {\n\t\t\t\t\ttrackLogin(\"Click to Chat\", chatEventEmail);\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\t\t\tc2cTrackingEventsSet \x3d true;\n\t\t});\n\t}\n\n\tif (typeof(searchPanelEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\twindow.addEventListener(\"message\", function(message) {\n\t\t\ttry {\n\t\t\t\teventName \x3d safeGetFromObject(message.data, 'name');\n\t\t\t\tif (eventName \x3d\x3d\x3d \"search-panel-expand\") {\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Mobile Search Panel Expand\", null, true);\n\t\t\t\t}\n\t\t\t\tif (eventName \x3d\x3d\x3d \"search-panel-contract\") {\n\t\t\t\t\ttrackEvent(\"Search Panel\", \"Mobile Search Panel Contract\", null, true);\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\t\t\tsearchPanelEventsSet \x3d true;\n\t\t});\n\t}\n\n\n\t// Customer Support Link Test - Jess to Manage\n\ttry {\n\t\tif (!sessionStorage.getItem(\"cro_customerSupport_tracked\") \x26\x26 localStorage.getItem(\"cro_customerSupport\")) {\n\t\t\ttrackEvent('CRO', 'Customer Support Link', 'Customer Support Link ' + localStorage.getItem(\"cro_customerSupport\"));\n\t\t\tsessionStorage.setItem(\"cro_customerSupport_tracked\", \"1\");\n\t\t}\n\t} catch (ignore) {}\n\t\n\t\n\ttry {\n\t\tif (!sessionStorage.getItem(\"longRunC2CVariantTracked\")) {\n\t\t\tif (localStorage.getItem(\"longRunC2CVariant\") \x3e 95) {\n\t\t\t\ttrackEvent('Long Term CRO', 'Click to Chat Hidden', 'Hidden');\n\t\t\t} else if (localStorage.getItem(\"longRunC2CVariant\") \x3c\x3d 95) {\n\t\t\t\ttrackEvent('Long Term CRO', 'Click to Chat Shown', 'Shown');\n\t\t\t}\n\t\t\tsessionStorage.setItem(\"longRunC2CVariantTracked\", \"1\");\n\t\t}\n\t} catch (ignore) {}\n\ttry {\n\t\tif (!sessionStorage.getItem(\"longRunSalesBannerVariantTracked\")) {\n\t\t\tif (localStorage.getItem(\"longRunSalesBannerVariant\") \x3e 95) {\n\t\t\t\ttrackEvent('Long Term CRO', 'Sales Banner', 'Sales Banner Hidden');\n\t\t\t} else if (localStorage.getItem(\"longRunSalesBannerVariant\") \x3c\x3d 95) {\n\t\t\t\ttrackEvent('Long Term CRO', 'Sales Banner', 'Sales Banner Shown');\n\t\t\t}\n\t\t\tsessionStorage.setItem(\"longRunSalesBannerVariantTracked\", \"1\");\n\t\t}\n\t} catch (ignore) {}\n\ttry {\n\t\tif (!sessionStorage.getItem(\"longRunSaleCycleVariantTracked\")) {\n\t\t\tif (localStorage.getItem(\"longRunSaleCycleVariant\") \x3e 95) {\n\t\t\t\ttrackEvent('Long Term CRO', 'Sale Cycle Hidden', 'Hidden');\n\t\t\t} else if (localStorage.getItem(\"longRunSaleCycleVariant\") \x3c\x3d 95) {\n\t\t\t\ttrackEvent('Long Term CRO', 'Sale Cycle Shown', 'Shown');\n\t\t\t}\n\t\t\tsessionStorage.setItem(\"longRunSaleCycleVariantTracked\", \"1\");\n\t\t}\n\t} catch (ignore) {}\n\n\ttry {\n\n\t\tif (document.cookie.split(\"saved-searches\x3d\").length \x3e 0 \x26\x26 !!localStorage) {\n\n\t\t\tvar searchArray \x3d JSON.parse(unescape(document.cookie.split(\"saved-searches\x3d\")[1].split(\";\")[0]));\n\t\t\tvar searchChanges \x3d 0;\n\n\t\t\tif (searchArray.length \x3e 1) {\n\n\t\t\t\tif (searchArray[searchArray.length - 1].searchType \x3d\x3d\x3d searchArray[searchArray.length - 2].searchType \x26\x26 searchArray[searchArray.length - 1].searchType \x3d\x3d\x3d \"complete\") {\n\n\t\t\t\t\tfor (var j \x3d 0; j \x3c searchArray.length; j++) {\n\t\t\t\t\t\tsearchArray[j].paxAdults \x3d 0;\n\t\t\t\t\t\tsearchArray[j].paxChildren \x3d 0;\n\t\t\t\t\t\tsearchArray[j].paxInfants \x3d 0;\n\t\t\t\t\t\tfor (var i \x3d 0; i \x3c searchArray[j].adults.length; i++) {\n\t\t\t\t\t\t\tsearchArray[j].paxAdults \x3d (searchArray[j].paxAdults || 0) + searchArray[j].adults[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var i \x3d 0; i \x3c searchArray[j].children.length; i++) {\n\t\t\t\t\t\t\tsearchArray[j].paxChildren \x3d (searchArray[j].paxChildren || 0) + searchArray[j].children[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var i \x3d 0; i \x3c searchArray[j].infants.length; i++) {\n\t\t\t\t\t\t\tsearchArray[j].paxInfants \x3d (searchArray[j].paxInfants || 0) + searchArray[j].infants[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (searchArray[searchArray.length - 1].resort !\x3d\x3d searchArray[searchArray.length - 2].resort) {\n\t\t\t\t\t\tvar locationChange \x3d searchArray[searchArray.length - 2].resort + \" to \" + searchArray[searchArray.length - 1].resort;\n\t\t\t\t\t}\n\t\t\t\t\tif (searchArray[searchArray.length - 1].duration !\x3d\x3d searchArray[searchArray.length - 2].duration) {\n\t\t\t\t\t\tvar durationChange \x3d searchArray[searchArray.length - 2].duration - searchArray[searchArray.length - 1].duration;\n\t\t\t\t\t\tvar durationChangeFull \x3d searchArray[searchArray.length - 2].duration + \" to \" + searchArray[searchArray.length - 1].duration;\n\t\t\t\t\t\tif (durationChange \x3e 0) {\n\t\t\t\t\t\t\tdurationChange \x3d \"+\" + durationChange;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (searchArray[searchArray.length - 1].prettyStartDate !\x3d\x3d searchArray[searchArray.length - 2].prettyStartDate) {\n\t\t\t\t\t\tvar dateChange \x3d searchArray[searchArray.length - 2].prettyStartDate + \" to \" + searchArray[searchArray.length - 1].prettyStartDate;\n\t\t\t\t\t}\n\t\t\t\t\tif (searchArray[searchArray.length - 1].airportCode !\x3d\x3d searchArray[searchArray.length - 2].airportCode) {\n\t\t\t\t\t\tvar departureChange \x3d searchArray[searchArray.length - 2].airportCode + \" to \" + searchArray[searchArray.length - 1].airportCode;\n\t\t\t\t\t}\n\t\t\t\t\tif (searchArray[searchArray.length - 1].rooms !\x3d\x3d searchArray[searchArray.length - 2].rooms) {\n\t\t\t\t\t\tvar roomsChange \x3d searchArray[searchArray.length - 2].rooms - searchArray[searchArray.length - 1].rooms;\n\t\t\t\t\t\tvar roomsChangeFull \x3d searchArray[searchArray.length - 2].rooms + \" to \" + searchArray[searchArray.length - 1].rooms;\n\t\t\t\t\t\tif (roomsChange \x3e 0) {\n\t\t\t\t\t\t\troomsChange \x3d \"+\" + roomsChange;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (searchArray[searchArray.length - 1].paxAdults !\x3d\x3d searchArray[searchArray.length - 2].paxAdults) {\n\t\t\t\t\t\tvar adultsChange \x3d searchArray[searchArray.length - 2].paxAdults - searchArray[searchArray.length - 1].paxAdults;\n\t\t\t\t\t\tvar adultsChangeFull \x3d searchArray[searchArray.length - 2].paxAdults + \" to \" + searchArray[searchArray.length - 1].paxAdults;\n\t\t\t\t\t\tif (adultsChange \x3e 0) {\n\t\t\t\t\t\t\tadultsChange \x3d \"+\" + adultsChange;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (searchArray[searchArray.length - 1].paxChildren !\x3d\x3d searchArray[searchArray.length - 2].paxChildren) {\n\t\t\t\t\t\tvar childrenChange \x3d searchArray[searchArray.length - 2].paxChildren - searchArray[searchArray.length - 1].paxChildren;\n\t\t\t\t\t\tvar childrenChangeFull \x3d searchArray[searchArray.length - 2].paxChildren + \" to \" + searchArray[searchArray.length - 1].paxChildren;\n\t\t\t\t\t\tif (childrenChange \x3e 0) {\n\t\t\t\t\t\t\tchildrenChange \x3d \"+\" + childrenChange;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (searchArray[searchArray.length - 1].paxInfants !\x3d\x3d searchArray[searchArray.length - 2].paxInfants) {\n\t\t\t\t\t\tvar infantsChange \x3d searchArray[searchArray.length - 2].paxInfants - searchArray[searchArray.length - 1].paxInfants;\n\t\t\t\t\t\tvar infantsChangeFull \x3d searchArray[searchArray.length - 2].paxInfants + \" to \" + searchArray[searchArray.length - 1].paxInfants;\n\t\t\t\t\t\tif (infantsChange \x3e 0) {\n\t\t\t\t\t\t\tinfantsChange \x3d \"+\" + infantsChange;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!!locationChange || !!durationChange || !!dateChange || !!departureChange || !!roomsChange || !!adultsChange || !!childrenChange || !!infantsChange) {\n\t\t\t\t\t\tchangeCombinedFull \x3d locationChange + \"|\" + durationChangeFull + \"|\" + dateChange + \"|\" + departureChange + \"|\" + roomsChangeFull + \"|\" + adultsChangeFull + \"|\" + childrenChangeFull + \"|\" + infantsChangeFull;\n\t\t\t\t\t\tchangeCombined \x3d locationChange + \"|\" + durationChange + \"|\" + dateChange + \"|\" + departureChange + \"|\" + roomsChange + \"|\" + adultsChange + \"|\" + childrenChange + \"|\" + infantsChange;\n\t\t\t\t\t\tchangeCombined \x3d changeCombined.replace(/undefined/g, \" \");\n\t\t\t\t\t\tcmEventAttributeArray \x3d [];\n\t\t\t\t\t\tcmEventAttributeArray[20] \x3d changeCombined;\n\t\t\t\t\t\tif (changeCombinedFull !\x3d\x3d localStorage.getItem(\"changedSearch\")) {\n\t\t\t\t\t\t\tlocalStorage.setItem(\"changedSearch\", changeCombinedFull);\n\t\t\t\t\t\t\t//console.log(\"changed\");\n\t\t\t\t\t\t\tga('send', 'event', 'Search Panel', 'Refine Search', changeCombined);\n\t\t\t\t\t\t\tcmCreateConversionEventTag('Search Panel', 2, 'Refine Search', 0, cmEventAttributeArray)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//console.log(\"not changed\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\n\n\n\t//MMB FAQ Modal\n\ttry {\n\t\tif (!!~document.location.pathname.indexOf(\"yourbooking\")) {\n\t\t\tfor (var i \x3d 0; i \x3c document.querySelectorAll(\"[ng-click\x3d\\\"vm.openHelp(\\'md\\')\\\"]\").length; i++) {\n\t\t\t\tdocument.querySelectorAll(\"[ng-click\x3d\\\"vm.openHelp(\\'md\\')\\\"]\")[i].setAttribute(\"onclick\", \"trackEvent('Manage My Booking', 'FAQ', 'Open Modal');\")\n\t\t\t}\n\t\t\tfor (var i \x3d 0; i \x3c document.querySelectorAll(\".faqs li\").length; i++) {\n\t\t\t\tdocument.querySelectorAll(\".faqs li\")[i].setAttribute(\"onclick\", \"trackEvent('Manage My Booking', 'FAQ', 'Select Question');\")\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\n\t//Barbados Content\n\ttry {\n\t\tif (document.cookie.split(\"destinations-page-client\x3d\").length \x3e 1) {\n\t\t\tvar destinationsPageClientVariant \x3d document.cookie.split(\"destinations-page-client\x3d\")[1].split(\";\")[0];\n\t\t\tif (!sessionStorage.getItem(\"destinationsPageClientTracked\")) {\n\t\t\t\ttrackEvent(\"CRO\", \"New Destinations Page\", \"New Destinations Page \" + destinationsPageClientVariant);\n\t\t\t\tsessionStorage.setItem(\"destinationsPageClientTracked\", \"1\");\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\t\n\tif (typeof(marketingPreferencesTrackingEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\twindow.addEventListener('message', function(message) {\n\t\t\ttry {\n\t\t\t\t// oldPref \x3d safeGetFromObject(message, 'data.data.old');\n\t\t\t\t// newPref \x3d safeGetFromObject(message, 'data.data.new');\n\t\t\t\toldPref \x3d message.data.data.old;\n\t\t\t\tnewPref \x3d message.data.data.new;\n\t\t\t\tif (message.data.category \x3d\x3d\x3d \"Marketing Preferences\") {\n\t\t\t\t\tprefChange \x3d \"DM: \" + oldPref.dmConsent + \" \x3e \" + newPref.dmConsent + \" | Email: \" + oldPref.emailConsent + \" \x3e \" + newPref.emailConsent + \" | Phone: \" + oldPref.phoneConsent + \" \x3e \" + newPref.phoneConsent + \" | SMS: \" + oldPref.smsConsent + \" \x3e \" + newPref.smsConsent;\n\t\t\t\t\ttrackEvent('Customer', 'Change Marketing Preferences', prefChange);\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\t\t});\n\t\tmarketingPreferencesTrackingEventsSet \x3d true;\n\t}\n\t\n\t\n\t(function ($window) {\n\t\tvar _errorQuote \x3d function _errorQuote(message) {\n\t\t\tvar quoteReference \x3d message.data.data;\n\t\t\ttrackEvent('Payment Error', 'Quote Displayed', 'Reference: ' + quoteReference);\n\t\t\tga('send', 'event', 'Payment Error Debug', 'Quote Displayed', quoteReference, { 'nonInteraction': true });\n\t\t};\n\t\tvar _numberOfCardsChanged \x3d function _numberOfCardsChanged(message) {\n\t\t\ttrackEvent('Payment', 'Change Number of Cards', 'Cards:' + message.data.data);\n\t\t};\n\t\tvar _mcpConfirmAmounts \x3d function _mcpConfirmAmounts(message) {\n\t\t\ttrackEvent('Payment', 'Confirm Charge per Card', 'Total:' + message.data.data);\n\t\t};\n\t\tvar _complaintsTiles \x3d function _complaintsTiles(message) {\n\t\t\ttrackEvent('Complaints Page', message.data.eventData + ' Clicked');\n\t\t};\n\t\tvar _sortEvent \x3d function _sortEvent(message) {\n\t\t\tif (!!~location.pathname.indexOf('/holiday/')) {\n\t\t\t\tmerchClientPage \x3d 'Complete Holiday Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/hotel/')) {\n\t\t\t\tmerchClientPage \x3d 'Hotel Only Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/car/')) {\n\t\t\t\tmerchClientPage \x3d 'Car Hire Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/multidestination/')) {\n\t\t\t\tmerchClientPage \x3d 'Multi Destination Holiday Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/flight+hotel/')) {\n\t\t\t\tmerchClientPage \x3d 'Flight + Hotel Search';\n\t\t\t} else {\n\t\t\t\tmerchClientPage \x3d 'Special Offers';\n\t\t\t}\n\t\t\ttrackEvent(merchClientPage, 'Change Sort Order', message.data.data.old + ' to ' + message.data.data.new);\n\t\t};\n\t\tvar _filterEvent \x3d function _filterEvent(message) {\n\t\t\tif (!!~location.pathname.indexOf('/holiday/')) {\n\t\t\t\tmerchClientPage \x3d 'Complete Holiday Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/hotel/')) {\n\t\t\t\tmerchClientPage \x3d 'Hotel Only Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/car/')) {\n\t\t\t\tmerchClientPage \x3d 'Car Hire Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/multidestination/')) {\n\t\t\t\tmerchClientPage \x3d 'Multi Destination Holiday Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/flight+hotel/')) {\n\t\t\t\tmerchClientPage \x3d 'Flight + Hotel Search';\n\t\t\t} else {\n\t\t\t\tmerchClientPage \x3d 'Special Offers';\n\t\t\t}\n\n\t\t\tif (message \x26\x26 message.data \x26\x26 message.data.data \x26\x26 message.data.data.state \x3d\x3d\x3d true) {\n\t\t\t\ttrackEvent(merchClientPage, 'Filter Activated', message.data.name + ' - ' + message.data.data.filterOn);\n\t\t\t} else {\n\t\t\t\ttrackEvent(merchClientPage, 'Filter Deactivated', message.data.name + ' - ' + message.data.data.filterOn);\n\t\t\t}\n\t\t};\n\t\tvar _filterResetEvent \x3d function _filterResetEvent(message) {\n\t\t\tif (!!~location.pathname.indexOf('/holiday/')) {\n\t\t\t\tmerchClientPage \x3d 'Complete Holiday Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/hotel/')) {\n\t\t\t\tmerchClientPage \x3d 'Hotel Only Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/car/')) {\n\t\t\t\tmerchClientPage \x3d 'Car Hire Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/multidestination/')) {\n\t\t\t\tmerchClientPage \x3d 'Multi Destination Holiday Search';\n\t\t\t} else if (!!~location.pathname.indexOf('/flight+hotel/')) {\n\t\t\t\tmerchClientPage \x3d 'Flight + Hotel Search';\n\t\t\t} else {\n\t\t\t\tmerchClientPage \x3d 'Special Offers';\n\t\t\t}\n\t\t\ttrackEvent(merchClientPage, 'Filters Reset', null);\n\t\t};\n\n\t\tvar _hotelAlternativeList \x3d function _hotelAlternativeList(message) {\n\t\t\tfor (var i \x3d 0; i \x3c message.data.data.length; i++) {\n\t\t\t\tmessage.data.data[i].holidayType \x3d message.data.data[i].holidayType;\n\t\t\t\tga('ec:addImpression', {\n\t\t\t\t\t'id': message.data.data[i].code,\n\t\t\t\t\t'name': message.data.data[i].name,\n\t\t\t\t\t'category': holidayTypeFix(message.data.data[i].holidayType),\n\t\t\t\t\t'list': holidayTypeFix(message.data.data[i].holidayType) + ' Alternative Results',\n\t\t\t\t\t//'position': i + 1,\n\t\t\t\t\t'price': message.data.data[i].pricePerPerson\n\t\t\t\t});\n\t\t\t}\n\t\t\tga('send', 'event', 'Hotel Alternatives', 'Alternatives Shown', message.data.data.length + ' Alternatives', {\n\t\t\t\t'nonInteraction': true\n\t\t\t});\n\t\t};\n\t\tvar _hotelAlternativeSelect \x3d function _hotelAlternativeSelect(message) {\n\t\t\tga('ec:addProduct', {\n\t\t\t\t'id': message.data.data.code,\n\t\t\t\t'name': message.data.data.name,\n\t\t\t\t'category': holidayTypeFix(message.data.data[i].holidayType),\n\t\t\t\t'list': holidayTypeFix(message.data.data[i].holidayType) + ' Search Results',\n\t\t\t\t//'position': gaPosition,\n\t\t\t\t'price': message.data.data.pricePerPerson,\n\t\t\t\t'quantity': 1\n\t\t\t});\n\t\t\tga('ec:setAction', 'click', {\n\t\t\t\t'list': message.data.data.holidayType + ' Alternative Results'\n\t\t\t});\n\t\t\tga('send', 'event', 'Hotel Alternatives', 'Alternative Selected', {\n\t\t\t\t'nonInteraction': true\n\t\t\t});\n\t\t};\n\t\tvar _hotelAlternativeViewAll \x3d function _hotelAlternativeViewAll(message) {\n\t\t\tga('send', 'event', 'Hotel Alternatives', 'View All Results', {\n\t\t\t\t'nonInteraction': true\n\t\t\t});\n\t\t};\n\t\tvar _socialAction \x3d function _socialAction(message) {\n\t\t\tif (typeof message.data !\x3d\x3d \"undefined\" \x26\x26 typeof message.data.action !\x3d\x3d \"undefined\") {\n\t\t\t\ttrackEvent('Social Action', 'Clicked ' + message.data.action);\n\t\t\t} else if (typeof message.data !\x3d\x3d \"undefined\" \x26\x26 typeof message.data.data !\x3d\x3d \"undefined\") {\n\t\t\t\ttrackEvent('Social Action', 'Clicked ' + message.data.data);\n\t\t\t} else if (typeof message.detail !\x3d\x3d \"undefined\" \x26\x26 typeof message.detail.action !\x3d\x3d \"undefined\") {\n\t\t\t\ttrackEvent('Social Action', 'Clicked ' + message.detail.action);\n\t\t\t}\n\t\t};\n\t\tvar _viewChange \x3d function _viewChange(message) {\n\t\t\tif (universal_variable \x26\x26 universal_variable.search_results \x26\x26 universal_variable.search_results.bookingType) {\n\t\t\t\ttrackEvent(universal_variable.search_results.bookingType + ' Search', 'Change View', message.data.data.old + \" to \" + message.data.data.new);\n\t\t\t} else if(!!~document.location.pathname.indexOf(\"offers\")) {\n\t\t\t\ttrackEvent('Special Offers', 'Change View', message.data.data.old + \" to \" + message.data.data.new);\n\t\t\t} else {\n\t\t\t\ttrackEvent('Browse Pages', 'Change View', message.data.data.old + \" to \" + message.data.data.new);\n\t\t\t}\n\t\t};\n\t\tvar _expertsShowInvite \x3d function _expertsShowInvite(message) {\n\t\t\tif (typeof expertsInviteTrack \x3d\x3d\x3d \"undefined\") {\n\t\t\t\texpertsInviteTrack \x3d true;\n\t\t\t\ttrackEvent('Find An Expert', 'Experts Invite Shown', null);\n\t\t\t}\n\t\t};\n\t\tvar _expertsOpenPopup \x3d function _expertsOpenPopup(message) {\n\t\t\tfor (var i \x3d 0; i \x3c message.data.data.experts.length; i++) {\n\t\t\t\tga('ec:addPromo', {\n\t\t\t\t\t'id': message.data.data.experts[i].id,\n\t\t\t\t\t'name': message.data.data.experts[i].displayName,\n\t\t\t\t\t'position': 'Find an Expert ' + (i + 1),\n\t\t\t\t\t'creative': message.data.data.experts[i].skillSet\n\t\t\t\t});\n\t\t\t}\n\t\t\ttrackEvent('Find An Expert', 'Experts Popup Opened', message.data.data.experts.length + \" Experts\");\n\t\t};\n\t\tvar _expertSelected \x3d function _expertSelected(message) {\n\t\t\tga('ec:addPromo', {\n\t\t\t\t'id': message.data.data.expert.id,\n\t\t\t\t'name': message.data.data.expert.displayName,\n\t\t\t\t'position': 'Find an Expert ' + (message.data.data.positionInList + 1),\n\t\t\t\t'creative': message.data.data.expert.skillSet\n\t\t\t});\n\t\t\tga('ec:setAction', 'promo_click');\n\t\t\ttrackEvent('Find An Expert', 'Agent Selected', message.data.data.expert.id);\n\t\t};\n\t\tvar _expertContactSelected \x3d function _expertContactSelected(message) {\n\t\t\ttrackEvent('Find An Expert', 'Agent Contact: ' + message.data.data.contactOption, message.data.data.id);\n\t\t};\n\t\tvar _expertRating \x3d function _expertRating(message) {\n\t\t\ttrackEvent('Find An Expert', 'Post Chat Rating', \"Rating: \" + message.data.data.rating + \", Comment: \" + message.data.data.comment);\n\t\t};\n\t\tvar _salesBannerContract \x3d function _salesBannerContract(message) {\n\t\t\ttrackEvent('Banners', 'Banner: Read Less', message.data.data);\n\t\t};\n\t\tvar _salesBannerExpand \x3d function _salesBannerExpand(message) {\n\t\t\ttrackEvent('Banners', 'Banner: Read More', message.data.data);\n\t\t};\n\t\tvar _salesBannerClosed \x3d function _salesBannerClosed(message) {\n\t\t\ttrackEvent('Banners', 'Banner: Closed', message.data.data);\n\t\t};\n\t\tvar _salesBannerClicked \x3d function _salesBannerClicked(message) {\n\t\t\tif (typeof ga \x3d\x3d \"function\") {\n\t\t\t\tga('ec:addPromo', {\n\t\t\t\t\t'id': message.data.data,\n\t\t\t\t\t'name': message.data.data,\n\t\t\t\t\t'position': 'Banner',\n\t\t\t\t\t'creative': 'Original'\n\t\t\t\t});\n\t\t\t\tga('ec:setAction', 'promo_click');\n\t\t\t}\n\t\t\ttrackEvent('Banners', 'Banner: Clicked', message.data.data);\n\t\t};\n\t\tvar _salesBannerDisplayed \x3d function _salesBannerDisplayed(message) {\n\t\t\tif (typeof ga \x3d\x3d \"function\") {\n\t\t\t\tga('ec:addPromo', {\n\t\t\t\t\t'id': message.data.data,\n\t\t\t\t\t'name': message.data.data,\n\t\t\t\t\t'position': 'Banner',\n\t\t\t\t\t'creative': 'Original'\n\t\t\t\t});\n\t\t\t}\n\t\t\ttrackEvent('Banners', 'Banner: Displayed', message.data.data);\n\t\t};\n\t\tvar _milesLoginAttempt \x3d function _milesLoginAttempt(message) {\n\t\t\ttrackEvent('Payment', 'Miles Login Attempt');\n\t\t};\n\t\tvar _milesLoginSuccess \x3d function _milesLoginSuccess(message) {\n\t\t\ttrackEvent('Payment', 'Miles Login Success');\n\t\t};\n\t\tvar _milesLoginFailure \x3d function _milesLoginFailure(message) {\n\t\t\ttrackEvent('Payment', 'Miles Login Failure');\n\t\t};\n\t\tvar _milesConfirmAmount \x3d function _milesConfirmAmount(message) {\n\t\t\ttrackEvent('Payment', 'Miles Confirm Amount');\n\t\t};\n\t\tvar _milesConfirmAmountMMB \x3d function _milesConfirmAmountMMB(message) {\n\t\t\ttrackEvent('Payment', 'Miles Confirm Amount');\n\t\t};\n\t\tvar _milesMilesOnlyBooking \x3d function _milesMilesOnlyBooking(message) {\n\t\t\ttrackEvent('Payment', 'Miles Confirm Pay In Full');\n\t\t};\n\t\tvar _mmbPaymentTabSwitched \x3d function _mmbPaymentTabSwitched(message) {\n\t\t\ttrackEvent('Manage My Booking', 'Payment Option Tab', message.data.summary.tabFrom + \" to \" + message.data.summary.tabTo);\n\t\t};\n\t\t\n\t\tvar _hotlistViewed \x3d function _hotlistViewed(message) {\n\t\t\tvar viewedList \x3d message.data.data[0].list;\n\t\t\tvar viewedListItems \x3d message.data.data[0].list.items;\n\t\t\tfor(var i \x3d 0; i \x3c viewedListItems.length; i++){\n\t\t\t\titemName \x3d viewedListItems[i].name;\n\t\t\t\titemType \x3d viewedListItems[i].type;\n\t\t\t\titemPrice \x3d viewedListItems[i].price;\n\t\t\t\tif(itemType \x3d\x3d\x3d \"HOTEL\" \x26\x26 itemPrice){\n\t\t\t\t\titemType \x3d \"HOLIDAY\";\n\t\t\t\t}\n\t\t\t\tga('ec:addImpression', {\n\t\t\t\t\t'id': itemName,\n\t\t\t\t\t'name': itemName,\n\t\t\t\t\t'category': 'Hotlist/' + viewedList.id + '/' + viewedList.name + '/' + itemType,\n\t\t\t\t\t'list': 'Hotlist',\n\t\t\t\t\t'position': i + 1\n\t\t\t\t});\n\t\t\t\tif (i % 25 \x3d\x3d\x3d 0 \x26\x26 i \x3e 0) {\n\t\t\t\t\tga('send', 'event', 'Hotlist', 'Impression Bundle', { 'nonInteraction': true, 'dimension54': viewedList.id });\n\t\t\t\t}\t\t\t\n\t\t\t}\n\t\t\tga('send', 'event', 'Hotlist', 'Viewed Hotlist', viewedList.id, { 'nonInteraction': true, 'dimension54': viewedList.id }); //Add Hotlist ID custom dimension\n\t\t};\n\t\t\n\t\tvar _hotlistItemAdding \x3d function _hotlistItemAdding(message) {\n\t\t\tga('send', 'event', 'Hotlist', 'Adding to Hotlist', message.data.content.name);\n\t\t}\n\t\tvar _hotlistItemAdded \x3d function _hotlistItemAdded(message) {\n\t\t\tga('send', 'event', 'Hotlist', 'Added to Hotlist', message.data.content.name, { 'dimension54': message.data.content.list.id } );\n\t\t}\n\t\tvar _hotlistItemRemoving \x3d function _hotlistItemRemoving(message) {\n\t\t\tga('send', 'event', 'Hotlist', 'Removing from Hotlist', message.data.content.name);\n\t\t}\n\t\tvar _hotlistItemRemoved \x3d function _hotlistItemRemoved(message) {\n\t\t\tga('send', 'event', 'Hotlist', 'Removed from Hotlist', message.data.content.name, { 'dimension54': message.data.content.list.id } );\n\t\t}\n\t\tvar _hotlistListRenamed \x3d function _hotlistListRenamed(message) {\n\t\t\tvar hotlistID \x3d document.location.pathname.split(\"/\")[2]; //Replace!\n\t\t\tga('send', 'event', 'Hotlist', 'Renamed Hotlist', message.data.data[0].old + ' to ' + message.data.data[0].new, { 'dimension54': hotlistID } );\n\t\t}\n\t\tvar _hotlistViewClick \x3d function _hotlistViewClick(message) {\n\t\t\tvar hotlistID \x3d document.location.pathname.split(\"/\")[2]; //Replace!\n\t\t\tvar hotlistName \x3d document.querySelectorAll(\"[list-name]\")[0].value; //Replace!\n\t\t\tvar viewedListItem \x3d message.data.data[0];\n\t\t\tif(viewedListItem.type \x3d\x3d\x3d \"HOTEL\" \x26\x26 viewedListItem.price){\n\t\t\t\tviewedListItem.type \x3d \"HOLIDAY\"\n\t\t\t}\n\t\t\tga('ec:addProduct', {\n                'id': message.data.data[0].name,\n                'name': message.data.data[0].name,\n                'category': 'Hotlist/' + hotlistID + '/' + hotlistName + '/' + message.data.data[0].type,\n                'list': 'Hotlist',\n                'position': Number(message.data.data[2])+1\n            });\n\t\t\tga('ec:setAction', 'click', {\n                'list': 'Hotlist'\n            });\n\t\t\tga('send', 'event', 'Hotlist', 'Clicked Item From Hotlist', message.data.data[0].name, { 'dimension54': hotlistID });\n\t\t}\n\t\tvar _hotlistShareClick \x3d function _hotlistShareClick(message) {\n\t\t\tvar hotlistID \x3d document.location.pathname.split(\"/\")[2]; //Replace!\n\t\t\tga('send', 'event', 'Hotlist', 'Shared Hotlist', message.data.data[1], { 'dimension54': hotlistID } );\n\t\t}\n\t\t\n\t\tvar _errorPageLoaded \x3d function _errorPageLoaded(message) {\n\t\t\tif(message.data.name \x3d\x3d\x3d \"Error page loaded: errors/no-search-results\" \x26\x26 universal_variable \x26\x26 universal_variable.page){\n\t\t\t\tga('set', {\n\t\t\t\t\t'page': '/[' + universal_variable.page.category + ']/[Search Results]',\n\t\t\t\t\t'dimension19': 0\n\t\t\t\t});\n\t\t\t\tga('send', 'page');\n\t\t\t} \n\t\t\telse {\n\t\t\t\tvar errorName \x3d message.data.name.split(\": \")[1];\n\t\t\t\tga('set', {\n\t\t\t\t\t'page': '/['+universal_variable.page.category + ']/[' + errorName + ']'\n\t\t\t\t});\n\t\t\t\tga('send', 'page');\n\t\t\t}\n\t\t\tga('send', 'event', 'Error', message.data.name, { 'nonInteraction': true });\n\t\t}\n\t\tvar _timedOut \x3d function _timedOut(message) {\n\t\t\tif(!!~document.location.pathname.indexOf(\"/checkout/detail\")){\n\t\t\t\tga('set', { 'page': '/[timeout]/[passenger details]' });\n\t\t\t} else if(!!~document.location.pathname.indexOf(\"/checkout/payment\")){\n\t\t\t\tga('set', { 'page': '/[timeout]/[payment]' });\n\t\t\t} else if(!!~document.location.pathname.indexOf(\"/checkout/confirmation\")){\n\t\t\t\tga('set', { 'page': '/[timeout]/[confirmation]' });\n\t\t\t}\t\t\t\n\t\t\tga('send', 'event', 'Error', 'Timeout', { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestEssentialsMonthChange \x3d function _contentTestEssentialsMonthChange(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'Essentials Month Changed', message.data.data, { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestEssentialsPriceTabClick \x3d function _contentTestEssentialsPriceTabClick(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'Essentials Tab Changed', 'Price', { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestEssentialsRainfallTabClick \x3d function _contentTestEssentialsRainfallTabClick(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'Essentials Tab Changed', 'Rainfall', { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestEssentialsTemperatureTabClick \x3d function _contentTestEssentialsTemperatureTabClick(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'Essentials Tab Changed', 'Temperature', { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestEssentialMoreClick \x3d function _contentTestEssentialMoreClick(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'More Essentials Clicked', message.data.data, { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestDestinationNavigationClick \x3d function _contentTestDestinationNavigationClick(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'Destination Navigation Clicked', message.data.data, { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestSearchPanelExpand \x3d function _contentTestSearchPanelExpand(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'Search Panel Expanded', { 'nonInteraction': true } );\n\t\t}\n\t\tvar _contentTestVideoClick \x3d function _contentTestVideoClick(message) {\t\t\n\t\t\tga('send', 'event', 'Content Test', 'Video Clicked', { 'nonInteraction': true } );\n\t\t}\n\t\tvar _dateWideningShown \x3d function _dateWideningShown(message){\n\t\t\tholType \x3d \"\";\n\t\t\tif (!!~location.pathname.indexOf('/holiday/')) {\n\t\t\t\tholType \x3d 'Complete Holiday';\n\t\t\t} else if (!!~location.pathname.indexOf('/hotel/')) {\n\t\t\t\tholType \x3d 'Hotel Only';\n\t\t\t} else if (!!~location.pathname.indexOf('/car/')) {\n\t\t\t\tholType \x3d 'Car Hire';\n\t\t\t} else if (!!~location.pathname.indexOf('/multidestination/')) {\n\t\t\t\tholType \x3d 'Multi Destination Holiday';\n\t\t\t} else if (!!~location.pathname.indexOf('/flight+hotel/')) {\n\t\t\t\tholType \x3d 'Flight + Hotel';\n\t\t\t}\n\t\t\tga('set', { 'page': '/[' + holType + ']/[widened results]' })\n\t\t\tga('send', 'event', holType + ' Search', 'Return Date Widening Results', { 'nonInteraction': true } )\n\t\t}\n\t\tvar messageFunctions \x3d {\n\t\t\t'error-quote': _errorQuote,\n\t\t\t'number-of-cards-changed': _numberOfCardsChanged,\n\t\t\t'mcp-confirmed-amounts': _mcpConfirmAmounts,\n\t\t\t'Complaints Page Contact Tiles': _complaintsTiles,\n\t\t\t'sort-tracking': _sortEvent,\n\t\t\t'hotel-name-filter': _filterEvent,\n\t\t\t'Price (pp)-filter': _filterEvent,\n\t\t\t'Tripadvisor-filter': _filterEvent,\n\t\t\t'Location-filter': _filterEvent,\n\t\t\t'Virgin Rating-filter': _filterEvent,\n\t\t\t'Board Basis-filter': _filterEvent,\n\t\t\t'Departure month-filter': _filterEvent,\n\t\t\t'Departure airport-filter': _filterEvent,\n\t\t\t'Duration-filter': _filterEvent,\n\t\t\t'reset-filters': _filterResetEvent,\n\t\t\t'no results alternatives': _hotelAlternativeList,\n\t\t\t'alternative-result-selected': _hotelAlternativeSelect,\n\t\t\t'view-all-hotels-click': _hotelAlternativeViewAll,\n\t\t\t'Social Action': _socialAction,\n\t\t\t'view-tracking': _viewChange,\n\t\t\t'Experts: Show Invite': _expertsShowInvite,\n\t\t\t'Experts: Open Popup': _expertsOpenPopup, //has all the expert agent list stuff in\n\t\t\t'Experts: Agent Selected': _expertSelected, //basically the same no change\n\t\t\t'Experts: Agent Contact Selected': _expertContactSelected, //has contact options\n\t\t\t'Experts: Post Chat Rating': _expertRating, //needs score\n\t\t\t'Sales banner \\'Read less\\' clicked': _salesBannerContract,\n\t\t\t'Sales banner \\'Read more\\' clicked': _salesBannerExpand,\n\t\t\t'Sales banner closed': _salesBannerClosed,\n\t\t\t'Sales banner CTA': _salesBannerClicked,\n\t\t\t'Sales banner is displaying': _salesBannerDisplayed,\n\t\t\t'miles-login-attempt': _milesLoginAttempt,\n\t\t\t'miles-login-attempted': _milesLoginAttempt,\n\t\t\t'miles-login-success': _milesLoginSuccess,\n\t\t\t'miles-login-failure': _milesLoginFailure,\n\t\t\t'miles-login-failed': _milesLoginFailure,\n\t\t\t'miles-confirm-amount': _milesConfirmAmount,\n\t\t\t'miles-payment-confirmed-success': _milesConfirmAmountMMB,\n\t\t\t'miles-miles-only-booking': _milesMilesOnlyBooking,\n\t\t\t'mmb-payment-tab-switched': _mmbPaymentTabSwitched,\n\t\t\t'GOT_HOTLIST': _hotlistViewed,\n\t\t\t'HOTLIST_ITEM_ADDING': _hotlistItemAdding,\n\t\t\t'HOTLIST_ITEM_ADDED': _hotlistItemAdded,\n\t\t\t'HOTLIST_ITEM_REMOVING': _hotlistItemRemoving,\n\t\t\t'HOTLIST_ITEM_REMOVED': _hotlistItemRemoved,\n\t\t\t'RENAMED_LIST': _hotlistListRenamed,\n\t\t\t'HOTLIST_VIEW_CLICK': _hotlistViewClick,\n\t\t\t'HOTLIST_SHARE_CLICKED': _hotlistShareClick,\n\t\t\t'ERROR_PAGE_LOADED': _errorPageLoaded,\n\t\t\t'TIMEDOUT': _timedOut,\n\t\t\t'ESSENTIAL_DISCOVERY_MONTH_CHANGED': _contentTestEssentialsMonthChange,\n\t\t\t'ESSENTIALS_PRICE_TAB_CLICKED': _contentTestEssentialsPriceTabClick,\n\t\t\t'ESSENTIALS_RAINFALL_TAB_CLICKED': _contentTestEssentialsRainfallTabClick,\n\t\t\t'ESSENTIALS_TEMPERATURE_TAB_CLICKED': _contentTestEssentialsTemperatureTabClick,\n\t\t\t'MORE_ESSENTIALS_BUTTON_CLICKED': _contentTestEssentialMoreClick,\n\t\t\t'DESINATION_NAVIGATION_CLICKED': _contentTestDestinationNavigationClick,\n\t\t\t'SEARCH_PANEL_BUTTON_CLICKED': _contentTestSearchPanelExpand,\n\t\t\t'WELCOME_TO_VIDEO_CLICKED': _contentTestVideoClick,\n\t\t\t'Select Date Widened Result': _dateWideningShown\n\t\t};\n\t\tif (typeof newEventListenerTracking \x3d\x3d\x3d \"undefined\") {\n\n\t\t\t$window.addEventListener('message', function (message) {\n\t\t\t\tif (message \x26\x26 message.data \x26\x26 message.data.name \x26\x26 messageFunctions.hasOwnProperty(message.data.name)) {\n\t\t\t\t\tif(!!~message.data.name.indexOf(\"Error page loaded: \")){\n\t\t\t\t\t\tmessageFunction[\"ERROR_PAGE_LOADED\"](message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessageFunctions[message.data.name](message);\n\t\t\t\t\t}\n\t\t\t\t} else if (message \x26\x26 message.data \x26\x26 message.data.eventName \x26\x26 messageFunctions.hasOwnProperty(message.data.eventName)) {\n\t\t\t\t\tmessageFunctions[message.data.eventName](message);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$window.addEventListener('vhmTrackingEvent', function (message) {\n\t\t\t\tif (message \x26\x26 message.detail \x26\x26 message.detail.name \x26\x26 messageFunctions.hasOwnProperty(message.detail.name)) {\n\t\t\t\t\tmessageFunctions[message.detail.name](message);\n\t\t\t\t}\n\t\t\t});\n\t\t\tnewEventListenerTracking \x3d true;\n\t\t\t//console.log(\"Tracking Events Loaded\");\n\t\t}\n\t})(window);\n\t\n\t//Experts Popup Track Impression\n\ttry {\n\t\tif(typeof(expertsInviteTrack) \x3d\x3d\x3d \"undefined\" \x26\x26 document.querySelectorAll(\"[experts-panel]\").length \x3e 0){\n\t\t\texpertsInviteTrack \x3d true;\n\t\t\ttrackEvent('Find An Expert', 'Experts Invite Shown', null);\n\t\t}\n\t} catch (ignore) {}\n\t\n\t\n\t\n\tif(typeof(newEventListenerTrackingReady) \x3d\x3d\x3d \"undefined\"){\n\t\tconst pageLoadTrackStart \x3d new CustomEvent('qubitTrackingOnLoadEvent', {bubbles: true});\n\t\tsetTimeout(function(){\n\t\t\twindow.dispatchEvent(pageLoadTrackStart);\n\t\t\tnewEventListenerTrackingReady \x3d true;\n\t\t},1000);\t\t\n\t}\n\t\n\ttry {\n\t\tcookieList \x3d document.cookie.split(\";\");\n\t\tfor (i \x3d 0; i \x3c cookieList.length; i++){\n\t\t\tif(!!~cookieList[i].indexOf(\"_vis_opt_exp_\") \x26\x26 !!~cookieList[i].indexOf(\"_combi\") \x26\x26 !sessionStorage.getItem('VWOTracked')){\n\t\t\t\tcookieToken \x3d cookieList[i].split(\"\x3d\")[0];\n\t\t\t\tvwoExp \x3d cookieToken.replace(\"_vis_opt_exp_\",\"\").replace(\"_combi\",\"\").replace(\"_choose\",\"\").trim();\n\t\t\t\t\n\t\t\t\tvwoVariant \x3d cookieList[i].split(\"\x3d\")[1];\n\t\t\t\ttrackEvent(\"CRO\", \"VWO: \" + vwoExp, \"VWO:\" + vwoExp + \"-\" + vwoVariant);\n\t\t\t}\n\t\t}\n\t\tsessionStorage.setItem('VWOTracked','1');\n\t} catch(ignore) {}\n\n\ttry {\n\t\tvar pageAuditVar \x3d Math.floor((Math.random() * 50000));\n\t\tif(pageAuditVar \x3d\x3d\x3d 1){\n\t\t\ttrackEvent(\"Page Audit\", \"Page Requires Audit\", document.location.pathname);\n\t\t}\n\t} catch(ignore) {}\n\t\n\t\n\t//Caribbean deals hide - Chloe to manage\n\ttry {\n\t\tif (localStorage.getItem(\"caribbeanDealHideVariant\")) {\n\t\t\tvar caribbeanDealHideVariant \x3d localStorage.getItem(\"caribbeanDealHideVariant\");\n\t\t\tif (!sessionStorage.getItem(\"caribbeanDealHideVariantTracked\")) {\n\t\t\t\ttrackEvent(\"CRO\", \"Caribbean Deals Hide \" + caribbeanDealHideVariant, caribbeanDealHideVariant);\n\t\t\t\tsessionStorage.setItem(\"caribbeanDealHideVariantTracked\", \"1\");\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\t\n\t\t\n\t//Checkout Visits for personalisation\n\ttry {\n\t\tif (!sessionStorage.getItem(\"checkoutCounted\") \x26\x26 !!~document.location.pathname.indexOf(\"checkout\")) {\n\t\tvar checkoutCount \x3d (Number(localStorage.getItem(\"checkoutCount\")) || 0) + 1;\n\t\tlocalStorage.setItem(\"checkoutCount\", checkoutCount);\n\t\t\tsessionStorage.setItem(\"checkoutCounted\", 1);\n\t\t}\n\t} catch (ignore) {}\n\t\n\t//TODO remove when added elsewhere\n\tvar expertsPodButtons \x3d document.querySelectorAll(\"[experts-pod-button]\");\n  for(var i \x3d 0; i \x3c expertsPodButtons.length; i++){\n  \tdocument.querySelectorAll(\"[experts-pod-button]\")[i].onclick \x3d function(){\n  \t\ttry {\n  \t\t\ttrackEvent('Find An Expert', 'Experts Popup Opened', null);\n  \t\t} catch (ignore) {}\n  \t}\n  }\n  \n  //Merch Client\n  try {\n\t\tif (document.cookie.split(\"server-rendered-merchandising\x3d\").length \x3e 1) {\n\t\t\tvar serverRenderedMerchandising_variant \x3d document.cookie.split(\"server-rendered-merchandising\x3d\")[1].split(\";\")[0];\n\t\t\tif (!sessionStorage.getItem(\"server-rendered-merchandising_Tracked\")) {\n\t\t\t\ttrackEvent(\"CRO\", \"Server Rendered Merchandising \" + serverRenderedMerchandising_variant, serverRenderedMerchandising_variant);\n\t\t\t\tsessionStorage.setItem(\"server-rendered-merchandising_Tracked\", \"1\");\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\t\n\t//Response Tap Error Cookie\n\ttry {\n\t\tif (!!~document.cookie.indexOf(\"adiErr\")) {\n\t\t\tvar adiErrValue \x3d document.cookie.split(\"adiErr\")[1].split(\";\")[0];\n\t\t\tif (!sessionStorage.getItem(\"adiErrTracked\")) {\n\t\t\t\ttrackEvent(\"Error\", \"adiError Cookie Detected\", adiErrValue);\n\t\t\t\tsessionStorage.setItem(\"adiErrTracked\", \"1\");\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\t\n\t\n\t//Validation\n\ttry {\n\t\tif (typeof(bookingTrackEventSet) \x3d\x3d\x3d \"undefined\") {\n\t\t\twindow.addEventListener(\"message\", function(message) {\n\t\t\t\ttry {\n\t\t\t\t\tif (message.data.eventName \x3d\x3d\x3d \"BOOKING_CONFIRMATION\") {\n\t\t\t\t\t\tbookingReference \x3d message.data.summary.tracking.bookingReference;\n\t\t\t\t\t\tbookingReference256 \x3d SHA256(holidayReference.toString());\n\t\t\t\t\t\tbookingPrice \x3d message.data.summary.totalPrice;\n\t\t\t\t\t\tbookingTimeStamp \x3d Math.round(new Date().getTime());\n\t\t\t\t\t\tbkgTemp \x3d {};\n\t\t\t\t\t\tbkgTemp \x3d { ref:bookingReference256, price:bookingPrice, datetime:bookingTimeStamp };\n\t\t\t\t\t\tsessionStorage.setItem(\"bkgTrack\", JSON.stringify(bkgTemp));\n\t\t\t\t\t}\n\t\t\t\t} catch (ignore) {}\n\t\t\t\tbookingTrackEventSet \x3d true;\n\t\t\t});\n\t\t}\n\t} catch (ignore) {}\n\ttry {\n\t\tif(!!~document.location.pathname.indexOf(\"yourbooking\") \x26\x26 sessionStorage.getItem(\"bkgTrack\")){\n\t\t\tbkgTemp \x3d JSON.parse(sessionStorage.getItem(\"bkgTrack\"));\n\t\t\tif(universal_variable \x26\x26 universal_variable.booking \x26\x26 universal_variable.booking.reference \x26\x26 universal_variable.payment \x26\x26 universal_variable.payment.totalPrice){\n\t\t\t\tmmbReference \x3d universal_variable.booking.reference;\n\t\t\t\tmmbReference256 \x3d SHA256(mmbReference.toString());\n\t\t\t\tmmbPrice \x3d universal_variable.payment.totalPrice;\n\t\t\t\tpriceDifference \x3d Number(mmbPrice) - Number(bkgTemp.price);\n\t\t\t\tpriceDifferenceCategory \x3d \"No Change\";\n\t\t\t\tif(priceDifference \x3e 1){\n\t\t\t\t\tpriceDifferenceCategory \x3d \"Upward\";\n\t\t\t\t} else if (priceDifference \x3c -1){\n\t\t\t\t\tpriceDifferenceCategory \x3d \"Downward\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif((mmbReference256 \x3d\x3d bkgTemp.ref)){\n\t\t\t\t\tga('send', 'event', 'Cost Validation', priceDifferenceCategory, priceDifference.toString(), {\n\t\t\t\t\t\t'dimension29': mmbReference,\n\t\t\t\t\t\t'dimension30': mmbPrice\n\t\t\t\t\t});\n\t\t\t\t\tsessionStorage.removeItem(\"bkgTrack\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\n\n\t//Expert Details Input Truncate\n\ttry {\n\t\tif (localStorage.getItem(\"shortExpertDetailsVariant\")) {\n\t\t\tvar shortExpertDetailsVariant \x3d localStorage.getItem(\"shortExpertDetailsVariant\");\n\t\t\tif (!sessionStorage.getItem(\"shortExpertDetailsVariantTracked\")) {\n\t\t\t\tif (shortExpertDetailsVariant \x3d\x3d 1) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"Expert Details\", \"Expert Details Short\");\n\t\t\t\t\tsessionStorage.setItem(\"shortExpertDetailsVariantTracked\", \"1\");\n\t\t\t\t} else if (shortExpertDetailsVariant \x3d\x3d 0) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"Expert Details\", \"Expert Details Long\");\n\t\t\t\t\tsessionStorage.setItem(\"shortExpertDetailsVariantTracked\", \"1\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\t\n\t//Experts in Contact Us\n\ttry {\n\t\tif (localStorage.getItem(\"expertContactUsVariant\")) {\n\t\t\tvar expertContactUsVariant \x3d localStorage.getItem(\"expertContactUsVariant\");\n\t\t\tif (!sessionStorage.getItem(\"expertContactUsVariantTracked\")) {\n\t\t\t\tif (expertContactUsVariant \x3d\x3d 0) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"Expert Contact Us\", \"Expert Contact Us Hidden\");\n\t\t\t\t\tsessionStorage.setItem(\"expertContactUsVariantTracked\", \"1\");\n\t\t\t\t} else if (expertContactUsVariant \x3d\x3d 1) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"Expert Contact Us\", \"Expert Contact Us Shown\");\n\t\t\t\t\tsessionStorage.setItem(\"expertContactUsVariantTracked\", \"1\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\t\n\t\n\t//Hotel Drawer Tracking\ntry {\n\thotelBrowseList \x3d document.querySelectorAll(\".drawer-card\");\n\tfor(var i \x3d 0; i \x3c hotelBrowseList.length; i++){\t\n\t\tif(hotelBrowseList[i].querySelectorAll(\".Wallop-buttonPrevious\").length \x3e 0){\n\t\t\thotelBrowseList[i].querySelectorAll(\".Wallop-buttonPrevious\")[0].onclick \x3d function(){\n\t\t\t\ttrackEvent('Hotel Browse', 'Previous Image', this.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute(\"data-name\"));\n\t\t\t}\n\t\t}\n\t\tif(hotelBrowseList[i].querySelectorAll(\".Wallop-buttonNext\").length \x3e 0){\n\t\t\thotelBrowseList[i].querySelectorAll(\".Wallop-buttonNext\")[0].onclick \x3d function(){\n\t\t\t\ttrackEvent('Hotel Browse', 'Next Image', this.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute(\"data-name\"));\n\t\t\t}\n\t\t}\n\t\tif(hotelBrowseList[i].querySelectorAll(\"[data-drawer\x3d\\\"hotel-drawer\\\"]\").length \x3e 0){\n\t\t\thotelBrowseList[i].querySelectorAll(\"[data-drawer\x3d\\\"hotel-drawer\\\"]\")[0].onclick \x3d function(){\n\t\t\t\ttrackEvent('Hotel Browse', 'Drawer - Hotel Details', this.parentNode.parentNode.parentNode.getAttribute(\"data-name\"));\n\t\t\t}\n\t\t}\n\t\tif(hotelBrowseList[i].querySelectorAll(\"[data-drawer\x3d\\\"review-drawer\\\"]\").length \x3e 0){\n\t\t\thotelBrowseList[i].querySelectorAll(\"[data-drawer\x3d\\\"review-drawer\\\"]\")[0].onclick \x3d function(){\n\t\t\t\ttrackEvent('Hotel Browse', 'Drawer - Reviews', this.parentNode.parentNode.parentNode.getAttribute(\"data-name\"));\n\t\t\t}\n\t\t}\n\t\tif(hotelBrowseList[i].querySelectorAll(\"[data-drawer\x3d\\\"offers-drawer\\\"]\").length \x3e 0){\n\t\t\thotelBrowseList[i].querySelectorAll(\"[data-drawer\x3d\\\"offers-drawer\\\"]\")[0].onclick \x3d function(){\n\t\t\t\ttrackEvent('Hotel Browse', 'Drawer - Offers', this.parentNode.parentNode.parentNode.getAttribute(\"data-name\"));\n\t\t\t}\n\t\t}\n\t}\n} catch (ignore) {}\n\n/*\n\tif (typeof(errorTrackingEventsSet) \x3d\x3d\x3d \"undefined\") {\n\t\twindow.addEventListener(\"message\", function(message) {\n\t\t\ttry {\n\t\t\t\terrorEventCategory \x3d safeGetFromObject(message.data, 'name');\n\t\t\t\tif (!!~errorEventCategory.indexOf('Error page loaded:')) {\n\t\t\t\t\ttrackEvent('Error', 'Error Page Loaded', errorEventCategory + ' | ' + document.location.pathname);\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\t\t\terrorTrackingEventsSet \x3d true;\n\t\t});\n\t}\n*/\n\nif(!!~document.location.pathname.indexOf('yourbooking') \x26\x26 document.querySelectorAll('a.banner-button.app-store').length \x3e 0){\n\tdocument.querySelectorAll('a.banner-button.app-store')[0].onclick \x3d function(event) {\n\t\ttry {\n\t\t\ttrackEvent('Manage My Booking', 'Download App', 'App Store');\n\t\t} catch (ignore) {}\n\t};\n}\nif(!!~document.location.pathname.indexOf('yourbooking') \x26\x26 document.querySelectorAll('a.banner-button.google-play').length \x3e 0){\n\tdocument.querySelectorAll('a.banner-button.google-play')[0].onclick \x3d function(event) {\n\t\ttry {\n\t\t\ttrackEvent('Manage My Booking', 'Download App', 'Google Play');\n\t\t} catch (ignore) {}\n\t};\n}\n\n\n//MMB Appstore Test\n\ttry {\n\t\tif (localStorage.getItem(\"mmbAppStoreVariant\")) {\n\t\t\tvar mmbAppStoreVariant \x3d localStorage.getItem(\"mmbAppStoreVariant\");\n\t\t\tif (!sessionStorage.getItem(\"mmbAppStoreVariantTracked\")) {\n\t\t\t\tif (mmbAppStoreVariant \x3d\x3d 0) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"MMB Appstore Position\", \"MMB Appstore Position Original\");\n\t\t\t\t\tsessionStorage.setItem(\"mmbAppStoreVariantTracked\", \"1\");\n\t\t\t\t} else if (mmbAppStoreVariant \x3d\x3d 1) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"MMB Appstore Position\", \"MMB Appstore Position Top\");\n\t\t\t\t\tsessionStorage.setItem(\"mmbAppStoreVariantTracked\", \"1\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\n//Hide staff secrets\n\ttry {\n\t\tif (localStorage.getItem(\"hideStaffSecrets\")) {\n\t\t\tvar hideStaffSecretsVariant \x3d localStorage.getItem(\"hideStaffSecrets\");\n\t\t\tif (!sessionStorage.getItem(\"hideStaffSecretsTracked\")) {\n\t\t\t\tif (hideStaffSecretsVariant \x3d\x3d 0) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"Staff Secrets Tab\", \"Staff Secrets Tab Shown\");\n\t\t\t\t\tsessionStorage.setItem(\"hideStaffSecretsTracked\", \"1\");\n\t\t\t\t} else if (hideStaffSecretsVariant \x3d\x3d 1) {\n\t\t\t\t\ttrackEvent(\"CRO\", \"Staff Secrets Tab\", \"Staff Secrets Tab Hidden\");\n\t\t\t\t\tsessionStorage.setItem(\"hideStaffSecretsTracked\", \"1\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ignore) {}\n\n\ttry {\n\t\tvar clickableTabs \x3d document.querySelectorAll(\".tabs-header label, .fixed-tabs-list-item\x3ea\");\n\t\tfor(var i \x3d 0; i \x3c clickableTabs.length; i++){\n\t\t\tclickableTabs[i].onclick \x3d function(){\n\t\t\t\ttrackEvent('In-Page Tabs', 'Clicked Tab', this.innerText);\n\t\t\t}\n\t\t}\n\t} catch(ignore) {}\n\n\n\ttry {\n\t\tvar carouselSliderCards \x3d document.querySelectorAll(\".carousel-slider .profile-card\");\n\t\tfor(var i \x3d 0; i \x3c carouselSliderCards.length; i++){\n\t\t\ttrackContent \x3d \"ga('ec:addPromo',{'id': 'Homepage promotions', 'name':'\" + carouselSliderCards[i].querySelectorAll(\".title-block h4\")[0].innerText + \"', 'position':'Somebodys Got To Do It \" + (i+1) + \"', 'creative':'Original'});ga('ec:setAction', 'promo_click');ga('send', 'event', 'Homepage promotions', 'Click', 'Homepage Somebodys Got To Do It \" + (i+1) + \"',{'nonInteraction':true});\"   \n\t\t\tcarouselSliderCards[i].setAttribute(\"onclick\", trackContent);\n\t\t\tcarouselSliderCards[i].setAttribute(\"trackImpression\", \"true\");\n\t\t}\n\t} catch(ignore) {}\n\n\ttry {\n\t\tvar staffSecrets \x3d document.querySelectorAll(\".secretCard\");\n\t\tfor(var i \x3d 0; i \x3c staffSecrets.length; i++){\n\t\t\ttrackContent \x3d \"ga('ec:addPromo',{'id': 'Staff Secrets', 'name':'\" + staffSecrets[i].querySelectorAll(\".staff .name\")[0].innerText + \" \" + (i+1) + \"', 'position':'Staff Secrets \" + (i+1) + \"', 'creative':'Original'});ga('ec:setAction', 'promo_click');ga('send', 'event', 'Staff Secrets', 'Click', 'Staff Secrets \" + (i+1) + \"',{'nonInteraction':true});\"   \n\t\t\tstaffSecrets[i].setAttribute(\"onclick\", trackContent);\n\t\t\tstaffSecrets[i].setAttribute(\"trackImpression\", \"true\");\n\t\t}\n\t} catch(ignore) {}\t\n\n\n\t//Generic Track Cookie Value\n\tfunction trackCookieValue(cookieName, eventCategory, eventName){\n\t\ttry {\n\t\t\tif (document.cookie.split(cookieName+\"\x3d\").length \x3e 1) {\n\t\t\t\tvar cookieValue \x3d document.cookie.split(cookieName+\"\x3d\")[1].split(\";\")[0];\n\t\t\t\tif (!sessionStorage.getItem(eventCategory + \"_\" + eventName + \"_Tracked\")) {\n\t\t\t\t\ttrackEvent(eventCategory, eventName, eventName + \" - \" + cookieValue);\n\t\t\t\t\tsessionStorage.setItem(eventCategory + \"_\" + eventName + \"_Tracked\",\"1\");\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (ignore){}\n\t}\n\n\n\t//Timeout Message Test\n\ttrackCookieValue(\"timeout-messaging-variant\", \"CRO\", \"Timeout Message\");\n\t//Timeout Message Test\n\ttrackCookieValue(\"SR_SP\", \"CRO\", \"Search Panel Refactor\");\n\n\n\n\x3c/script\x3e";
a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll","livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.ExcludeTrackingEventsDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["livemagnoliavirginholidays.tags.googleanalytics.Tag","livemagnoliavirginholidays.tags.crotests.Tag","livemagnoliavirginholidays.tags.crotestsongoing.Tag"]);a.pre=function(){};a.script=function(){};
a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"Commission Junction"});var v="livemagnoliavirginholidays.tags.commissionjunction.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\t\n\ttry {\n\t\tvar pageURL \x3d new URL(document.location.href);\n\t\tvar cjEvent \x3d "";\n\t\tif(pageURL.searchParams.get("CJEVENT") !\x3d\x3d null){\n\t\t\tcjEvent \x3d "\x26CJEVENT\x3d" + pageURL.searchParams.get("CJEVENT");\n\t\t\tsessionStorage.setItem("cjEvent", cjEvent);\n\t\t}\n\t} catch (ignore) {}\n\t\n\t\n\tvar SHA256\x3dfunction(a){function c(a,b){var c\x3d(65535\x26a)+(65535\x26b),d\x3d(a\x3e\x3e16)+(b\x3e\x3e16)+(c\x3e\x3e16);return d\x3c\x3c16|65535\x26c}function d(a,b){return a\x3e\x3e\x3eb|a\x3c\x3c32-b}function e(a,b){return a\x3e\x3e\x3eb}function f(a,b,c){return a\x26b^~a\x26c}function g(a,b,c){return a\x26b^a\x26c^b\x26c}function h(a){return d(a,2)^d(a,13)^d(a,22)}function i(a){return d(a,6)^d(a,11)^d(a,25)}function j(a){return d(a,7)^d(a,18)^e(a,3)}function k(a){return d(a,17)^d(a,19)^e(a,10)}function l(a,b){var m,n,o,p,q,r,s,t,u,v,w,x,d\x3dnew Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),e\x3dnew Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),l\x3dnew Array(64);a[b\x3e\x3e5]|\x3d128\x3c\x3c24-b%32,a[(b+64\x3e\x3e9\x3c\x3c4)+15]\x3db;for(var u\x3d0;u\x3ca.length;u+\x3d16){m\x3de[0],n\x3de[1],o\x3de[2],p\x3de[3],q\x3de[4],r\x3de[5],s\x3de[6],t\x3de[7];for(var v\x3d0;64\x3ev;v++)16\x3ev?l[v]\x3da[v+u]:l[v]\x3dc(c(c(k(l[v-2]),l[v-7]),j(l[v-15])),l[v-16]),w\x3dc(c(c(c(t,i(q)),f(q,r,s)),d[v]),l[v]),x\x3dc(h(m),g(m,n,o)),t\x3ds,s\x3dr,r\x3dq,q\x3dc(p,w),p\x3do,o\x3dn,n\x3dm,m\x3dc(w,x);e[0]\x3dc(m,e[0]),e[1]\x3dc(n,e[1]),e[2]\x3dc(o,e[2]),e[3]\x3dc(p,e[3]),e[4]\x3dc(q,e[4]),e[5]\x3dc(r,e[5]),e[6]\x3dc(s,e[6]),e[7]\x3dc(t,e[7])}return e}function m(a){for(var c\x3dArray(),d\x3d(1\x3c\x3cb)-1,e\x3d0;e\x3ca.length*b;e+\x3db)c[e\x3e\x3e5]|\x3d(a.charCodeAt(e/b)\x26d)\x3c\x3c24-e%32;return c}function n(a){for(var b\x3d0,c\x3db?"0123456789ABCDEF":"0123456789abcdef",d\x3d"",e\x3d0;e\x3c4*a.length;e++)d+\x3dc.charAt(a[e\x3e\x3e2]\x3e\x3e8*(3-e%4)+4\x2615)+c.charAt(a[e\x3e\x3e2]\x3e\x3e8*(3-e%4)\x2615);return d}var b\x3d8;return n(l(m(a),a.length*b))};\n\t\n\tif (typeof cjTrackingEventsSet \x3d\x3d\x3d "undefined") {\n\t\twindow.addEventListener("message", function(message) {\n\t\t\ttry {\n\t\t\t\tif (location.pathname \x3d\x3d\x3d "/checkout/confirmation" || location.pathname \x3d\x3d\x3d "/checkout/confirmation/") {\n\t\t\t\t\tif (message.data.eventName \x3d\x3d\x3d "BOOKING_CONFIRMATION") {\n\t\t\t\t\t\tvar cjUV \x3d universal_variable || {};\n\t\t\t\t\t\tvar cjPage \x3d safeGetFromObject(universal_variable, \'page\');\n\t\t\t\t\t\tvar cjPageName \x3d safeGetFromObject(universal_variable, \'page.name\');\n\t\t\t\t\t\tvar cjPageCategory \x3d safeGetFromObject(universal_variable, \'page.category\');\n\t\t\t\t\t\tvar cjSearch \x3d safeGetFromObject(universal_variable, \'search_results\') || safeGetFromObject(universal_variable, \'booking\') || {};\n\t\t\t\t\t\tvar cjLocation \x3d safeGetFromObject(cjSearch, \'locationName\') || safeGetFromObject(cjSearch, \'dropOffDepot\');\n\t\t\t\t\t\tcjLocation \x3d cjLocation.replace(/-/g, " ");\n\t\t\t\t\t\tcjLocation \x3d cjLocation.toLowerCase();\n\t\t\t\t\t\tvar cjBookingType \x3d safeGetFromObject(cjSearch, \'type\') || safeGetFromObject(cjSearch, \'bookingType\');\n\t\t\t\t\t\tvar cjPayment \x3d safeGetFromObject(universal_variable, \'payment\') || safeGetFromObject(universal_variable, \'transaction\');\n\t\t\t\t\t\tvar cjPassengers \x3d safeGetFromObject(cjSearch, \'totalPassengers\') || Math.round(safeGetFromObject(cjPayment, \'totalPrice\') / safeGetFromObject(cjPayment, \'pricePerPerson\')) || null;\n\t\t\t\t\t\tvar cjHolidays \x3d safeGetFromObject(cjSearch, \'hotels\');\n\t\t\t\t\t\tcjHolidays \x3d cjHolidays \x26\x26 cjHolidays.length ? cjHolidays : [];\n\t\t\t\t\t\tvar cjFirstHoliday \x3d {};\n\n\t\t\t\t\t\tif (cjBookingType \x3d\x3d\x3d "Car Hire" || cjBookingType \x3d\x3d\x3d "car") {\n\t\t\t\t\t\t\tvar cjHolidays \x3d safeGetFromObject(cjSearch, \'cars\');\n\t\t\t\t\t\t\tcjFirstHoliday \x3d safeGetFromObject(cjSearch, \'car\') || cjHolidays[0] || {};\n\t\t\t\t\t\t} else if (cjBookingType \x3d\x3d\x3d "Flydrive" || cjBookingType \x3d\x3d\x3d "flydrive") {\n\t\t\t\t\t\t\tcjFirstHoliday.id \x3d cjLocation + " - flydrive";\n\t\t\t\t\t\t\tcjFirstHoliday.name \x3d cjLocation + " - flydrive";\n\t\t\t\t\t\t\tcjFirstHoliday.boardBasis \x3d "Flydrive";\n\t\t\t\t\t\t} else if (cjBookingType \x3d\x3d\x3d "Complete Holiday" || cjBookingType \x3d\x3d\x3d "holiday" || cjBookingType \x3d\x3d\x3d "Hotel Only" || cjBookingType \x3d\x3d\x3d "hotel") {\n\t\t\t\t\t\t\tcjFirstHoliday \x3d safeGetFromObject(cjSearch, \'hotel\') || cjHolidays[0] || {};\n\t\t\t\t\t\t} else if (cjBookingType \x3d\x3d\x3d "Multi Destination Holiday" || cjBookingType \x3d\x3d\x3d "multidestination" || cjBookingType \x3d\x3d\x3d "Touring" || cjBookingType \x3d\x3d\x3d "tour") {\n\t\t\t\t\t\t\tcjFirstHoliday \x3d safeGetFromObject(cjSearch, \'hotel\') || cjHolidays[0] || {};\n\t\t\t\t\t\t\tcjFirstHoliday.id \x3d safeGetFromObject(cjSearch, \'name\') || safeGetFromObject(cjFirstHoliday, \'id\');\n\t\t\t\t\t\t\tcjFirstHoliday.name \x3d cjSearch.name || cjFirstHoliday.name || "";\n\t\t\t\t\t\t\tcjFirstHoliday.name \x3d cjFirstHoliday.name.replace(/-/g, " ");\n\t\t\t\t\t\t} else if (cjBookingType \x3d\x3d\x3d "Cruise" || cjBookingType \x3d\x3d\x3d "cruise") {\n\t\t\t\t\t\t\tcjHolidays \x3d safeGetFromObject(cjSearch, \'cruises\');\n\t\t\t\t\t\t\tcjFirstHoliday \x3d safeGetFromObject(cjSearch, \'cruise\') || cjHolidays[0] || {};\n\t\t\t\t\t\t\tcjFirstHoliday.id \x3d safeGetFromObject(cjSearch, \'name\') || safeGetFromObject(cjFirstHoliday, \'name\');\n\t\t\t\t\t\t\tcjFirstHoliday.name \x3d cjSearch.name || cjFirstHoliday.name || "";\n\t\t\t\t\t\t\tcjFirstHoliday.name \x3d cjFirstHoliday.name.replace(/-/g, " ");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcjSearch.departureDateShort \x3d cjSearch.departureDate;\n\t\t\t\t\t\tcjSearch.departureDateShort \x3d cjSearch.departureDateShort \x26\x26 cjSearch.departureDateShort.length ? cjSearch.departureDateShort : "dd-mm-yyyy";\n\t\t\t\t\t\tcjSearch.departureDateShort \x3d cjSearch.departureDateShort.substring(6, 10) + " - " + cjSearch.departureDateShort.substring(3, 5) || "yyyy - mm";\n\t\t\t\t\t\tvar cjTransaction \x3d cjUV.transaction || {};\n\t\t\t\t\t\tvar cjBookingReference \x3d cjTransaction.reference || cjSearch.reference;\n\t\t\t\t\t\tvar cjUser \x3d cjUV.user || {};\n\t\t\t\t\t\tvar cjFirstHolidayLocation \x3d cjFirstHoliday.locationParentName || "";\n\t\t\t\t\t\tvar cjFlight \x3d cjSearch.outboundFlights;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcjSearch.departurePoint \x3d cjFlight[0].departing.iata;\n\t\t\t\t\t\t} catch (ignore) {}\n\n\t\t\t\t\t\tvar cjTotalPrice \x3d cjFirstHoliday.totalPrice || cjPayment.totalPrice;\n\t\t\t\t\t\tvar cjPassengers \x3d cjSearch.totalPassengers || Math.round(cjPayment.totalPrice / cjPayment.pricePerPerson) || null;\n\t\t\t\t\t\tholidayReference \x3d message.data.summary.tracking.bookingReference;\n\t\t\t\t\t\tholidayReference256 \x3d SHA256(holidayReference.toString());\n\t\t\t\t\t\tcjCoupon \x3d "\x26COUPON\x3d";\n\n\t\t\t\t\t\tif (cjPayment.promotionalCodeValue !\x3d\x3d null) {\n\t\t\t\t\t\t\tcjCoupon \x3d "\x26COUPON\x3d" + cjPayment.promotionalCodeValue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar cjEvent \x3d "";\n\n\t\t\t\t\t\tif (sessionStorage.getItem("cjEvent")) {\n\t\t\t\t\t\t\tcjEvent \x3d sessionStorage.getItem("cjEvent");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar cjVars \x3d message.data.summary;\n\t\t\t\t\t\tvar cjBookingType \x3d cjVars.bookingType;\n\t\t\t\t\t\tvar cjRef \x3d SHA256("" + cjVars.tracking.bookingReference);\n\t\t\t\t\t\tvar cjNetPrice \x3d cjVars.totalPrice;\n\t\t\t\t\t\tvar cjGrossPrice \x3d cjVars.totalPriceWithoutDiscount;\n\t\t\t\t\t\tvar cjOutboundPairs \x3d cjVars.outboundFlights[0].departing.iata + "|" + cjVars.outboundFlights[0].arriving.iata;\n\t\t\t\t\t\tvar cjOutboundDep \x3d cjVars.outboundFlights[0].departing.iata;\n\t\t\t\t\t\tvar cjOutboundCabin \x3d cjVars.outboundFlights[0].cabinClass;\n\t\t\t\t\t\tvar cjOutboundFlightNumber \x3d cjVars.outboundFlights[0].flightNumber;\n\t\t\t\t\t\tvar cjOutboundDate \x3d cjVars.outboundFlights[0].departingAt;\n\t\t\t\t\t\tvar cjInboundPairs \x3d cjVars.inboundFlights[0].departing.iata + "|" + cjVars.inboundFlights[0].arriving.iata;\n\t\t\t\t\t\tvar cjInboundCabin \x3d cjVars.inboundFlights[0].cabinClass;\n\t\t\t\t\t\tvar cjInboundFlightNumber \x3d cjVars.inboundFlights[0].flightNumber;\n\t\t\t\t\t\tvar cjInboundDate \x3d cjVars.inboundFlights[0].departingAt;\n\t\t\t\t\t\tvar cjTotalPax \x3d cjVars.partyComposition.total;\n\t\t\t\t\t\tvar cjFlyingClubNumber \x3d ""; //cjVars.membershipNumber;\n\n\t\t\t\t\t\tvar cjConf \x3d document.createElement("IMG");\n\t\t\t\t\t\tcjConf.id \x3d "cjConf";\n\t\t\t\t\t\tcjConf.style.display \x3d "none";\n\t\t\t\t\t\tcjConf.src \x3d "https://www.emjcd.com/u?ITEM1\x3d" + (cjFirstHoliday.code || cjFirstHoliday.id) + "\x26AMT1\x3d" + cjNetPrice + "\x26QTY1\x3d1\x26CID\x3d1548795\x26OID\x3d" + cjRef + "\x26TYPE\x3d404605\x26CURRENCY\x3dGBP\x26TRAVEL_TYPE\x3d" + cjBookingType + "\x26TRAVEL_ORIGIN\x3d" + cjOutboundDep + "\x26TRAVEL_DESTINATION\x3d" + cjLocation + "\x26START_DATE\x3d" + cjOutboundDate + "\x26HOTEL_NAME\x3d" + cjFirstHoliday.name + "\x26GUESTS\x3d" + cjTotalPax + cjCoupon + "\x26METHOD\x3dIMG" + cjEvent;\n\n\t\t\t\t\t\tif (document.querySelectorAll("#cjConf").length \x3d\x3d\x3d 0 \x26\x26 cjEvent) {\n\t\t\t\t\t\t\tdocument.querySelectorAll("body")[0].appendChild(cjConf);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (ignore) {}\n\n\t\t\tcjTrackingEventsSet \x3d true;\n\t\t});\n\t}\n\x3c/script\x3e';a.addClientFiltersList(["livemagnoliavirginholidays.filters.DefaultFilterMatchAll1",
"livemagnoliavirginholidays.filters.ExcludingQubitDisable","livemagnoliavirginholidays.filters.CommissionJunctionDisabled"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["livemagnoliavirginholidays.tags.onsitesearchhide.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var x=qubit.opentag.CustomTag;var a=new x({"name":"ResponseTap","disabled":false});var v="livemagnoliavirginholidays.tags.responsetap.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\n    if(document.querySelectorAll("[href\x3d\'tel:03445571725\']").length \x3e 0){\n        for(var i \x3d 0; i \x3c document.querySelectorAll("[href\x3d\'tel:03445571725\']").length; i++){\n            document.querySelectorAll("[href\x3d\'tel:03445571725\']")[i].classList.add("rTapNumber232187");\n        }\n    }\n    \n    if (document.querySelectorAll(".rTapNumberFix").length \x3d\x3d\x3d 0) {\n        rTapVoyages \x3d document.createElement("div");\n        rTapVoyages.style.display \x3d "none";\n        rTapVoyages.className \x3d "rTapNumber232188 rTapNumberFix";\n        document.body.appendChild(rTapVoyages);\n        rTapTour \x3d document.createElement("div");\n        rTapTour.style.display \x3d "none";\n        rTapTour.className \x3d "rTapNumber232189 rTapNumberFix";\n        document.body.appendChild(rTapTour);\n        rTapCore \x3d document.createElement("div");\n        rTapCore.style.display \x3d "none";\n        rTapCore.className \x3d "rTapNumber232187 rTapNumberFix";\n        document.body.appendChild(rTapCore);\n        rTapCoreService \x3d document.createElement("div");\n        rTapCoreService.style.display \x3d "none";\n        rTapCoreService.className \x3d "rTapNumber266016 rTapNumberFix";\n        document.body.appendChild(rTapCoreService);\n    }\n\n\n    if (document.location.pathname.indexOf("/virgin-holidays-experiences") !\x3d\x3d -1) {\n    } else if (!!~document.location.pathname.indexOf("virgin-voyages")) {\n        var phoneNumbers \x3d document.querySelectorAll(".rTapNumber232187");\n        for (var z \x3d 0; z \x3c phoneNumbers.length; z++) {\n            phoneNumbers[z].className \x3d phoneNumbers[z].className.replace("rTapNumber232187", "rTapNumber232188");\n        }\n    } else if (document.location.pathname.indexOf("tour") !\x3d\x3d -1) {\n        var phoneNumbers \x3d document.querySelectorAll(".rTapNumber232187");\n        for (var z \x3d 0; z \x3c phoneNumbers.length; z++) {\n            phoneNumbers[z].className \x3d phoneNumbers[z].className.replace("rTapNumber232187", "rTapNumber232189");\n        }\n    } else if (document.location.pathname.indexOf("multi-destination") !\x3d\x3d -1) {\n\t\tinlinePhone \x3d document.querySelectorAll(".activity-card h4 span:not(.rTapNumber232187)");\n        if (inlinePhone.length \x3e 0) {\n            for (var i \x3d 0; i \x3c inlinePhone.length; i++) {\n                inlinePhone[i].className \x3d "rTapNumber232187";\n            }\n        }\n        multiDestinationItemPhone \x3d document.querySelectorAll("li.phone-item\x3ea");\n        if (multiDestinationItemPhone.length \x3e 0) {\n            for (var i \x3d 0; i \x3c multiDestinationItemPhone.length; i++) {\n                multiDestinationItemPhone[i].className \x3d multiDestinationItemPhone[i].className + " rTapNumber232187";\n            }\n        }\n        newMultiDestinationItemPhone \x3d document.querySelectorAll(".multi-destination-phone\x3ea");\n        if (newMultiDestinationItemPhone.length \x3e 0) {\n            for (var i \x3d 0; i \x3c newMultiDestinationItemPhone.length; i++) {\n                newMultiDestinationItemPhone[i].className \x3d newMultiDestinationItemPhone[i].className + " rTapNumber232187";\n            }\n        }\n        headerPhone \x3d document.querySelectorAll(".contact\x3ea");\n        if (headerPhone.length \x3e 0) {\n            headerPhone[0].className \x3d "rTapNumber232187";\n        }\n        mobileHeaderPhone \x3d document.querySelectorAll("span.mmm-telephone");\n        if (mobileHeaderPhone.length \x3e 0) {\n            mobileHeaderPhone[0].className \x3d "mmm-telephone rTapNumber232187";\n        }\n        footerPhone \x3d document.querySelectorAll(".contact-group\x3eh4");\n        if (footerPhone.length \x3e 1) {\n            if (footerPhone[1].innerHTML.indexOf("Call") !\x3d\x3d -1) {\n                footerPhone[1].innerHTML \x3d "Call \x3cspan style\x3d\'display:inline;\' class\x3d\'rTapNumber232187\'\x3e0203 668 8011\x3c/span\x3e"\n            }\n        }\n    } else if (!!~document.location.pathname.indexOf("weddings") || !!~document.location.pathname.indexOf("honeymoon")) {\n\t\tfor (var i \x3d 0; i \x3c document.querySelectorAll("a[href\x3d\'tel:0203 668 8011\']").length; i++) {\n            var phoneNumbers \x3d document.querySelectorAll("a[href\x3d\'tel:0203 668 8011\']");\n            phoneNumbers[i].innerHTML \x3d phoneNumbers[i].innerHTML.replace("0203 668 8011", "0344 557 1035");\n            phoneNumbers[i].href \x3d "tel:0344 557 1035";\n        }\n    } else {\n\t\theaderPhone \x3d document.querySelectorAll(".contact\x3ea");\n        if (headerPhone.length \x3e 0) {\n            headerPhone[0].className \x3d "rTapNumber232187";\n        }\n        mobileHeaderPhone \x3d document.querySelectorAll("span.mmm-telephone");\n        if (mobileHeaderPhone.length \x3e 0) {\n            mobileHeaderPhone[0].className \x3d "mmm-telephone rTapNumber232187";\n        }\n        footerPhone \x3d document.querySelectorAll(".contact-group\x3eh4");\n        if (footerPhone.length \x3e 1) {\n            if (footerPhone[1].innerHTML.indexOf("Call") !\x3d\x3d -1) {\n                footerPhone[1].innerHTML \x3d "Call \x3cspan style\x3d\'display:inline;\' class\x3d\'rTapNumber232187\'\x3e0203 668 8011\x3c/span\x3e"\n            }\n        }\n    }\n\x3c/script\x3e\n\n\n\x3cscript type\x3d"text/javascript"\x3e\n    function rTapDCM() {\n\n        var imgURL \x3d null;\n        var adivi \x3d null;\n        var adis \x3d null;\n        var cvs \x3d 2; // custom variable slot in ResponseTap to store Google User Id\n        try {\n            if (document.referrer.indexOf("virginholidays.co.uk") \x3d\x3d -1) {\n                adivi \x3d document.cookie.match(/adiVi\x3d[0-9]+/)[0].replace(\'adiVi\x3d\', \'\');\n                adis \x3d document.cookie.match(/adiS\x3d[\\.A-Za-z0-9]+/)[0].replace(\'adiS\x3d\', \'\');\n                // This sends the Google user id to ResponseTap\n                imgUrl \x3d \'https://cm.g.doubleclick.net/pixel?google_nid\x3dresponsetap_dmp\x26cvs\x3d\' + cvs + \'\x26adivi\x3d\' + adivi + \'\x26adis\x3d\' + adis + \'\x26google_cm\';\n                (new Image()).src \x3d imgUrl;\n            }\n        } catch (ignore) {}\n\n    }\n\n    function rTapVWO() {\n        //please ensure the custom variable slot locations are correct\n        try {\n            var vwo_experiments_combination \x3d {};\n            var experiment;\n            var combination;\n            var re1 \x3d /[; ]_vis_opt_exp_[0-9]+_combi\x3d[0-9]+/g;\n            var sMatch1 \x3d (\' \' + document.cookie).match(re1);\n            var experimentCookie;\n            var re2 \x3d /_vis_opt_exp_([0-9]+)_combi\x3d([0-9]+)/;\n            var sMatch2;\n\n            if (sMatch1 !\x3d\x3d null) {\n                for (i \x3d 0; i \x3c sMatch1.length; i++) {\n                    experimentCookie \x3d sMatch1[i];\n                    sMatch2 \x3d experimentCookie.match(re2);\n                    experiment \x3d sMatch2[1];\n                    combination \x3d sMatch2[2];\n                    vwo_experiments_combination[experiment] \x3d combination;\n                }\n            }\n\n            if (Object.keys(vwo_experiments_combination).length \x3e 0) {\n                adiFunc.pushVariable(0, JSON.stringify(vwo_experiments_combination));\n            }\n\n            var re3 \x3d /[; ]_vwo_uuid\x3d([0-9A-Z]+)/;\n            var sMatch3 \x3d (\' \' + document.cookie).match(re3);\n            if (sMatch3 !\x3d\x3d null) {\n                if (typeof(sMatch3[1]) !\x3d\x3d \'undefined\') {\n                    adiFunc.pushVariable(1, sMatch3[1]);\n                }\n            }\n\n            adiFunc.flushVariables();\n        } catch (ignore) {}\n\n    }\n\t\n\tfunction rTapFooterFix(){\n\t\tif(document.querySelectorAll(".footer-link.qa-call-to-book").length \x3e 0 \x26\x26 document.querySelectorAll("li.contact a").length \x3e 0){\n\t\t\tdocument.querySelectorAll(".footer-link.qa-call-to-book")[0].href \x3d document.querySelectorAll("li.contact a")[0].href;\n\t\t}\n\t}\n\tfunction rTapMerchFix(){\n\t\tif(document.querySelectorAll("[addrtap] button").length \x3e 0 \x26\x26 document.querySelectorAll("li.contact a").length \x3e 0 \x26\x26 typeof(rTapMerchFixed) \x3d\x3d\x3d "undefined"){\n\t\t\tfor(var i \x3d 0; i \x3c document.querySelectorAll("[addrtap] button").length; i++){\n\t\t\t\tdocument.querySelectorAll("[addrtap] button")[i].innerHTML \x3d document.querySelectorAll("[addrtap] button")[i].innerHTML + " on " + document.querySelectorAll("li.contact a")[0].innerHTML;\n\t\t\t}\n\t\t\tfor(var i \x3d 0; i \x3c document.querySelectorAll("[addrtap]").length; i++){\n\t\t\t\tdocument.querySelectorAll("[addrtap]")[i].href \x3d document.querySelectorAll("li.contact a")[0].href\n\t\t\t}\n\t\t\tvar rTapMerchFixed \x3d true;\n\t\t}\n\t}\n\n    function rTapPostReplacement() {\n\n        rTapVWO();\n        rTapDCM();\n\t\trTapFooterFix();\n\t\trTapMerchFix();\n    }\n\n\n\n\n    var adiInit \x3d "34081",\n        adiRVO \x3d false;\n    var adiFunc \x3d null;\n    (function() {\n        var adiSrc \x3d document.createElement("script");\n        adiSrc.type \x3d "text/javascript";\n        adiSrc.async \x3d true;\n        adiSrc.src \x3d ("https:" \x3d\x3d document.location.protocol ? "https://static-ssl" : "http://static-cdn") +\n            ".responsetap.com/static/scripts/rTapTrack.min.js";\n        var s \x3d document.getElementsByTagName("script")[0];\n        s.parentNode.insertBefore(adiSrc, s);\n    })();\n\x3c/script\x3e\n\n\x3cscript\x3e\n    try {\n        setTimeout(function() {\n            if (!!~document.location.pathname.indexOf("virgin-holidays-experiences") \x26\x26 !!~document.location.pathname.indexOf("weddings")) {\n                if (document.querySelectorAll("span.contact\x3ei.icon-phone").length \x3d\x3d\x3d 0 \x26\x26 document.querySelectorAll("span.contact").length \x3e 0) {\n                    var telElement \x3d document.createElement(\'i\');\n                    telElement.className \x3d "icon-phone";\n                    document.querySelectorAll("span.contact")[0].insertBefore(telElement, document.querySelectorAll("span.contact")[0].firstChild);\n                }\n                if (document.querySelectorAll(\'.ways-to-contact-container .footer-link\').length \x3e 1 \x26\x26 document.querySelectorAll(".contact\x3ea").length \x3e 0) {\n                    document.querySelectorAll(\'.ways-to-contact-container .footer-link\')[1].href \x3d document.querySelectorAll(".contact\x3ea")[0].href;\n                }\n            }\n        }, 4000);\n    } catch (ignore) {}\n    try {\n        setTimeout(function() {\n            if (!!~document.location.pathname.indexOf("virgin-holidays-experiences") \x26\x26 !!~document.location.pathname.indexOf("weddings")) {\n                if (document.querySelectorAll("span.contact\x3ei.icon-phone").length \x3d\x3d\x3d 0 \x26\x26 document.querySelectorAll("span.contact").length \x3e 0) {\n                    var telElement \x3d document.createElement(\'i\');\n                    telElement.className \x3d "icon-phone";\n                    document.querySelectorAll("span.contact")[0].insertBefore(telElement, document.querySelectorAll("span.contact")[0].firstChild);\n                }\n                if (document.querySelectorAll(\'.ways-to-contact-container .footer-link\').length \x3e 1 \x26\x26 document.querySelectorAll(".contact\x3ea").length \x3e 0) {\n                    document.querySelectorAll(\'.ways-to-contact-container .footer-link\')[1].href \x3d document.querySelectorAll(".contact\x3ea")[0].href;\n                }\n            }\n        }, 8000);\n    } catch (ignore) {}\n\n\tvar rTapStyle \x3d document.createElement("STYLE");\n\trTapStyle.id \x3d "rTapStyle";\n\trTapStyle.innerHTML \x3d "span.mmm-telephone\x3ea { display: inline; }";\n\tif(document.querySelectorAll("#rTapStyle").length \x3d\x3d\x3d 0){\n\t\tdocument.querySelectorAll("body")[0].appendChild(rTapStyle);\n\t}\n\t\n\x3c/script\x3e\n\n\n\x3cscript\x3e\n    for (var i \x3d 0; i \x3c document.querySelectorAll("[href\x3d\'tel:0203 668 8616\']").length; i++) {\n        document.querySelectorAll("[href\x3d\'tel:0203 668 8616\']")[i].className \x3d document.querySelectorAll("[href\x3d\'tel:0203 668 8616\']")[i].className + " rTapNumber232189";\n    }\n\n    if (document.location.pathname.indexOf("tour") !\x3d\x3d -1) {\n        if (typeof(vhols) !\x3d\x3d "undefined") {\n            if (typeof(vhols.eventDebounce) !\x3d\x3d "undefined") {\n                vhols.eventDebounce(function() {\n                    if (document.querySelectorAll("span.contact\x3ea.rTapNumber232189").length \x3e 0) {\n                        headerPhone \x3d document.querySelectorAll("span.contact\x3ea.rTapNumber232189")[0].innerHTML.trim();\n                        if (headerPhone !\x3d\x3d "0344 557 4321" \x26\x26 headerPhone !\x3d\x3d \'\x3ci class\x3d"icon-phone"\x3e\x3c/i\x3e 0344 557 4321\' \x26\x26 headerPhone !\x3d\x3d "0344 417 3706" \x26\x26 headerPhone !\x3d\x3d "0344 557 9275" \x26\x26 headerPhone !\x3d\x3d "0203 668 8616") {\n                            inlinePhone \x3d document.querySelectorAll(".activity-card .booking-action-phone h4\x3espan:not(.rTapNumber232189Post)");\n                            if (inlinePhone.length \x3e 0) {\n                                for (var i \x3d 0; i \x3c inlinePhone.length; i++) {\n                                    inlinePhone[i].innerHTML \x3d headerPhone;\n                                    inlinePhone[i].className \x3d "rTapNumber232189Post";\n                                }\n                            }\n                        }\n                    }\n                }, \'scroll\', window, 2000);\n            }\n        }\n    } else if (document.location.pathname.indexOf("multi-destination") !\x3d\x3d -1) {\n        if (typeof(vhols) !\x3d\x3d "undefined") {\n            if (typeof(vhols.eventDebounce) !\x3d\x3d "undefined") {\n                vhols.eventDebounce(function() {\n                    if (document.querySelectorAll("span.contact\x3ea.rTapNumber232187").length \x3e 0) {\n                        headerPhone \x3d document.querySelectorAll("span.contact\x3ea.rTapNumber232187")[0].innerHTML.trim();\n                        if (headerPhone !\x3d\x3d "0344 557 4321" \x26\x26 headerPhone !\x3d\x3d \'\x3ci class\x3d"icon-phone"\x3e\x3c/i\x3e 0344 557 4321\' \x26\x26 headerPhone !\x3d\x3d "0344 417 3706" \x26\x26 headerPhone !\x3d\x3d "0344 557 9275") {\n                            inlinePhone \x3d document.querySelectorAll(".activity-card\x3ediv\x3ediv.content\x3eh4\x3espan:not(.rTapNumber232187Post)")\n                            if (inlinePhone.length \x3e 0) {\n                                for (var i \x3d 0; i \x3c inlinePhone.length; i++) {\n                                    inlinePhone[i].innerHTML \x3d headerPhone;\n                                    inlinePhone[i].className \x3d "rTapNumber232187Post";\n                                }\n                            }\n                        }\n                    }\n                }, \'scroll\', window, 2000);\n            }\n        }\n    }\n\x3c/script\x3e';
a.addClientFiltersList(["livemagnoliavirginholidays.filters.VirginholidaysCoUk","livemagnoliavirginholidays.filters.ExcludingQubitDisable1","livemagnoliavirginholidays.filters.ResponseTapDisabled","livemagnoliavirginholidays.filters.ExcludeWonderlist","livemagnoliavirginholidays.filters.ExcludeMultiDestinationFormLightbox","livemagnoliavirginholidays.filters.ExcludeTourCallbackLightbox"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=
function(){};a.script=function(){};a.post=function(){}})();(function(){try{qubit.opentag.Main.run()}catch(x){try{console.error("Errors during opentag main runtime.",x)}catch(a){}}})();